(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function Sh(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Nt={},Xi=[],Mn=()=>{},h_=()=>!1,Ql=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),xh=n=>n.startsWith("onUpdate:"),be=Object.assign,Ch=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},aE=Object.prototype.hasOwnProperty,kt=(n,t)=>aE.call(n,t),lt=Array.isArray,Ji=n=>Jo(n)==="[object Map]",Xl=n=>Jo(n)==="[object Set]",Hf=n=>Jo(n)==="[object Date]",ft=n=>typeof n=="function",Zt=n=>typeof n=="string",Fn=n=>typeof n=="symbol",Ft=n=>n!==null&&typeof n=="object",d_=n=>(Ft(n)||ft(n))&&ft(n.then)&&ft(n.catch),f_=Object.prototype.toString,Jo=n=>f_.call(n),lE=n=>Jo(n).slice(8,-1),p_=n=>Jo(n)==="[object Object]",Rh=n=>Zt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,po=Sh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jl=n=>{const t=Object.create(null);return(e=>t[e]||(t[e]=n(e)))},cE=/-\w/g,un=Jl(n=>n.replace(cE,t=>t.slice(1).toUpperCase())),uE=/\B([A-Z])/g,Di=Jl(n=>n.replace(uE,"-$1").toLowerCase()),Zl=Jl(n=>n.charAt(0).toUpperCase()+n.slice(1)),Yc=Jl(n=>n?`on${Zl(n)}`:""),ks=(n,t)=>!Object.is(n,t),Qa=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},g_=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},tc=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let $f;const ec=()=>$f||($f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ee(n){if(lt(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=Zt(s)?pE(s):ee(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Zt(n)||Ft(n))return n}const hE=/;(?![^(]*\))/g,dE=/:([^]+)/,fE=/\/\*[^]*?\*\//g;function pE(n){const t={};return n.replace(fE,"").split(hE).forEach(e=>{if(e){const s=e.split(dE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Es(n){let t="";if(Zt(n))t=n;else if(lt(n))for(let e=0;e<n.length;e++){const s=Es(n[e]);s&&(t+=s+" ")}else if(Ft(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const gE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mE=Sh(gE);function m_(n){return!!n||n===""}function _E(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=nc(n[s],t[s]);return e}function nc(n,t){if(n===t)return!0;let e=Hf(n),s=Hf(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Fn(n),s=Fn(t),e||s)return n===t;if(e=lt(n),s=lt(t),e||s)return e&&s?_E(n,t):!1;if(e=Ft(n),s=Ft(t),e||s){if(!e||!s)return!1;const i=Object.keys(n).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!nc(n[o],t[o]))return!1}}return String(n)===String(t)}function yE(n,t){return n.findIndex(e=>nc(e,t))}const __=n=>!!(n&&n.__v_isRef===!0),xt=n=>Zt(n)?n:n==null?"":lt(n)||Ft(n)&&(n.toString===f_||!ft(n.toString))?__(n)?xt(n.value):JSON.stringify(n,y_,2):String(n),y_=(n,t)=>__(t)?y_(n,t.value):Ji(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[Qc(s,r)+" =>"]=i,e),{})}:Xl(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Qc(e))}:Fn(t)?Qc(t):Ft(t)&&!lt(t)&&!p_(t)?String(t):t,Qc=(n,t="")=>{var e;return Fn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};let Be;class vE{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Be,!t&&Be&&(this.index=(Be.scopes||(Be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Be;try{return Be=this,t()}finally{Be=e}}}on(){++this._on===1&&(this.prevScope=Be,Be=this)}off(){this._on>0&&--this._on===0&&(Be=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function bE(){return Be}let Ut;const Xc=new WeakSet;class v_{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Be&&Be.active&&Be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xc.has(this)&&(Xc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||w_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wf(this),E_(this);const t=Ut,e=gn;Ut=this,gn=!0;try{return this.fn()}finally{T_(this),Ut=t,gn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Dh(t);this.deps=this.depsTail=void 0,Wf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vu(this)&&this.run()}get dirty(){return Vu(this)}}let b_=0,go,mo;function w_(n,t=!1){if(n.flags|=8,t){n.next=mo,mo=n;return}n.next=go,go=n}function Ph(){b_++}function kh(){if(--b_>0)return;if(mo){let t=mo;for(mo=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;go;){let t=go;for(go=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function E_(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function T_(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),Dh(s),wE(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function Vu(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(I_(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function I_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ko)||(n.globalVersion=ko,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Vu(n))))return;n.flags|=2;const t=n.dep,e=Ut,s=gn;Ut=n,gn=!0;try{E_(n);const i=n.fn(n._value);(t.version===0||ks(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{Ut=e,gn=s,T_(n),n.flags&=-3}}function Dh(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)Dh(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function wE(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let gn=!0;const A_=[];function ns(){A_.push(gn),gn=!1}function ss(){const n=A_.pop();gn=n===void 0?!0:n}function Wf(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Ut;Ut=void 0;try{t()}finally{Ut=e}}}let ko=0;class EE{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ut||!gn||Ut===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Ut)e=this.activeLink=new EE(Ut,this),Ut.deps?(e.prevDep=Ut.depsTail,Ut.depsTail.nextDep=e,Ut.depsTail=e):Ut.deps=Ut.depsTail=e,S_(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Ut.depsTail,e.nextDep=void 0,Ut.depsTail.nextDep=e,Ut.depsTail=e,Ut.deps===e&&(Ut.deps=s)}return e}trigger(t){this.version++,ko++,this.notify(t)}notify(t){Ph();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{kh()}}}function S_(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)S_(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Nu=new WeakMap,yi=Symbol(""),Lu=Symbol(""),Do=Symbol("");function Ce(n,t,e){if(gn&&Ut){let s=Nu.get(n);s||Nu.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new Mh),i.map=s,i.key=e),i.track()}}function Yn(n,t,e,s,i,r){const o=Nu.get(n);if(!o){ko++;return}const a=l=>{l&&l.trigger()};if(Ph(),t==="clear")o.forEach(a);else{const l=lt(n),u=l&&Rh(e);if(l&&e==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===Do||!Fn(p)&&p>=h)&&a(d)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),u&&a(o.get(Do)),t){case"add":l?u&&a(o.get("length")):(a(o.get(yi)),Ji(n)&&a(o.get(Lu)));break;case"delete":l||(a(o.get(yi)),Ji(n)&&a(o.get(Lu)));break;case"set":Ji(n)&&a(o.get(yi));break}}kh()}function ji(n){const t=It(n);return t===n?t:(Ce(t,"iterate",Do),an(n)?t:t.map(yn))}function sc(n){return Ce(n=It(n),"iterate",Do),n}function vs(n,t){return is(n)?ur(vi(n)?yn(t):t):yn(t)}const TE={__proto__:null,[Symbol.iterator](){return Jc(this,Symbol.iterator,n=>vs(this,n))},concat(...n){return ji(this).concat(...n.map(t=>lt(t)?ji(t):t))},entries(){return Jc(this,"entries",n=>(n[1]=vs(this,n[1]),n))},every(n,t){return Hn(this,"every",n,t,void 0,arguments)},filter(n,t){return Hn(this,"filter",n,t,e=>e.map(s=>vs(this,s)),arguments)},find(n,t){return Hn(this,"find",n,t,e=>vs(this,e),arguments)},findIndex(n,t){return Hn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Hn(this,"findLast",n,t,e=>vs(this,e),arguments)},findLastIndex(n,t){return Hn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Hn(this,"forEach",n,t,void 0,arguments)},includes(...n){return Zc(this,"includes",n)},indexOf(...n){return Zc(this,"indexOf",n)},join(n){return ji(this).join(n)},lastIndexOf(...n){return Zc(this,"lastIndexOf",n)},map(n,t){return Hn(this,"map",n,t,void 0,arguments)},pop(){return Wr(this,"pop")},push(...n){return Wr(this,"push",n)},reduce(n,...t){return qf(this,"reduce",n,t)},reduceRight(n,...t){return qf(this,"reduceRight",n,t)},shift(){return Wr(this,"shift")},some(n,t){return Hn(this,"some",n,t,void 0,arguments)},splice(...n){return Wr(this,"splice",n)},toReversed(){return ji(this).toReversed()},toSorted(n){return ji(this).toSorted(n)},toSpliced(...n){return ji(this).toSpliced(...n)},unshift(...n){return Wr(this,"unshift",n)},values(){return Jc(this,"values",n=>vs(this,n))}};function Jc(n,t,e){const s=sc(n),i=s[t]();return s!==n&&!an(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=e(r.value)),r}),i}const IE=Array.prototype;function Hn(n,t,e,s,i,r){const o=sc(n),a=o!==n&&!an(n),l=o[t];if(l!==IE[t]){const d=l.apply(n,r);return a?yn(d):d}let u=e;o!==n&&(a?u=function(d,p){return e.call(this,vs(n,d),p,n)}:e.length>2&&(u=function(d,p){return e.call(this,d,p,n)}));const h=l.call(o,u,s);return a&&i?i(h):h}function qf(n,t,e,s){const i=sc(n);let r=e;return i!==n&&(an(n)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,n)}):r=function(o,a,l){return e.call(this,o,vs(n,a),l,n)}),i[t](r,...s)}function Zc(n,t,e){const s=It(n);Ce(s,"iterate",Do);const i=s[t](...e);return(i===-1||i===!1)&&Zo(e[0])?(e[0]=It(e[0]),s[t](...e)):i}function Wr(n,t,e=[]){ns(),Ph();const s=It(n)[t].apply(n,e);return kh(),ss(),s}const AE=Sh("__proto__,__v_isRef,__isVue"),x_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Fn));function SE(n){Fn(n)||(n=String(n));const t=It(this);return Ce(t,"has",n),t.hasOwnProperty(n)}class C_{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?NE:D_:r?k_:P_).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=lt(t);if(!i){let l;if(o&&(l=TE[e]))return l;if(e==="hasOwnProperty")return SE}const a=Reflect.get(t,e,ke(t)?t:s);if((Fn(e)?x_.has(e):AE(e))||(i||Ce(t,"get",e),r))return a;if(ke(a)){const l=o&&Rh(e)?a:a.value;return i&&Ft(l)?Uu(l):l}return Ft(a)?i?Uu(a):Vh(a):a}}class R_ extends C_{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];const o=lt(t)&&Rh(e);if(!this._isShallow){const u=is(r);if(!an(s)&&!is(s)&&(r=It(r),s=It(s)),!o&&ke(r)&&!ke(s))return u||(r.value=s),!0}const a=o?Number(e)<t.length:kt(t,e),l=Reflect.set(t,e,s,ke(t)?t:i);return t===It(i)&&(a?ks(s,r)&&Yn(t,"set",e,s):Yn(t,"add",e,s)),l}deleteProperty(t,e){const s=kt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&Yn(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!Fn(e)||!x_.has(e))&&Ce(t,"has",e),s}ownKeys(t){return Ce(t,"iterate",lt(t)?"length":yi),Reflect.ownKeys(t)}}class xE extends C_{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const CE=new R_,RE=new xE,PE=new R_(!0);const Fu=n=>n,Sa=n=>Reflect.getPrototypeOf(n);function kE(n,t,e){return function(...s){const i=this.__v_raw,r=It(i),o=Ji(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=i[n](...s),h=e?Fu:t?ur:yn;return!t&&Ce(r,"iterate",l?Lu:yi),be(Object.create(u),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}}})}}function xa(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function DE(n,t){const e={get(i){const r=this.__v_raw,o=It(r),a=It(i);n||(ks(i,a)&&Ce(o,"get",i),Ce(o,"get",a));const{has:l}=Sa(o),u=t?Fu:n?ur:yn;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&Ce(It(i),"iterate",yi),i.size},has(i){const r=this.__v_raw,o=It(r),a=It(i);return n||(ks(i,a)&&Ce(o,"has",i),Ce(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=It(a),u=t?Fu:n?ur:yn;return!n&&Ce(l,"iterate",yi),a.forEach((h,d)=>i.call(r,u(h),u(d),o))}};return be(e,n?{add:xa("add"),set:xa("set"),delete:xa("delete"),clear:xa("clear")}:{add(i){!t&&!an(i)&&!is(i)&&(i=It(i));const r=It(this);return Sa(r).has.call(r,i)||(r.add(i),Yn(r,"add",i,i)),this},set(i,r){!t&&!an(r)&&!is(r)&&(r=It(r));const o=It(this),{has:a,get:l}=Sa(o);let u=a.call(o,i);u||(i=It(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,r),u?ks(r,h)&&Yn(o,"set",i,r):Yn(o,"add",i,r),this},delete(i){const r=It(this),{has:o,get:a}=Sa(r);let l=o.call(r,i);l||(i=It(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&Yn(r,"delete",i,void 0),u},clear(){const i=It(this),r=i.size!==0,o=i.clear();return r&&Yn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=kE(i,n,t)}),e}function Oh(n,t){const e=DE(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(kt(e,i)&&i in s?e:s,i,r)}const ME={get:Oh(!1,!1)},OE={get:Oh(!1,!0)},VE={get:Oh(!0,!1)};const P_=new WeakMap,k_=new WeakMap,D_=new WeakMap,NE=new WeakMap;function LE(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function FE(n){return n.__v_skip||!Object.isExtensible(n)?0:LE(lE(n))}function Vh(n){return is(n)?n:Nh(n,!1,CE,ME,P_)}function UE(n){return Nh(n,!1,PE,OE,k_)}function Uu(n){return Nh(n,!0,RE,VE,D_)}function Nh(n,t,e,s,i){if(!Ft(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=FE(n);if(r===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,r===2?s:e);return i.set(n,a),a}function vi(n){return is(n)?vi(n.__v_raw):!!(n&&n.__v_isReactive)}function is(n){return!!(n&&n.__v_isReadonly)}function an(n){return!!(n&&n.__v_isShallow)}function Zo(n){return n?!!n.__v_raw:!1}function It(n){const t=n&&n.__v_raw;return t?It(t):n}function BE(n){return!kt(n,"__v_skip")&&Object.isExtensible(n)&&g_(n,"__v_skip",!0),n}const yn=n=>Ft(n)?Vh(n):n,ur=n=>Ft(n)?Uu(n):n;function ke(n){return n?n.__v_isRef===!0:!1}function Yt(n){return O_(n,!1)}function M_(n){return O_(n,!0)}function O_(n,t){return ke(n)?n:new jE(n,t)}class jE{constructor(t,e){this.dep=new Mh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:It(t),this._value=e?t:yn(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||an(t)||is(t);t=s?t:It(t),ks(t,e)&&(this._rawValue=t,this._value=s?t:yn(t),this.dep.trigger())}}function Se(n){return ke(n)?n.value:n}const zE={get:(n,t,e)=>t==="__v_raw"?n:Se(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return ke(i)&&!ke(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function V_(n){return vi(n)?n:new Proxy(n,zE)}class HE{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Mh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ko-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ut!==this)return w_(this,!0),!0}get value(){const t=this.dep.track();return I_(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function $E(n,t,e=!1){let s,i;return ft(n)?s=n:(s=n.get,i=n.set),new HE(s,i,e)}const Ca={},fl=new WeakMap;let hi;function WE(n,t=!1,e=hi){if(e){let s=fl.get(e);s||fl.set(e,s=[]),s.push(n)}}function qE(n,t,e=Nt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=e,u=U=>i?U:an(U)||i===!1||i===0?Qn(U,1):Qn(U);let h,d,p,m,w=!1,b=!1;if(ke(n)?(d=()=>n.value,w=an(n)):vi(n)?(d=()=>u(n),w=!0):lt(n)?(b=!0,w=n.some(U=>vi(U)||an(U)),d=()=>n.map(U=>{if(ke(U))return U.value;if(vi(U))return u(U);if(ft(U))return l?l(U,2):U()})):ft(n)?t?d=l?()=>l(n,2):n:d=()=>{if(p){ns();try{p()}finally{ss()}}const U=hi;hi=h;try{return l?l(n,3,[m]):n(m)}finally{hi=U}}:d=Mn,t&&i){const U=d,O=i===!0?1/0:i;d=()=>Qn(U(),O)}const A=bE(),P=()=>{h.stop(),A&&A.active&&Ch(A.effects,h)};if(r&&t){const U=t;t=(...O)=>{U(...O),P()}}let N=b?new Array(n.length).fill(Ca):Ca;const B=U=>{if(!(!(h.flags&1)||!h.dirty&&!U))if(t){const O=h.run();if(i||w||(b?O.some((Y,I)=>ks(Y,N[I])):ks(O,N))){p&&p();const Y=hi;hi=h;try{const I=[O,N===Ca?void 0:b&&N[0]===Ca?[]:N,m];N=O,l?l(t,3,I):t(...I)}finally{hi=Y}}}else h.run()};return a&&a(B),h=new v_(d),h.scheduler=o?()=>o(B,!1):B,m=U=>WE(U,!1,h),p=h.onStop=()=>{const U=fl.get(h);if(U){if(l)l(U,4);else for(const O of U)O();fl.delete(h)}},t?s?B(!0):N=h.run():o?o(B.bind(null,!0),!0):h.run(),P.pause=h.pause.bind(h),P.resume=h.resume.bind(h),P.stop=P,P}function Qn(n,t=1/0,e){if(t<=0||!Ft(n)||n.__v_skip||(e=e||new Map,(e.get(n)||0)>=t))return n;if(e.set(n,t),t--,ke(n))Qn(n.value,t,e);else if(lt(n))for(let s=0;s<n.length;s++)Qn(n[s],t,e);else if(Xl(n)||Ji(n))n.forEach(s=>{Qn(s,t,e)});else if(p_(n)){for(const s in n)Qn(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Qn(n[s],t,e)}return n}function ta(n,t,e,s){try{return s?n(...s):n()}catch(i){ic(i,t,e)}}function Un(n,t,e,s){if(ft(n)){const i=ta(n,t,e,s);return i&&d_(i)&&i.catch(r=>{ic(r,t,e)}),i}if(lt(n)){const i=[];for(let r=0;r<n.length;r++)i.push(Un(n[r],t,e,s));return i}}function ic(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Nt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](n,l,u)===!1)return}a=a.parent}if(r){ns(),ta(r,null,10,[n,l,u]),ss();return}}KE(n,e,i,s,o)}function KE(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const Ne=[];let Cn=-1;const Zi=[];let bs=null,Wi=0;const N_=Promise.resolve();let pl=null;function Lh(n){const t=pl||N_;return n?t.then(this?n.bind(this):n):t}function GE(n){let t=Cn+1,e=Ne.length;for(;t<e;){const s=t+e>>>1,i=Ne[s],r=Mo(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function Fh(n){if(!(n.flags&1)){const t=Mo(n),e=Ne[Ne.length-1];!e||!(n.flags&2)&&t>=Mo(e)?Ne.push(n):Ne.splice(GE(t),0,n),n.flags|=1,L_()}}function L_(){pl||(pl=N_.then(U_))}function YE(n){lt(n)?Zi.push(...n):bs&&n.id===-1?bs.splice(Wi+1,0,n):n.flags&1||(Zi.push(n),n.flags|=1),L_()}function Kf(n,t,e=Cn+1){for(;e<Ne.length;e++){const s=Ne[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Ne.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function F_(n){if(Zi.length){const t=[...new Set(Zi)].sort((e,s)=>Mo(e)-Mo(s));if(Zi.length=0,bs){bs.push(...t);return}for(bs=t,Wi=0;Wi<bs.length;Wi++){const e=bs[Wi];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}bs=null,Wi=0}}const Mo=n=>n.id==null?n.flags&2?-1:1/0:n.id;function U_(n){try{for(Cn=0;Cn<Ne.length;Cn++){const t=Ne[Cn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ta(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Cn<Ne.length;Cn++){const t=Ne[Cn];t&&(t.flags&=-2)}Cn=-1,Ne.length=0,F_(),pl=null,(Ne.length||Zi.length)&&U_()}}let tn=null,B_=null;function gl(n){const t=tn;return tn=n,B_=n&&n.type.__scopeId||null,t}function j_(n,t=tn,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&yl(-1);const r=gl(t);let o;try{o=n(...i)}finally{gl(r),s._d&&yl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function bt(n,t){if(tn===null)return n;const e=lc(tn),s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Nt]=t[i];r&&(ft(r)&&(r={mounted:r,updated:r}),r.deep&&Qn(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function oi(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(ns(),Un(l,e,8,[n.el,a,n,t]),ss())}}function QE(n,t){if(Pe){let e=Pe.provides;const s=Pe.parent&&Pe.parent.provides;s===e&&(e=Pe.provides=Object.create(s)),e[n]=t}}function Xa(n,t,e=!1){const s=QT();if(s||tr){let i=tr?tr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&ft(t)?t.call(s&&s.proxy):t}}const XE=Symbol.for("v-scx"),JE=()=>Xa(XE);function _o(n,t,e){return z_(n,t,e)}function z_(n,t,e=Nt){const{immediate:s,deep:i,flush:r,once:o}=e,a=be({},e),l=t&&s||!t&&r!=="post";let u;if(Vo){if(r==="sync"){const m=JE();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Mn,m.resume=Mn,m.pause=Mn,m}}const h=Pe;a.call=(m,w,b)=>Un(m,h,w,b);let d=!1;r==="post"?a.scheduler=m=>{Xe(m,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():Fh(m)}),a.augmentJob=m=>{t&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=qE(n,t,a);return Vo&&(u?u.push(p):l&&p()),p}function ZE(n,t,e){const s=this.proxy,i=Zt(n)?n.includes(".")?H_(s,n):()=>s[n]:n.bind(s,s);let r;ft(t)?r=t:(r=t.handler,e=t);const o=ea(this),a=z_(i,r.bind(s),e);return o(),a}function H_(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const tT=Symbol("_vte"),eT=n=>n.__isTeleport,nT=Symbol("_leaveCb");function Uh(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Uh(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function $_(n,t){return ft(n)?be({name:n.name},t,{setup:n}):n}function W_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const ml=new WeakMap;function yo(n,t,e,s,i=!1){if(lt(n)){n.forEach((w,b)=>yo(w,t&&(lt(t)?t[b]:t),e,s,i));return}if(vo(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&yo(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?lc(s.component):s.el,o=i?null:r,{i:a,r:l}=n,u=t&&t.r,h=a.refs===Nt?a.refs={}:a.refs,d=a.setupState,p=It(d),m=d===Nt?h_:w=>kt(p,w);if(u!=null&&u!==l){if(Gf(t),Zt(u))h[u]=null,m(u)&&(d[u]=null);else if(ke(u)){u.value=null;const w=t;w.k&&(h[w.k]=null)}}if(ft(l))ta(l,a,12,[o,h]);else{const w=Zt(l),b=ke(l);if(w||b){const A=()=>{if(n.f){const P=w?m(l)?d[l]:h[l]:l.value;if(i)lt(P)&&Ch(P,r);else if(lt(P))P.includes(r)||P.push(r);else if(w)h[l]=[r],m(l)&&(d[l]=h[l]);else{const N=[r];l.value=N,n.k&&(h[n.k]=N)}}else w?(h[l]=o,m(l)&&(d[l]=o)):b&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const P=()=>{A(),ml.delete(n)};P.id=-1,ml.set(n,P),Xe(P,e)}else Gf(n),A()}}}function Gf(n){const t=ml.get(n);t&&(t.flags|=8,ml.delete(n))}ec().requestIdleCallback;ec().cancelIdleCallback;const vo=n=>!!n.type.__asyncLoader,q_=n=>n.type.__isKeepAlive;function sT(n,t){K_(n,"a",t)}function iT(n,t){K_(n,"da",t)}function K_(n,t,e=Pe){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(rc(t,s,e),e){let i=e.parent;for(;i&&i.parent;)q_(i.parent.vnode)&&rT(s,t,e,i),i=i.parent}}function rT(n,t,e,s){const i=rc(t,n,s,!0);jh(()=>{Ch(s[t],i)},e)}function rc(n,t,e=Pe,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{ns();const a=ea(e),l=Un(t,e,n,o);return a(),ss(),l});return s?i.unshift(r):i.push(r),r}}const cs=n=>(t,e=Pe)=>{(!Vo||n==="sp")&&rc(n,(...s)=>t(...s),e)},oT=cs("bm"),Bh=cs("m"),aT=cs("bu"),lT=cs("u"),cT=cs("bum"),jh=cs("um"),uT=cs("sp"),hT=cs("rtg"),dT=cs("rtc");function fT(n,t=Pe){rc("ec",n,t)}const pT="components",G_=Symbol.for("v-ndc");function gT(n){return Zt(n)?mT(pT,n,!1)||n:n||G_}function mT(n,t,e=!0,s=!1){const i=tn||Pe;if(i){const r=i.type;{const a=eI(r,!1);if(a&&(a===t||a===un(t)||a===Zl(un(t))))return r}const o=Yf(i[n]||r[n],t)||Yf(i.appContext[n],t);return!o&&s?r:o}}function Yf(n,t){return n&&(n[t]||n[un(t)]||n[Zl(un(t))])}function In(n,t,e,s){let i;const r=e,o=lt(n);if(o||Zt(n)){const a=o&&vi(n);let l=!1,u=!1;a&&(l=!an(n),u=is(n),n=sc(n)),i=new Array(n.length);for(let h=0,d=n.length;h<d;h++)i[h]=t(l?u?ur(yn(n[h])):yn(n[h]):n[h],h,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,r)}else if(Ft(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=t(n[h],h,l,r)}}else i=[];return i}const Bu=n=>n?py(n)?lc(n):Bu(n.parent):null,bo=be(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Bu(n.parent),$root:n=>Bu(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Q_(n),$forceUpdate:n=>n.f||(n.f=()=>{Fh(n.update)}),$nextTick:n=>n.n||(n.n=Lh.bind(n.proxy)),$watch:n=>ZE.bind(n)}),tu=(n,t)=>n!==Nt&&!n.__isScriptSetup&&kt(n,t),_T={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=n;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(tu(s,t))return o[t]=1,s[t];if(i!==Nt&&kt(i,t))return o[t]=2,i[t];if(kt(r,t))return o[t]=3,r[t];if(e!==Nt&&kt(e,t))return o[t]=4,e[t];ju&&(o[t]=0)}}const u=bo[t];let h,d;if(u)return t==="$attrs"&&Ce(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[t]))return h;if(e!==Nt&&kt(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,kt(d,t))return d[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return tu(i,t)?(i[t]=e,!0):s!==Nt&&kt(s,t)?(s[t]=e,!0):kt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,props:r,type:o}},a){let l;return!!(e[a]||n!==Nt&&a[0]!=="$"&&kt(n,a)||tu(t,a)||kt(r,a)||kt(s,a)||kt(bo,a)||kt(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:kt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Qf(n){return lt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let ju=!0;function yT(n){const t=Q_(n),e=n.proxy,s=n.ctx;ju=!1,t.beforeCreate&&Xf(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:b,deactivated:A,beforeDestroy:P,beforeUnmount:N,destroyed:B,unmounted:U,render:O,renderTracked:Y,renderTriggered:I,errorCaptured:v,serverPrefetch:E,expose:R,inheritAttrs:x,components:k,directives:S,filters:wt}=t;if(u&&vT(u,s,null),o)for(const it in o){const st=o[it];ft(st)&&(s[it]=st.bind(e))}if(i){const it=i.call(e,e);Ft(it)&&(n.data=Vh(it))}if(ju=!0,r)for(const it in r){const st=r[it],Ct=ft(st)?st.bind(e,e):ft(st.get)?st.get.bind(e,e):Mn,Me=!ft(st)&&ft(st.set)?st.set.bind(e):Mn,me=qi({get:Ct,set:Me});Object.defineProperty(s,it,{enumerable:!0,configurable:!0,get:()=>me.value,set:Wt=>me.value=Wt})}if(a)for(const it in a)Y_(a[it],s,e,it);if(l){const it=ft(l)?l.call(e):l;Reflect.ownKeys(it).forEach(st=>{QE(st,it[st])})}h&&Xf(h,n,"c");function ht(it,st){lt(st)?st.forEach(Ct=>it(Ct.bind(e))):st&&it(st.bind(e))}if(ht(oT,d),ht(Bh,p),ht(aT,m),ht(lT,w),ht(sT,b),ht(iT,A),ht(fT,v),ht(dT,Y),ht(hT,I),ht(cT,N),ht(jh,U),ht(uT,E),lt(R))if(R.length){const it=n.exposed||(n.exposed={});R.forEach(st=>{Object.defineProperty(it,st,{get:()=>e[st],set:Ct=>e[st]=Ct,enumerable:!0})})}else n.exposed||(n.exposed={});O&&n.render===Mn&&(n.render=O),x!=null&&(n.inheritAttrs=x),k&&(n.components=k),S&&(n.directives=S),E&&W_(n)}function vT(n,t,e=Mn){lt(n)&&(n=zu(n));for(const s in n){const i=n[s];let r;Ft(i)?"default"in i?r=Xa(i.from||s,i.default,!0):r=Xa(i.from||s):r=Xa(i),ke(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Xf(n,t,e){Un(lt(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Y_(n,t,e,s){let i=s.includes(".")?H_(e,s):()=>e[s];if(Zt(n)){const r=t[n];ft(r)&&_o(i,r)}else if(ft(n))_o(i,n.bind(e));else if(Ft(n))if(lt(n))n.forEach(r=>Y_(r,t,e,s));else{const r=ft(n.handler)?n.handler.bind(e):t[n.handler];ft(r)&&_o(i,r,n)}}function Q_(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!e&&!s?l=t:(l={},i.length&&i.forEach(u=>_l(l,u,o,!0)),_l(l,t,o)),Ft(t)&&r.set(t,l),l}function _l(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&_l(n,r,e,!0),i&&i.forEach(o=>_l(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=bT[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const bT={data:Jf,props:Zf,emits:Zf,methods:so,computed:so,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:so,directives:so,watch:ET,provide:Jf,inject:wT};function Jf(n,t){return t?n?function(){return be(ft(n)?n.call(this,this):n,ft(t)?t.call(this,this):t)}:t:n}function wT(n,t){return so(zu(n),zu(t))}function zu(n){if(lt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Ve(n,t){return n?[...new Set([].concat(n,t))]:t}function so(n,t){return n?be(Object.create(null),n,t):t}function Zf(n,t){return n?lt(n)&&lt(t)?[...new Set([...n,...t])]:be(Object.create(null),Qf(n),Qf(t??{})):t}function ET(n,t){if(!n)return t;if(!t)return n;const e=be(Object.create(null),n);for(const s in t)e[s]=Ve(n[s],t[s]);return e}function X_(){return{app:null,config:{isNativeTag:h_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let TT=0;function IT(n,t){return function(s,i=null){ft(s)||(s=be({},s)),i!=null&&!Ft(i)&&(i=null);const r=X_(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:TT++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:my,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&ft(h.install)?(o.add(h),h.install(u,...d)):ft(h)&&(o.add(h),h(u,...d))),u},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),u},component(h,d){return d?(r.components[h]=d,u):r.components[h]},directive(h,d){return d?(r.directives[h]=d,u):r.directives[h]},mount(h,d,p){if(!l){const m=u._ceVNode||Le(s,i);return m.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),n(m,h,p),l=!0,u._container=h,h.__vue_app__=u,lc(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Un(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,d){return r.provides[h]=d,u},runWithContext(h){const d=tr;tr=u;try{return h()}finally{tr=d}}};return u}}let tr=null;const AT=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${un(t)}Modifiers`]||n[`${Di(t)}Modifiers`];function ST(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||Nt;let i=e;const r=t.startsWith("update:"),o=r&&AT(s,t.slice(7));o&&(o.trim&&(i=e.map(h=>Zt(h)?h.trim():h)),o.number&&(i=e.map(tc)));let a,l=s[a=Yc(t)]||s[a=Yc(un(t))];!l&&r&&(l=s[a=Yc(Di(t))]),l&&Un(l,n,6,i);const u=s[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Un(u,n,6,i)}}const xT=new WeakMap;function J_(n,t,e=!1){const s=e?xT:t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!ft(n)){const l=u=>{const h=J_(u,t,!0);h&&(a=!0,be(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Ft(n)&&s.set(n,null),null):(lt(r)?r.forEach(l=>o[l]=null):be(o,r),Ft(n)&&s.set(n,o),o)}function oc(n,t){return!n||!Ql(t)?!1:(t=t.slice(2).replace(/Once$/,""),kt(n,t[0].toLowerCase()+t.slice(1))||kt(n,Di(t))||kt(n,t))}function tp(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:b}=n,A=gl(n);let P,N;try{if(e.shapeFlag&4){const U=i||s,O=U;P=Dn(u.call(O,U,h,d,m,p,w)),N=a}else{const U=t;P=Dn(U.length>1?U(d,{attrs:a,slots:o,emit:l}):U(d,null)),N=t.props?a:CT(a)}}catch(U){wo.length=0,ic(U,n,1),P=Le(Bs)}let B=P;if(N&&b!==!1){const U=Object.keys(N),{shapeFlag:O}=B;U.length&&O&7&&(r&&U.some(xh)&&(N=RT(N,r)),B=hr(B,N,!1,!0))}return e.dirs&&(B=hr(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(e.dirs):e.dirs),e.transition&&Uh(B,e.transition),P=B,gl(A),P}const CT=n=>{let t;for(const e in n)(e==="class"||e==="style"||Ql(e))&&((t||(t={}))[e]=n[e]);return t},RT=(n,t)=>{const e={};for(const s in n)(!xh(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function PT(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?ep(s,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!oc(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?ep(s,o,u):!0:!!o;return!1}function ep(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!oc(e,r))return!0}return!1}function kT({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const Z_={},ty=()=>Object.create(Z_),ey=n=>Object.getPrototypeOf(n)===Z_;function DT(n,t,e,s=!1){const i={},r=ty();n.propsDefaults=Object.create(null),ny(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:UE(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function MT(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=It(i),[l]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(oc(n.emitsOptions,p))continue;const m=t[p];if(l)if(kt(r,p))m!==r[p]&&(r[p]=m,u=!0);else{const w=un(p);i[w]=Hu(l,a,w,m,n,!1)}else m!==r[p]&&(r[p]=m,u=!0)}}}else{ny(n,t,i,r)&&(u=!0);let h;for(const d in a)(!t||!kt(t,d)&&((h=Di(d))===d||!kt(t,h)))&&(l?e&&(e[d]!==void 0||e[h]!==void 0)&&(i[d]=Hu(l,a,d,void 0,n,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!kt(t,d))&&(delete r[d],u=!0)}u&&Yn(n.attrs,"set","")}function ny(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(po(l))continue;const u=t[l];let h;i&&kt(i,h=un(l))?!r||!r.includes(h)?e[h]=u:(a||(a={}))[h]=u:oc(n.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=It(e),u=a||Nt;for(let h=0;h<r.length;h++){const d=r[h];e[d]=Hu(i,l,d,u[d],n,!kt(u,d))}}return o}function Hu(n,t,e,s,i,r){const o=n[e];if(o!=null){const a=kt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ft(l)){const{propsDefaults:u}=i;if(e in u)s=u[e];else{const h=ea(i);s=u[e]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Di(e))&&(s=!0))}return s}const OT=new WeakMap;function sy(n,t,e=!1){const s=e?OT:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let l=!1;if(!ft(n)){const h=d=>{l=!0;const[p,m]=sy(d,t,!0);be(o,p),m&&a.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!r&&!l)return Ft(n)&&s.set(n,Xi),Xi;if(lt(r))for(let h=0;h<r.length;h++){const d=un(r[h]);np(d)&&(o[d]=Nt)}else if(r)for(const h in r){const d=un(h);if(np(d)){const p=r[h],m=o[d]=lt(p)||ft(p)?{type:p}:be({},p),w=m.type;let b=!1,A=!0;if(lt(w))for(let P=0;P<w.length;++P){const N=w[P],B=ft(N)&&N.name;if(B==="Boolean"){b=!0;break}else B==="String"&&(A=!1)}else b=ft(w)&&w.name==="Boolean";m[0]=b,m[1]=A,(b||kt(m,"default"))&&a.push(d)}}const u=[o,a];return Ft(n)&&s.set(n,u),u}function np(n){return n[0]!=="$"&&!po(n)}const zh=n=>n==="_"||n==="_ctx"||n==="$stable",Hh=n=>lt(n)?n.map(Dn):[Dn(n)],VT=(n,t,e)=>{if(t._n)return t;const s=j_((...i)=>Hh(t(...i)),e);return s._c=!1,s},iy=(n,t,e)=>{const s=n._ctx;for(const i in n){if(zh(i))continue;const r=n[i];if(ft(r))t[i]=VT(i,r,s);else if(r!=null){const o=Hh(r);t[i]=()=>o}}},ry=(n,t)=>{const e=Hh(t);n.slots.default=()=>e},oy=(n,t,e)=>{for(const s in t)(e||!zh(s))&&(n[s]=t[s])},NT=(n,t,e)=>{const s=n.slots=ty();if(n.vnode.shapeFlag&32){const i=t._;i?(oy(s,t,e),e&&g_(s,"_",i,!0)):iy(t,s)}else t&&ry(n,t)},LT=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=Nt;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:oy(i,t,e):(r=!t.$stable,iy(t,i)),o=t}else t&&(ry(n,t),o={default:1});if(r)for(const a in i)!zh(a)&&o[a]==null&&delete i[a]},Xe=zT;function FT(n){return UT(n)}function UT(n,t){const e=ec();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Mn,insertStaticContent:w}=n,b=(C,D,j,K=null,W=null,q=null,J=void 0,G=null,V=!!D.dynamicChildren)=>{if(C===D)return;C&&!qr(C,D)&&(K=wn(C),Wt(C,W,q,!0),C=null),D.patchFlag===-2&&(V=!1,D.dynamicChildren=null);const{type:_,ref:T,shapeFlag:$}=D;switch(_){case ac:A(C,D,j,K);break;case Bs:P(C,D,j,K);break;case nu:C==null&&N(D,j,K,J);break;case se:k(C,D,j,K,W,q,J,G,V);break;default:$&1?O(C,D,j,K,W,q,J,G,V):$&6?S(C,D,j,K,W,q,J,G,V):($&64||$&128)&&_.process(C,D,j,K,W,q,J,G,V,zn)}T!=null&&W?yo(T,C&&C.ref,q,D||C,!D):T==null&&C&&C.ref!=null&&yo(C.ref,null,q,C,!0)},A=(C,D,j,K)=>{if(C==null)s(D.el=a(D.children),j,K);else{const W=D.el=C.el;D.children!==C.children&&u(W,D.children)}},P=(C,D,j,K)=>{C==null?s(D.el=l(D.children||""),j,K):D.el=C.el},N=(C,D,j,K)=>{[C.el,C.anchor]=w(C.children,D,j,K,C.el,C.anchor)},B=({el:C,anchor:D},j,K)=>{let W;for(;C&&C!==D;)W=p(C),s(C,j,K),C=W;s(D,j,K)},U=({el:C,anchor:D})=>{let j;for(;C&&C!==D;)j=p(C),i(C),C=j;i(D)},O=(C,D,j,K,W,q,J,G,V)=>{if(D.type==="svg"?J="svg":D.type==="math"&&(J="mathml"),C==null)Y(D,j,K,W,q,J,G,V);else{const _=C.el&&C.el._isVueCE?C.el:null;try{_&&_._beginPatch(),E(C,D,W,q,J,G,V)}finally{_&&_._endPatch()}}},Y=(C,D,j,K,W,q,J,G)=>{let V,_;const{props:T,shapeFlag:$,transition:X,dirs:et}=C;if(V=C.el=o(C.type,q,T&&T.is,T),$&8?h(V,C.children):$&16&&v(C.children,V,null,K,W,eu(C,q),J,G),et&&oi(C,null,K,"created"),I(V,C,C.scopeId,J,K),T){for(const Rt in T)Rt!=="value"&&!po(Rt)&&r(V,Rt,null,T[Rt],q,K);"value"in T&&r(V,"value",null,T.value,q),(_=T.onVnodeBeforeMount)&&An(_,K,C)}et&&oi(C,null,K,"beforeMount");const gt=BT(W,X);gt&&X.beforeEnter(V),s(V,D,j),((_=T&&T.onVnodeMounted)||gt||et)&&Xe(()=>{_&&An(_,K,C),gt&&X.enter(V),et&&oi(C,null,K,"mounted")},W)},I=(C,D,j,K,W)=>{if(j&&m(C,j),K)for(let q=0;q<K.length;q++)m(C,K[q]);if(W){let q=W.subTree;if(D===q||uy(q.type)&&(q.ssContent===D||q.ssFallback===D)){const J=W.vnode;I(C,J,J.scopeId,J.slotScopeIds,W.parent)}}},v=(C,D,j,K,W,q,J,G,V=0)=>{for(let _=V;_<C.length;_++){const T=C[_]=G?ws(C[_]):Dn(C[_]);b(null,T,D,j,K,W,q,J,G)}},E=(C,D,j,K,W,q,J)=>{const G=D.el=C.el;let{patchFlag:V,dynamicChildren:_,dirs:T}=D;V|=C.patchFlag&16;const $=C.props||Nt,X=D.props||Nt;let et;if(j&&ai(j,!1),(et=X.onVnodeBeforeUpdate)&&An(et,j,D,C),T&&oi(D,C,j,"beforeUpdate"),j&&ai(j,!0),($.innerHTML&&X.innerHTML==null||$.textContent&&X.textContent==null)&&h(G,""),_?R(C.dynamicChildren,_,G,j,K,eu(D,W),q):J||st(C,D,G,null,j,K,eu(D,W),q,!1),V>0){if(V&16)x(G,$,X,j,W);else if(V&2&&$.class!==X.class&&r(G,"class",null,X.class,W),V&4&&r(G,"style",$.style,X.style,W),V&8){const gt=D.dynamicProps;for(let Rt=0;Rt<gt.length;Rt++){const Tt=gt[Rt],Te=$[Tt],Ie=X[Tt];(Ie!==Te||Tt==="value")&&r(G,Tt,Te,Ie,W,j)}}V&1&&C.children!==D.children&&h(G,D.children)}else!J&&_==null&&x(G,$,X,j,W);((et=X.onVnodeUpdated)||T)&&Xe(()=>{et&&An(et,j,D,C),T&&oi(D,C,j,"updated")},K)},R=(C,D,j,K,W,q,J)=>{for(let G=0;G<D.length;G++){const V=C[G],_=D[G],T=V.el&&(V.type===se||!qr(V,_)||V.shapeFlag&198)?d(V.el):j;b(V,_,T,null,K,W,q,J,!0)}},x=(C,D,j,K,W)=>{if(D!==j){if(D!==Nt)for(const q in D)!po(q)&&!(q in j)&&r(C,q,D[q],null,W,K);for(const q in j){if(po(q))continue;const J=j[q],G=D[q];J!==G&&q!=="value"&&r(C,q,G,J,W,K)}"value"in j&&r(C,"value",D.value,j.value,W)}},k=(C,D,j,K,W,q,J,G,V)=>{const _=D.el=C?C.el:a(""),T=D.anchor=C?C.anchor:a("");let{patchFlag:$,dynamicChildren:X,slotScopeIds:et}=D;et&&(G=G?G.concat(et):et),C==null?(s(_,j,K),s(T,j,K),v(D.children||[],j,T,W,q,J,G,V)):$>0&&$&64&&X&&C.dynamicChildren&&C.dynamicChildren.length===X.length?(R(C.dynamicChildren,X,j,W,q,J,G),(D.key!=null||W&&D===W.subTree)&&ay(C,D,!0)):st(C,D,j,T,W,q,J,G,V)},S=(C,D,j,K,W,q,J,G,V)=>{D.slotScopeIds=G,C==null?D.shapeFlag&512?W.ctx.activate(D,j,K,J,V):wt(D,j,K,W,q,J,V):pt(C,D,V)},wt=(C,D,j,K,W,q,J)=>{const G=C.component=YT(C,K,W);if(q_(C)&&(G.ctx.renderer=zn),XT(G,!1,J),G.asyncDep){if(W&&W.registerDep(G,ht,J),!C.el){const V=G.subTree=Le(Bs);P(null,V,D,j),C.placeholder=V.el}}else ht(G,C,D,j,W,q,J)},pt=(C,D,j)=>{const K=D.component=C.component;if(PT(C,D,j))if(K.asyncDep&&!K.asyncResolved){it(K,D,j);return}else K.next=D,K.update();else D.el=C.el,K.vnode=D},ht=(C,D,j,K,W,q,J)=>{const G=()=>{if(C.isMounted){let{next:$,bu:X,u:et,parent:gt,vnode:Rt}=C;{const Ye=ly(C);if(Ye){$&&($.el=Rt.el,it(C,$,J)),Ye.asyncDep.then(()=>{C.isUnmounted||G()});return}}let Tt=$,Te;ai(C,!1),$?($.el=Rt.el,it(C,$,J)):$=Rt,X&&Qa(X),(Te=$.props&&$.props.onVnodeBeforeUpdate)&&An(Te,gt,$,Rt),ai(C,!0);const Ie=tp(C),Ge=C.subTree;C.subTree=Ie,b(Ge,Ie,d(Ge.el),wn(Ge),C,W,q),$.el=Ie.el,Tt===null&&kT(C,Ie.el),et&&Xe(et,W),(Te=$.props&&$.props.onVnodeUpdated)&&Xe(()=>An(Te,gt,$,Rt),W)}else{let $;const{el:X,props:et}=D,{bm:gt,m:Rt,parent:Tt,root:Te,type:Ie}=C,Ge=vo(D);ai(C,!1),gt&&Qa(gt),!Ge&&($=et&&et.onVnodeBeforeMount)&&An($,Tt,D),ai(C,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(Ie);const Ye=C.subTree=tp(C);b(null,Ye,j,K,C,W,q),D.el=Ye.el}if(Rt&&Xe(Rt,W),!Ge&&($=et&&et.onVnodeMounted)){const Ye=D;Xe(()=>An($,Tt,Ye),W)}(D.shapeFlag&256||Tt&&vo(Tt.vnode)&&Tt.vnode.shapeFlag&256)&&C.a&&Xe(C.a,W),C.isMounted=!0,D=j=K=null}};C.scope.on();const V=C.effect=new v_(G);C.scope.off();const _=C.update=V.run.bind(V),T=C.job=V.runIfDirty.bind(V);T.i=C,T.id=C.uid,V.scheduler=()=>Fh(T),ai(C,!0),_()},it=(C,D,j)=>{D.component=C;const K=C.vnode.props;C.vnode=D,C.next=null,MT(C,D.props,K,j),LT(C,D.children,j),ns(),Kf(C),ss()},st=(C,D,j,K,W,q,J,G,V=!1)=>{const _=C&&C.children,T=C?C.shapeFlag:0,$=D.children,{patchFlag:X,shapeFlag:et}=D;if(X>0){if(X&128){Me(_,$,j,K,W,q,J,G,V);return}else if(X&256){Ct(_,$,j,K,W,q,J,G,V);return}}et&8?(T&16&&le(_,W,q),$!==_&&h(j,$)):T&16?et&16?Me(_,$,j,K,W,q,J,G,V):le(_,W,q,!0):(T&8&&h(j,""),et&16&&v($,j,K,W,q,J,G,V))},Ct=(C,D,j,K,W,q,J,G,V)=>{C=C||Xi,D=D||Xi;const _=C.length,T=D.length,$=Math.min(_,T);let X;for(X=0;X<$;X++){const et=D[X]=V?ws(D[X]):Dn(D[X]);b(C[X],et,j,null,W,q,J,G,V)}_>T?le(C,W,q,!0,!1,$):v(D,j,K,W,q,J,G,V,$)},Me=(C,D,j,K,W,q,J,G,V)=>{let _=0;const T=D.length;let $=C.length-1,X=T-1;for(;_<=$&&_<=X;){const et=C[_],gt=D[_]=V?ws(D[_]):Dn(D[_]);if(qr(et,gt))b(et,gt,j,null,W,q,J,G,V);else break;_++}for(;_<=$&&_<=X;){const et=C[$],gt=D[X]=V?ws(D[X]):Dn(D[X]);if(qr(et,gt))b(et,gt,j,null,W,q,J,G,V);else break;$--,X--}if(_>$){if(_<=X){const et=X+1,gt=et<T?D[et].el:K;for(;_<=X;)b(null,D[_]=V?ws(D[_]):Dn(D[_]),j,gt,W,q,J,G,V),_++}}else if(_>X)for(;_<=$;)Wt(C[_],W,q,!0),_++;else{const et=_,gt=_,Rt=new Map;for(_=gt;_<=X;_++){const _e=D[_]=V?ws(D[_]):Dn(D[_]);_e.key!=null&&Rt.set(_e.key,_)}let Tt,Te=0;const Ie=X-gt+1;let Ge=!1,Ye=0;const fn=new Array(Ie);for(_=0;_<Ie;_++)fn[_]=0;for(_=et;_<=$;_++){const _e=C[_];if(Te>=Ie){Wt(_e,W,q,!0);continue}let de;if(_e.key!=null)de=Rt.get(_e.key);else for(Tt=gt;Tt<=X;Tt++)if(fn[Tt-gt]===0&&qr(_e,D[Tt])){de=Tt;break}de===void 0?Wt(_e,W,q,!0):(fn[de-gt]=_+1,de>=Ye?Ye=de:Ge=!0,b(_e,D[de],j,null,W,q,J,G,V),Te++)}const Li=Ge?jT(fn):Xi;for(Tt=Li.length-1,_=Ie-1;_>=0;_--){const _e=gt+_,de=D[_e],Pr=D[_e+1],ei=_e+1<T?Pr.el||cy(Pr):K;fn[_]===0?b(null,de,j,ei,W,q,J,G,V):Ge&&(Tt<0||_!==Li[Tt]?me(de,j,ei,2):Tt--)}}},me=(C,D,j,K,W=null)=>{const{el:q,type:J,transition:G,children:V,shapeFlag:_}=C;if(_&6){me(C.component.subTree,D,j,K);return}if(_&128){C.suspense.move(D,j,K);return}if(_&64){J.move(C,D,j,zn);return}if(J===se){s(q,D,j);for(let $=0;$<V.length;$++)me(V[$],D,j,K);s(C.anchor,D,j);return}if(J===nu){B(C,D,j);return}if(K!==2&&_&1&&G)if(K===0)G.beforeEnter(q),s(q,D,j),Xe(()=>G.enter(q),W);else{const{leave:$,delayLeave:X,afterLeave:et}=G,gt=()=>{C.ctx.isUnmounted?i(q):s(q,D,j)},Rt=()=>{q._isLeaving&&q[nT](!0),$(q,()=>{gt(),et&&et()})};X?X(q,gt,Rt):Rt()}else s(q,D,j)},Wt=(C,D,j,K=!1,W=!1)=>{const{type:q,props:J,ref:G,children:V,dynamicChildren:_,shapeFlag:T,patchFlag:$,dirs:X,cacheIndex:et}=C;if($===-2&&(W=!1),G!=null&&(ns(),yo(G,null,j,C,!0),ss()),et!=null&&(D.renderCache[et]=void 0),T&256){D.ctx.deactivate(C);return}const gt=T&1&&X,Rt=!vo(C);let Tt;if(Rt&&(Tt=J&&J.onVnodeBeforeUnmount)&&An(Tt,D,C),T&6)Ke(C.component,j,K);else{if(T&128){C.suspense.unmount(j,K);return}gt&&oi(C,null,D,"beforeUnmount"),T&64?C.type.remove(C,D,j,zn,K):_&&!_.hasOnce&&(q!==se||$>0&&$&64)?le(_,D,j,!1,!0):(q===se&&$&384||!W&&T&16)&&le(V,D,j),K&&qe(C)}(Rt&&(Tt=J&&J.onVnodeUnmounted)||gt)&&Xe(()=>{Tt&&An(Tt,D,C),gt&&oi(C,null,D,"unmounted")},j)},qe=C=>{const{type:D,el:j,anchor:K,transition:W}=C;if(D===se){Ee(j,K);return}if(D===nu){U(C);return}const q=()=>{i(j),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(C.shapeFlag&1&&W&&!W.persisted){const{leave:J,delayLeave:G}=W,V=()=>J(j,q);G?G(C.el,q,V):V()}else q()},Ee=(C,D)=>{let j;for(;C!==D;)j=p(C),i(C),C=j;i(D)},Ke=(C,D,j)=>{const{bum:K,scope:W,job:q,subTree:J,um:G,m:V,a:_}=C;sp(V),sp(_),K&&Qa(K),W.stop(),q&&(q.flags|=8,Wt(J,C,D,j)),G&&Xe(G,D),Xe(()=>{C.isUnmounted=!0},D)},le=(C,D,j,K=!1,W=!1,q=0)=>{for(let J=q;J<C.length;J++)Wt(C[J],D,j,K,W)},wn=C=>{if(C.shapeFlag&6)return wn(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const D=p(C.anchor||C.el),j=D&&D[tT];return j?p(j):D};let jn=!1;const ti=(C,D,j)=>{let K;C==null?D._vnode&&(Wt(D._vnode,null,null,!0),K=D._vnode.component):b(D._vnode||null,C,D,null,null,null,j),D._vnode=C,jn||(jn=!0,Kf(K),F_(),jn=!1)},zn={p:b,um:Wt,m:me,r:qe,mt:wt,mc:v,pc:st,pbc:R,n:wn,o:n};return{render:ti,hydrate:void 0,createApp:IT(ti)}}function eu({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ai({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function BT(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function ay(n,t,e=!1){const s=n.children,i=t.children;if(lt(s)&&lt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=ws(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&ay(o,a)),a.type===ac&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(n.type===se?1:0)),a.type===Bs&&!a.el&&(a.el=o.el)}}function jT(n){const t=n.slice(),e=[0];let s,i,r,o,a;const l=n.length;for(s=0;s<l;s++){const u=n[s];if(u!==0){if(i=e[e.length-1],n[i]<u){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<u?r=a+1:o=a;u<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function ly(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ly(t)}function sp(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}function cy(n){if(n.placeholder)return n.placeholder;const t=n.component;return t?cy(t.subTree):null}const uy=n=>n.__isSuspense;function zT(n,t){t&&t.pendingBranch?lt(n)?t.effects.push(...n):t.effects.push(n):YE(n)}const se=Symbol.for("v-fgt"),ac=Symbol.for("v-txt"),Bs=Symbol.for("v-cmt"),nu=Symbol.for("v-stc"),wo=[];let en=null;function at(n=!1){wo.push(en=n?null:[])}function HT(){wo.pop(),en=wo[wo.length-1]||null}let Oo=1;function yl(n,t=!1){Oo+=n,n<0&&en&&t&&(en.hasOnce=!0)}function hy(n){return n.dynamicChildren=Oo>0?en||Xi:null,HT(),Oo>0&&en&&en.push(n),n}function ct(n,t,e,s,i,r){return hy(M(n,t,e,s,i,r,!0))}function dy(n,t,e,s,i){return hy(Le(n,t,e,s,i,!0))}function vl(n){return n?n.__v_isVNode===!0:!1}function qr(n,t){return n.type===t.type&&n.key===t.key}const fy=({key:n})=>n??null,Ja=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Zt(n)||ke(n)||ft(n)?{i:tn,r:n,k:t,f:!!e}:n:null);function M(n,t=null,e=null,s=0,i=null,r=n===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&fy(t),ref:t&&Ja(t),scopeId:B_,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:tn};return a?($h(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=Zt(e)?8:16),Oo>0&&!o&&en&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&en.push(l),l}const Le=$T;function $T(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===G_)&&(n=Bs),vl(n)){const a=hr(n,t,!0);return e&&$h(a,e),Oo>0&&!r&&en&&(a.shapeFlag&6?en[en.indexOf(n)]=a:en.push(a)),a.patchFlag=-2,a}if(nI(n)&&(n=n.__vccOpts),t){t=WT(t);let{class:a,style:l}=t;a&&!Zt(a)&&(t.class=Es(a)),Ft(l)&&(Zo(l)&&!lt(l)&&(l=be({},l)),t.style=ee(l))}const o=Zt(n)?1:uy(n)?128:eT(n)?64:Ft(n)?4:ft(n)?2:0;return M(n,t,e,s,i,o,r,!0)}function WT(n){return n?Zo(n)||ey(n)?be({},n):n:null}function hr(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=n,u=t?qT(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&fy(u),ref:t&&t.ref?e&&r?lt(r)?r.concat(Ja(t)):[r,Ja(t)]:Ja(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==se?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&hr(n.ssContent),ssFallback:n.ssFallback&&hr(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&Uh(h,l.clone(h)),h}function Ue(n=" ",t=0){return Le(ac,null,n,t)}function te(n="",t=!1){return t?(at(),dy(Bs,null,n)):Le(Bs,null,n)}function Dn(n){return n==null||typeof n=="boolean"?Le(Bs):lt(n)?Le(se,null,n.slice()):vl(n)?ws(n):Le(ac,null,String(n))}function ws(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:hr(n)}function $h(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(lt(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),$h(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!ey(t)?t._ctx=tn:i===3&&tn&&(tn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:tn},e=32):(t=String(t),s&64?(e=16,t=[Ue(t)]):e=8);n.children=t,n.shapeFlag|=e}function qT(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Es([t.class,s.class]));else if(i==="style")t.style=ee([t.style,s.style]);else if(Ql(i)){const r=t[i],o=s[i];o&&r!==o&&!(lt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function An(n,t,e,s=null){Un(n,t,7,[e,s])}const KT=X_();let GT=0;function YT(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||KT,r={uid:GT++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sy(s,i),emitsOptions:J_(s,i),emit:null,emitted:null,propsDefaults:Nt,inheritAttrs:s.inheritAttrs,ctx:Nt,data:Nt,props:Nt,attrs:Nt,slots:Nt,refs:Nt,setupState:Nt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ST.bind(null,r),n.ce&&n.ce(r),r}let Pe=null;const QT=()=>Pe||tn;let bl,$u;{const n=ec(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};bl=t("__VUE_INSTANCE_SETTERS__",e=>Pe=e),$u=t("__VUE_SSR_SETTERS__",e=>Vo=e)}const ea=n=>{const t=Pe;return bl(n),n.scope.on(),()=>{n.scope.off(),bl(t)}},ip=()=>{Pe&&Pe.scope.off(),bl(null)};function py(n){return n.vnode.shapeFlag&4}let Vo=!1;function XT(n,t=!1,e=!1){t&&$u(t);const{props:s,children:i}=n.vnode,r=py(n);DT(n,s,r,t),NT(n,i,e||t);const o=r?JT(n,t):void 0;return t&&$u(!1),o}function JT(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,_T);const{setup:s}=e;if(s){ns();const i=n.setupContext=s.length>1?tI(n):null,r=ea(n),o=ta(s,n,0,[n.props,i]),a=d_(o);if(ss(),r(),(a||n.sp)&&!vo(n)&&W_(n),a){if(o.then(ip,ip),t)return o.then(l=>{rp(n,l)}).catch(l=>{ic(l,n,0)});n.asyncDep=o}else rp(n,o)}else gy(n)}function rp(n,t,e){ft(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ft(t)&&(n.setupState=V_(t)),gy(n)}function gy(n,t,e){const s=n.type;n.render||(n.render=s.render||Mn);{const i=ea(n);ns();try{yT(n)}finally{ss(),i()}}}const ZT={get(n,t){return Ce(n,"get",""),n[t]}};function tI(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,ZT),slots:n.slots,emit:n.emit,expose:t}}function lc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(V_(BE(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in bo)return bo[e](n)},has(t,e){return e in t||e in bo}})):n.proxy}function eI(n,t=!0){return ft(n)?n.displayName||n.name:n.name||t&&n.__name}function nI(n){return ft(n)&&"__vccOpts"in n}const qi=(n,t)=>$E(n,t,Vo);function Wu(n,t,e){try{yl(-1);const s=arguments.length;return s===2?Ft(t)&&!lt(t)?vl(t)?Le(n,null,[t]):Le(n,t):Le(n,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&vl(e)&&(e=[e]),Le(n,t,e))}finally{yl(1)}}const my="3.5.27";let qu;const op=typeof window<"u"&&window.trustedTypes;if(op)try{qu=op.createPolicy("vue",{createHTML:n=>n})}catch{}const _y=qu?n=>qu.createHTML(n):n=>n,sI="http://www.w3.org/2000/svg",iI="http://www.w3.org/1998/Math/MathML",Kn=typeof document<"u"?document:null,ap=Kn&&Kn.createElement("template"),rI={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?Kn.createElementNS(sI,n):t==="mathml"?Kn.createElementNS(iI,n):e?Kn.createElement(n,{is:e}):Kn.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Kn.createTextNode(n),createComment:n=>Kn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Kn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{ap.innerHTML=_y(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=ap.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},oI=Symbol("_vtc");function aI(n,t,e){const s=n[oI];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const lp=Symbol("_vod"),lI=Symbol("_vsh"),cI=Symbol(""),uI=/(?:^|;)\s*display\s*:/;function hI(n,t,e){const s=n.style,i=Zt(e);let r=!1;if(e&&!i){if(t)if(Zt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Za(s,a,"")}else for(const o in t)e[o]==null&&Za(s,o,"");for(const o in e)o==="display"&&(r=!0),Za(s,o,e[o])}else if(i){if(t!==e){const o=s[cI];o&&(e+=";"+o),s.cssText=e,r=uI.test(e)}}else t&&n.removeAttribute("style");lp in n&&(n[lp]=r?s.display:"",n[lI]&&(s.display="none"))}const cp=/\s*!important$/;function Za(n,t,e){if(lt(e))e.forEach(s=>Za(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=dI(n,t);cp.test(e)?n.setProperty(Di(s),e.replace(cp,""),"important"):n[s]=e}}const up=["Webkit","Moz","ms"],su={};function dI(n,t){const e=su[t];if(e)return e;let s=un(t);if(s!=="filter"&&s in n)return su[t]=s;s=Zl(s);for(let i=0;i<up.length;i++){const r=up[i]+s;if(r in n)return su[t]=r}return t}const hp="http://www.w3.org/1999/xlink";function dp(n,t,e,s,i,r=mE(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(hp,t.slice(6,t.length)):n.setAttributeNS(hp,t,e):e==null||r&&!m_(e)?n.removeAttribute(t):n.setAttribute(t,r?"":Fn(e)?String(e):e)}function fp(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?_y(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=m_(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function pi(n,t,e,s){n.addEventListener(t,e,s)}function fI(n,t,e,s){n.removeEventListener(t,e,s)}const pp=Symbol("_vei");function pI(n,t,e,s,i=null){const r=n[pp]||(n[pp]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=gI(t);if(s){const u=r[t]=yI(s,i);pi(n,a,u,l)}else o&&(fI(n,a,o,l),r[t]=void 0)}}const gp=/(?:Once|Passive|Capture)$/;function gI(n){let t;if(gp.test(n)){t={};let s;for(;s=n.match(gp);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Di(n.slice(2)),t]}let iu=0;const mI=Promise.resolve(),_I=()=>iu||(mI.then(()=>iu=0),iu=Date.now());function yI(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Un(vI(s,e.value),t,5,[s])};return e.value=n,e.attached=_I(),e}function vI(n,t){if(lt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const mp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,bI=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?aI(n,s,o):t==="style"?hI(n,e,s):Ql(t)?xh(t)||pI(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wI(n,t,s,o))?(fp(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&dp(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!Zt(s))?fp(n,un(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),dp(n,t,s,o))};function wI(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&mp(t)&&ft(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&n.tagName==="IFRAME"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return mp(t)&&Zt(e)?!1:t in n}const wl=n=>{const t=n.props["onUpdate:modelValue"]||!1;return lt(t)?e=>Qa(t,e):t};function EI(n){n.target.composing=!0}function _p(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const er=Symbol("_assign");function yp(n,t,e){return t&&(n=n.trim()),e&&(n=tc(n)),n}const Pt={created(n,{modifiers:{lazy:t,trim:e,number:s}},i){n[er]=wl(i);const r=s||i.props&&i.props.type==="number";pi(n,t?"change":"input",o=>{o.target.composing||n[er](yp(n.value,e,r))}),(e||r)&&pi(n,"change",()=>{n.value=yp(n.value,e,r)}),t||(pi(n,"compositionstart",EI),pi(n,"compositionend",_p),pi(n,"change",_p))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:i,number:r}},o){if(n[er]=wl(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?tc(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||i&&n.value.trim()===l)||(n.value=l))}},Ra={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const i=Xl(t);pi(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>e?tc(El(o)):El(o));n[er](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,Lh(()=>{n._assigning=!1})}),n[er]=wl(s)},mounted(n,{value:t}){vp(n,t)},beforeUpdate(n,t,e){n[er]=wl(e)},updated(n,{value:t}){n._assigning||vp(n,t)}};function vp(n,t){const e=n.multiple,s=lt(t);if(!(e&&!s&&!Xl(t))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],a=El(o);if(e)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=yE(t,a)>-1}else o.selected=t.has(a);else if(nc(El(o),t)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function El(n){return"_value"in n?n._value:n.value}const TI=be({patchProp:bI},rI);let bp;function II(){return bp||(bp=FT(TI))}const AI=((...n)=>{const t=II().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=xI(s);if(!i)return;const r=t._component;!ft(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,SI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function SI(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function xI(n){return Zt(n)?document.querySelector(n):n}const CI=()=>{};var wp={};const yy=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},RI=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const i=n[e++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[e++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[e++],o=n[e++],a=n[e++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=n[e++],o=n[e++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},vy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(e[h],e[d],e[p],e[m])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(yy(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):RI(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=e[n.charAt(i++)],a=i<n.length?e[n.charAt(i)]:0;++i;const u=i<n.length?e[n.charAt(i)]:64;++i;const d=i<n.length?e[n.charAt(i)]:64;if(++i,r==null||a==null||u==null||d==null)throw new PI;const p=r<<2|a>>4;if(s.push(p),u!==64){const m=a<<4&240|u>>2;if(s.push(m),d!==64){const w=u<<6&192|d;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kI=function(n){const t=yy(n);return vy.encodeByteArray(t,!0)},Tl=function(n){return kI(n).replace(/\./g,"")},by=function(n){try{return vy.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function DI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const MI=()=>DI().__FIREBASE_DEFAULTS__,OI=()=>{if(typeof process>"u"||typeof wp>"u")return;const n=wp.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&by(n[1]);return t&&JSON.parse(t)},cc=()=>{try{return CI()||MI()||OI()||VI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wy=n=>cc()?.emulatorHosts?.[n],NI=n=>{const t=wy(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},Ey=()=>cc()?.config,Ty=n=>cc()?.[`_${n}`];class LI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}function vr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Iy(n){return(await fetch(n,{credentials:"include"})).ok}function FI(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Tl(JSON.stringify(e)),Tl(JSON.stringify(o)),""].join(".")}const Eo={};function UI(){const n={prod:[],emulator:[]};for(const t of Object.keys(Eo))Eo[t]?n.emulator.push(t):n.prod.push(t);return n}function BI(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Ep=!1;function Ay(n,t){if(typeof window>"u"||typeof document>"u"||!vr(window.location.host)||Eo[n]===t||Eo[n]||Ep)return;Eo[n]=t;function e(p){return`__firebase__banner__${p}`}const s="__firebase__banner",r=UI().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Ep=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=BI(s),m=e("text"),w=document.getElementById(m)||document.createElement("span"),b=e("learnmore"),A=document.getElementById(b)||document.createElement("a"),P=e("preprendIcon"),N=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const B=p.element;a(B),h(A,b);const U=u();l(N,P),B.append(N,w,A,U),document.body.appendChild(B)}r?(w.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function zI(){const n=cc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $I(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qI(){const n=De();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KI(){return!zI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function YI(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}})}const QI="FirebaseError";class us extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=QI,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?XI(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new us(i,a,s)}}function XI(n,t){return n.replace(JI,(e,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const JI=/\{\$([^}]+)}/g;function ZI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ei(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const i of e){if(!s.includes(i))return!1;const r=n[i],o=t[i];if(Tp(r)&&Tp(o)){if(!Ei(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!e.includes(i))return!1;return!0}function Tp(n){return n!==null&&typeof n=="object"}function sa(n){const t=[];for(const[e,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function io(n){const t={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function ro(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function t0(n,t){const e=new e0(n,t);return e.subscribe.bind(e)}class e0{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,s){let i;if(t===void 0&&e===void 0&&s===void 0)throw new Error("Missing Observer.");n0(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:s},i.next===void 0&&(i.next=ru),i.error===void 0&&(i.error=ru),i.complete===void 0&&(i.complete=ru);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n0(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ru(){}function ae(n){return n&&n._delegate?n._delegate:n}class Ti{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const di="[DEFAULT]";class s0{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new LI;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r0(t))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=di){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=di){return this.instances.has(t)}getOptions(t=di){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,e){const s=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const i of s)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:i0(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=di){return this.component?this.component.multipleInstances?t:di:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i0(n){return n===di?void 0:n}function r0(n){return n.instantiationMode==="EAGER"}class o0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new s0(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var _t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_t||(_t={}));const a0={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},l0=_t.INFO,c0={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},u0=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),i=c0[t];if(i)console[i](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wh{constructor(t){this.name=t,this._logLevel=l0,this._logHandler=u0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?a0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...t),this._logHandler(this,_t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...t),this._logHandler(this,_t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...t),this._logHandler(this,_t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...t),this._logHandler(this,_t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...t),this._logHandler(this,_t.ERROR,...t)}}const h0=(n,t)=>t.some(e=>n instanceof e);let Ip,Ap;function d0(){return Ip||(Ip=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f0(){return Ap||(Ap=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sy=new WeakMap,Ku=new WeakMap,xy=new WeakMap,ou=new WeakMap,qh=new WeakMap;function p0(n){const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(Ds(n.result)),i()},o=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Sy.set(e,n)}).catch(()=>{}),qh.set(t,n),t}function g0(n){if(Ku.has(n))return;const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});Ku.set(n,t)}let Gu={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Ku.get(n);if(t==="objectStoreNames")return n.objectStoreNames||xy.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ds(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function m0(n){Gu=n(Gu)}function _0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(au(this),t,...e);return xy.set(s,t.sort?t.sort():[t]),Ds(s)}:f0().includes(n)?function(...t){return n.apply(au(this),t),Ds(Sy.get(this))}:function(...t){return Ds(n.apply(au(this),t))}}function y0(n){return typeof n=="function"?_0(n):(n instanceof IDBTransaction&&g0(n),h0(n,d0())?new Proxy(n,Gu):n)}function Ds(n){if(n instanceof IDBRequest)return p0(n);if(ou.has(n))return ou.get(n);const t=y0(n);return t!==n&&(ou.set(n,t),qh.set(t,n)),t}const au=n=>qh.get(n);function v0(n,t,{blocked:e,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(n,t),a=Ds(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ds(o.result),l.oldVersion,l.newVersion,Ds(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const b0=["get","getKey","getAll","getAllKeys","count"],w0=["put","add","delete","clear"],lu=new Map;function Sp(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(lu.get(t))return lu.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,i=w0.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(i||b0.includes(e)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[e](...a),i&&l.done]))[0]};return lu.set(t,r),r}m0(n=>({...n,get:(t,e,s)=>Sp(t,e)||n.get(t,e,s),has:(t,e)=>!!Sp(t,e)||n.has(t,e)}));class E0{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(T0(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function T0(n){return n.getComponent()?.type==="VERSION"}const Yu="@firebase/app",xp="0.14.8";const rs=new Wh("@firebase/app"),I0="@firebase/app-compat",A0="@firebase/analytics-compat",S0="@firebase/analytics",x0="@firebase/app-check-compat",C0="@firebase/app-check",R0="@firebase/auth",P0="@firebase/auth-compat",k0="@firebase/database",D0="@firebase/data-connect",M0="@firebase/database-compat",O0="@firebase/functions",V0="@firebase/functions-compat",N0="@firebase/installations",L0="@firebase/installations-compat",F0="@firebase/messaging",U0="@firebase/messaging-compat",B0="@firebase/performance",j0="@firebase/performance-compat",z0="@firebase/remote-config",H0="@firebase/remote-config-compat",$0="@firebase/storage",W0="@firebase/storage-compat",q0="@firebase/firestore",K0="@firebase/ai",G0="@firebase/firestore-compat",Y0="firebase",Q0="12.9.0";const Qu="[DEFAULT]",X0={[Yu]:"fire-core",[I0]:"fire-core-compat",[S0]:"fire-analytics",[A0]:"fire-analytics-compat",[C0]:"fire-app-check",[x0]:"fire-app-check-compat",[R0]:"fire-auth",[P0]:"fire-auth-compat",[k0]:"fire-rtdb",[D0]:"fire-data-connect",[M0]:"fire-rtdb-compat",[O0]:"fire-fn",[V0]:"fire-fn-compat",[N0]:"fire-iid",[L0]:"fire-iid-compat",[F0]:"fire-fcm",[U0]:"fire-fcm-compat",[B0]:"fire-perf",[j0]:"fire-perf-compat",[z0]:"fire-rc",[H0]:"fire-rc-compat",[$0]:"fire-gcs",[W0]:"fire-gcs-compat",[q0]:"fire-fst",[G0]:"fire-fst-compat",[K0]:"fire-vertex","fire-js":"fire-js",[Y0]:"fire-js-all"};const Il=new Map,J0=new Map,Xu=new Map;function Cp(n,t){try{n.container.addComponent(t)}catch(e){rs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function dr(n){const t=n.name;if(Xu.has(t))return rs.debug(`There were multiple attempts to register component ${t}.`),!1;Xu.set(t,n);for(const e of Il.values())Cp(e,n);for(const e of J0.values())Cp(e,n);return!0}function Kh(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ze(n){return n==null?!1:n.settings!==void 0}const Z0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new na("app","Firebase",Z0);class tA{constructor(t,e,s){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}const br=Q0;function Cy(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s={name:Qu,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw Ms.create("bad-app-name",{appName:String(i)});if(e||(e=Ey()),!e)throw Ms.create("no-options");const r=Il.get(i);if(r){if(Ei(e,r.options)&&Ei(s,r.config))return r;throw Ms.create("duplicate-app",{appName:i})}const o=new o0(i);for(const l of Xu.values())o.addComponent(l);const a=new tA(e,s,o);return Il.set(i,a),a}function Ry(n=Qu){const t=Il.get(n);if(!t&&n===Qu&&Ey())return Cy();if(!t)throw Ms.create("no-app",{appName:n});return t}function Os(n,t,e){let s=X0[n]??n;e&&(s+=`-${e}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),rs.warn(o.join(" "));return}dr(new Ti(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const eA="firebase-heartbeat-database",nA=1,No="firebase-heartbeat-store";let cu=null;function Py(){return cu||(cu=v0(eA,nA,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(No)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ms.create("idb-open",{originalErrorMessage:n.message})})),cu}async function sA(n){try{const e=(await Py()).transaction(No),s=await e.objectStore(No).get(ky(n));return await e.done,s}catch(t){if(t instanceof us)rs.warn(t.message);else{const e=Ms.create("idb-get",{originalErrorMessage:t?.message});rs.warn(e.message)}}}async function Rp(n,t){try{const s=(await Py()).transaction(No,"readwrite");await s.objectStore(No).put(t,ky(n)),await s.done}catch(e){if(e instanceof us)rs.warn(e.message);else{const s=Ms.create("idb-set",{originalErrorMessage:e?.message});rs.warn(s.message)}}}function ky(n){return`${n.name}!${n.options.appId}`}const iA=1024,rA=30;class oA{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lA(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:e}),this._heartbeatsCache.heartbeats.length>rA){const i=cA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){rs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pp(),{heartbeatsToSend:e,unsentEntries:s}=aA(this._heartbeatsCache.heartbeats),i=Tl(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return rs.warn(t),""}}}function Pp(){return new Date().toISOString().substring(0,10)}function aA(n,t=iA){const e=[];let s=n.slice();for(const i of n){const r=e.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),kp(e)>t){r.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),kp(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class lA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?YI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await sA(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rp(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rp(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function kp(n){return Tl(JSON.stringify({version:2,heartbeats:n})).length}function cA(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}function uA(n){dr(new Ti("platform-logger",t=>new E0(t),"PRIVATE")),dr(new Ti("heartbeat",t=>new oA(t),"PRIVATE")),Os(Yu,xp,n),Os(Yu,xp,"esm2020"),Os("fire-js","")}uA("");function Dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hA=Dy,My=new na("auth","Firebase",Dy());const Al=new Wh("@firebase/auth");function dA(n,...t){Al.logLevel<=_t.WARN&&Al.warn(`Auth (${br}): ${n}`,...t)}function tl(n,...t){Al.logLevel<=_t.ERROR&&Al.error(`Auth (${br}): ${n}`,...t)}function hn(n,...t){throw Yh(n,...t)}function mn(n,...t){return Yh(n,...t)}function Gh(n,t,e){const s={...hA(),[t]:e};return new na("auth","Firebase",s).create(t,{appName:n.name})}function es(n){return Gh(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fA(n,t,e){const s=e;if(!(t instanceof s))throw s.name!==t.constructor.name&&hn(n,"argument-error"),Gh(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yh(n,...t){if(typeof n!="string"){const e=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(e,...s)}return My.create(n,...t)}function rt(n,t,...e){if(!n)throw Yh(t,...e)}function Jn(n){const t="INTERNAL ASSERTION FAILED: "+n;throw tl(t),new Error(t)}function os(n,t){n||Jn(t)}function Ju(){return typeof self<"u"&&self.location?.href||""}function pA(){return Dp()==="http:"||Dp()==="https:"}function Dp(){return typeof self<"u"&&self.location?.protocol||null}function gA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pA()||$I()||"connection"in navigator)?navigator.onLine:!0}function mA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ia{constructor(t,e){this.shortDelay=t,this.longDelay=e,os(e>t,"Short delay should be less than long delay!"),this.isMobile=jI()||WI()}get(){return gA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qh(n,t){os(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class Oy{static initialize(t,e,s){this.fetchImpl=t,e&&(this.headersImpl=e),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vA=new ia(3e4,6e4);function Ys(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Qs(n,t,e,s,i={}){return Vy(n,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=sa({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:t,headers:l,...r};return HI()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&vr(n.emulatorConfig.host)&&(u.credentials="include"),Oy.fetch()(await Ny(n,n.config.apiHost,e,a),u)})}async function Vy(n,t,e){n._canInitEmulator=!1;const s={..._A,...t};try{const i=new wA(n),r=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Pa(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pa(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pa(n,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Gh(n,h,u);hn(n,h)}}catch(i){if(i instanceof us)throw i;hn(n,"network-request-failed",{message:String(i)})}}async function ra(n,t,e,s,i={}){const r=await Qs(n,t,e,s,i);return"mfaPendingCredential"in r&&hn(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function Ny(n,t,e,s){const i=`${t}${e}?${s}`,r=n,o=r.config.emulator?Qh(n.config,i):`${n.config.apiScheme}://${i}`;return yA.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function bA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,s)=>{this.timer=setTimeout(()=>s(mn(this.auth,"network-request-failed")),vA.get())})}}function Pa(n,t,e){const s={appName:n.name};e.email&&(s.email=e.email),e.phoneNumber&&(s.phoneNumber=e.phoneNumber);const i=mn(n,t,s);return i.customData._tokenResponse=e,i}function Mp(n){return n!==void 0&&n.enterprise!==void 0}class EA{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return bA(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TA(n,t){return Qs(n,"GET","/v2/recaptchaConfig",Ys(n,t))}async function IA(n,t){return Qs(n,"POST","/v1/accounts:delete",t)}async function Sl(n,t){return Qs(n,"POST","/v1/accounts:lookup",t)}function To(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function AA(n,t=!1){const e=ae(n),s=await e.getIdToken(t),i=Xh(s);rt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:To(uu(i.auth_time)),issuedAtTime:To(uu(i.iat)),expirationTime:To(uu(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function uu(n){return Number(n)*1e3}function Xh(n){const[t,e,s]=n.split(".");if(t===void 0||e===void 0||s===void 0)return tl("JWT malformed, contained fewer than 3 sections"),null;try{const i=by(e);return i?JSON.parse(i):(tl("Failed to decode base64 JWT payload"),null)}catch(i){return tl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Op(n){const t=Xh(n);return rt(t,"internal-error"),rt(typeof t.exp<"u","internal-error"),rt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Lo(n,t,e=!1){if(e)return t;try{return await t}catch(s){throw s instanceof us&&SA(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function SA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class xA{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zu{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=To(this.lastLoginAt),this.creationTime=To(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xl(n){const t=n.auth,e=await n.getIdToken(),s=await Lo(n,Sl(t,{idToken:e}));rt(s?.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const r=i.providerUserInfo?.length?Ly(i.providerUserInfo):[],o=RA(n.providerData,r),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!o?.length,u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Zu(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function CA(n){const t=ae(n);await xl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function RA(n,t){return[...n.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function Ly(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function PA(n,t){const e=await Vy(n,{},async()=>{const s=sa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=n.config,o=await Ny(n,i,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&vr(n.emulatorConfig.host)&&(l.credentials="include"),Oy.fetch()(o,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function kA(n,t){return Qs(n,"POST","/v2/accounts:revokeToken",Ys(n,t))}class nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rt(t.idToken,"internal-error"),rt(typeof t.idToken<"u","internal-error"),rt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Op(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){rt(t.length!==0,"internal-error");const e=Op(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:s,refreshToken:i,expiresIn:r}=await PA(t,e);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,e,s){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,e){const{refreshToken:s,accessToken:i,expirationTime:r}=e,o=new nr;return s&&(rt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(rt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(rt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new nr,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function _s(n,t){rt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class pn{constructor({uid:t,auth:e,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new xA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Lo(this,this.stsTokenManager.getToken(this.auth,t));return rt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return AA(this,t)}reload(){return CA(this)}_assign(t){this!==t&&(rt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new pn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),e&&await xl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await Lo(this,IA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const s=e.displayName??void 0,i=e.email??void 0,r=e.phoneNumber??void 0,o=e.photoURL??void 0,a=e.tenantId??void 0,l=e._redirectEventId??void 0,u=e.createdAt??void 0,h=e.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:b}=e;rt(d&&b,t,"internal-error");const A=nr.fromJSON(this.name,b);rt(typeof d=="string",t,"internal-error"),_s(s,t.name),_s(i,t.name),rt(typeof p=="boolean",t,"internal-error"),rt(typeof m=="boolean",t,"internal-error"),_s(r,t.name),_s(o,t.name),_s(a,t.name),_s(l,t.name),_s(u,t.name),_s(h,t.name);const P=new pn({uid:d,auth:t,email:i,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:A,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(P.providerData=w.map(N=>({...N}))),l&&(P._redirectEventId=l),P}static async _fromIdTokenResponse(t,e,s=!1){const i=new nr;i.updateFromServerResponse(e);const r=new pn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await xl(r),r}static async _fromGetAccountInfoResponse(t,e,s){const i=e.users[0];rt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?Ly(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new nr;a.updateFromIdToken(s);const l=new pn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Zu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,u),l}}const Vp=new Map;function Zn(n){os(n instanceof Function,"Expected a class definition");let t=Vp.get(n);return t?(os(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Vp.set(n,t),t)}class Fy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Fy.type="NONE";const Np=Fy;function el(n,t,e){return`firebase:${n}:${t}:${e}`}class sr{constructor(t,e,s){this.persistence=t,this.auth=e,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=el(this.userKey,i.apiKey,r),this.fullPersistenceKey=el("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Sl(this.auth,{idToken:t}).catch(()=>{});return e?pn._fromGetAccountInfoResponse(this.auth,e,t):null}return pn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,s="authUser"){if(!e.length)return new sr(Zn(Np),t,s);const i=(await Promise.all(e.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||Zn(Np);const o=el(s,t.config.apiKey,t.name);let a=null;for(const u of e)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await Sl(t,{idToken:h}).catch(()=>{});if(!p)break;d=await pn._fromGetAccountInfoResponse(t,p,h)}else d=pn._fromJSON(t,h);u!==r&&(a=d),r=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new sr(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(e.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new sr(r,t,s))}}function Lp(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zy(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Uy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($y(t))return"Blackberry";if(Wy(t))return"Webos";if(By(t))return"Safari";if((t.includes("chrome/")||jy(t))&&!t.includes("edge/"))return"Chrome";if(Hy(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(e);if(s?.length===2)return s[1]}return"Other"}function Uy(n=De()){return/firefox\//i.test(n)}function By(n=De()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jy(n=De()){return/crios\//i.test(n)}function zy(n=De()){return/iemobile/i.test(n)}function Hy(n=De()){return/android/i.test(n)}function $y(n=De()){return/blackberry/i.test(n)}function Wy(n=De()){return/webos/i.test(n)}function Jh(n=De()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DA(n=De()){return Jh(n)&&!!window.navigator?.standalone}function MA(){return qI()&&document.documentMode===10}function qy(n=De()){return Jh(n)||Hy(n)||Wy(n)||$y(n)||/windows phone/i.test(n)||zy(n)}function Ky(n,t=[]){let e;switch(n){case"Browser":e=Lp(De());break;case"Worker":e=`${Lp(De())}-${n}`;break;default:e=n}const s=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${br}/${s}`}class OA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=e,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const s of this.queue)await s(t),s.onAbort&&e.push(s.onAbort)}catch(s){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function VA(n,t={}){return Qs(n,"GET","/v2/passwordPolicy",Ys(n,t))}const NA=6;class LA{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??NA,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(e.meetsMinPasswordLength=t.length>=s),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,e,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class FA{constructor(t,e,s,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fp(this),this.idTokenSubscription=new Fp(this),this.beforeStateQueue=new OA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=My,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Zn(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sr.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Sl(this,{idToken:t}),s=await pn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ze(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let s=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await xl(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=mA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ze(this.app))return Promise.reject(es(this));const e=t?ae(t):null;return e&&rt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&rt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ze(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await VA(this),e=new LA(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new na("auth","Firebase",t())}onAuthStateChanged(t,e,s){return this.registerStateListener(this.authStateSubscription,t,e,s)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,s){return this.registerStateListener(this.idTokenSubscription,t,e,s)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(s.tenantId=this.tenantId),await kA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const s=await this.getOrInitRedirectPersistenceManager(e);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Zn(t)||this._popupRedirectResolver;rt(e,this,"argument-error"),this.redirectPersistenceManager=await sr.create(this,[Zn(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,s,i){if(this._deleted)return()=>{};const r=typeof e=="function"?e:e.next.bind(e);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(e);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ky(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&dA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Xs(n){return ae(n)}class Fp{constructor(t){this.auth=t,this.observer=null,this.addObserver=t0(e=>this.observer=e)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let uc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UA(n){uc=n}function Gy(n){return uc.loadJS(n)}function BA(){return uc.recaptchaEnterpriseScript}function jA(){return uc.gapiScript}function zA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HA{constructor(){this.enterprise=new $A}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class $A{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const WA="recaptcha-enterprise",Yy="NO_RECAPTCHA";class qA{constructor(t){this.type=WA,this.auth=Xs(t)}async verify(t="verify",e=!1){async function s(r){if(!e){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{TA(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new EA(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;Mp(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(Yy)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HA().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!e&&Mp(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BA();l.length!==0&&(l+=a),Gy(l).then(()=>{i(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Up(n,t,e,s=!1,i=!1){const r=new qA(n);let o;if(i)o=Yy;else try{o=await r.verify(e)}catch{o=await r.verify(e,!0)}const a={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function th(n,t,e,s,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Up(n,t,e,e==="getOobCode");return s(n,r)}else return s(n,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Up(n,t,e,e==="getOobCode");return s(n,o)}else return Promise.reject(r)})}function KA(n,t){const e=Kh(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),r=e.getOptions();if(Ei(r,t??{}))return i;hn(i,"already-initialized")}return e.initialize({options:t})}function GA(n,t){const e=t?.persistence||[],s=(Array.isArray(e)?e:[e]).map(Zn);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(s,t?.popupRedirectResolver)}function YA(n,t,e){const s=Xs(n);rt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=Qy(t),{host:o,port:a}=QA(t),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){rt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),rt(Ei(u,s.config.emulator)&&Ei(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,vr(o)?(Iy(`${r}//${o}${l}`),Ay("Auth",!0)):XA()}function Qy(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function QA(n){const t=Qy(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const s=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Bp(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Bp(o)}}}function Bp(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function XA(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Zh{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,e){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}async function JA(n,t){return Qs(n,"POST","/v1/accounts:signUp",t)}async function ZA(n,t){return ra(n,"POST","/v1/accounts:signInWithPassword",Ys(n,t))}async function tS(n,t){return ra(n,"POST","/v1/accounts:signInWithEmailLink",Ys(n,t))}async function eS(n,t){return ra(n,"POST","/v1/accounts:signInWithEmailLink",Ys(n,t))}class Fo extends Zh{constructor(t,e,s,i=null){super("password",s),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Fo(t,e,"password")}static _fromEmailAndCode(t,e,s=null){return new Fo(t,e,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(t,e,"signInWithPassword",ZA);case"emailLink":return tS(t,{email:this._email,oobCode:this._password});default:hn(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const s={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(t,s,"signUpPassword",JA);case"emailLink":return eS(t,{idToken:e,email:this._email,oobCode:this._password});default:hn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ir(n,t){return ra(n,"POST","/v1/accounts:signInWithIdp",Ys(n,t))}const nS="http://localhost";class Ii extends Zh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ii(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):hn("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=e;if(!s||!i)return null;const o=new Ii(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return ir(t,e)}_linkToIdToken(t,e){const s=this.buildRequest();return s.idToken=e,ir(t,s)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ir(t,e)}buildRequest(){const t={requestUri:nS,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=sa(e)}return t}}function sS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iS(n){const t=io(ro(n)).link,e=t?io(ro(t)).deep_link_id:null,s=io(ro(n)).deep_link_id;return(s?io(ro(s)).link:null)||s||e||t||n}class td{constructor(t){const e=io(ro(t)),s=e.apiKey??null,i=e.oobCode??null,r=sS(e.mode??null);rt(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=iS(t);try{return new td(e)}catch{return null}}}class wr{constructor(){this.providerId=wr.PROVIDER_ID}static credential(t,e){return Fo._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const s=td.parseLink(e);return rt(s,"argument-error"),Fo._fromEmailAndCode(t,s.code,s.tenantId)}}wr.PROVIDER_ID="password";wr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ed{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class oa extends ed{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ts extends oa{constructor(){super("facebook.com")}static credential(t){return Ii._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ts.credentialFromTaggedObject(t)}static credentialFromError(t){return Ts.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ts.credential(t.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";class Xn extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ii._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Xn.credentialFromTaggedObject(t)}static credentialFromError(t){return Xn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:s}=t;if(!e&&!s)return null;try{return Xn.credential(e,s)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";class Is extends oa{constructor(){super("github.com")}static credential(t){return Ii._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";class As extends oa{constructor(){super("twitter.com")}static credential(t,e){return Ii._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return As.credentialFromTaggedObject(t)}static credentialFromError(t){return As.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:s}=t;if(!e||!s)return null;try{return As.credential(e,s)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";async function rS(n,t){return ra(n,"POST","/v1/accounts:signUp",Ys(n,t))}class Ai{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,s,i=!1){const r=await pn._fromIdTokenResponse(t,s,i),o=jp(s);return new Ai({user:r,providerId:o,_tokenResponse:s,operationType:e})}static async _forOperation(t,e,s){await t._updateTokensIfNecessary(s,!0);const i=jp(s);return new Ai({user:t,providerId:i,_tokenResponse:s,operationType:e})}}function jp(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Cl extends us{constructor(t,e,s,i){super(e.code,e.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Cl.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,e,s,i){return new Cl(t,e,s,i)}}function Xy(n,t,e,s){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Cl._fromErrorAndOperation(n,r,t,s):r})}async function oS(n,t,e=!1){const s=await Lo(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ai._forOperation(n,"link",s)}async function aS(n,t,e=!1){const{auth:s}=n;if(Ze(s.app))return Promise.reject(es(s));const i="reauthenticate";try{const r=await Lo(n,Xy(s,i,t,n),e);rt(r.idToken,s,"internal-error");const o=Xh(r.idToken);rt(o,s,"internal-error");const{sub:a}=o;return rt(n.uid===a,s,"user-mismatch"),Ai._forOperation(n,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&hn(s,"user-mismatch"),r}}async function Jy(n,t,e=!1){if(Ze(n.app))return Promise.reject(es(n));const s="signIn",i=await Xy(n,s,t),r=await Ai._fromIdTokenResponse(n,s,i);return e||await n._updateCurrentUser(r.user),r}async function lS(n,t){return Jy(Xs(n),t)}async function Zy(n){const t=Xs(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zp(n,t,e){if(Ze(n.app))return Promise.reject(es(n));const s=Xs(n),o=await th(s,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Zy(n),l}),a=await Ai._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function cS(n,t,e){return Ze(n.app)?Promise.reject(es(n)):lS(ae(n),wr.credential(t,e)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Zy(n),s})}function Hp(n,t){return ae(n).setPersistence(t)}function uS(n,t,e,s){return ae(n).onIdTokenChanged(t,e,s)}function hS(n,t,e){return ae(n).beforeAuthStateChanged(t,e)}function dS(n,t,e,s){return ae(n).onAuthStateChanged(t,e,s)}function Kr(n){return ae(n).signOut()}const Rl="__sak";class tv{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Rl,"1"),this.storage.removeItem(Rl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const fS=1e3,pS=10;class ev extends tv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qy(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const s=this.storage.getItem(e),i=this.localCache[e];s!==i&&t(e,i,s)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!e&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);MA()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,pS):i()}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:s}),!0)})},fS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}ev.type="LOCAL";const eh=ev;class nv extends tv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}nv.type="SESSION";const sv=nv;function gS(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class hc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const s=new hc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:s,eventType:i,data:r}=e.data,o=this.handlersMap[i];if(!o?.size)return;e.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async u=>u(e.origin,r)),l=await gS(a);e.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hc.receivers=[];function nd(n="",t=10){let e="";for(let s=0;s<t;s++)e+=Math.floor(Math.random()*10);return n+e}class mS{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=nd("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function On(){return window}function _S(n){On().location.href=n}function iv(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function yS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){return navigator?.serviceWorker?.controller||null}function bS(){return iv()?self:null}const rv="firebaseLocalStorageDb",wS=1,Pl="firebaseLocalStorage",ov="fbase_key";class aa{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function dc(n,t){return n.transaction([Pl],t?"readwrite":"readonly").objectStore(Pl)}function ES(){const n=indexedDB.deleteDatabase(rv);return new aa(n).toPromise()}function nh(){const n=indexedDB.open(rv,wS);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Pl,{keyPath:ov})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Pl)?t(s):(s.close(),await ES(),t(await nh()))})})}async function $p(n,t,e){const s=dc(n,!0).put({[ov]:t,value:e});return new aa(s).toPromise()}async function TS(n,t){const e=dc(n,!1).get(t),s=await new aa(e).toPromise();return s===void 0?null:s.value}function Wp(n,t){const e=dc(n,!0).delete(t);return new aa(e).toPromise()}const IS=800,AS=3;class av{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nh(),this.db)}async _withRetries(t){let e=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(e++>AS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hc._getInstance(bS()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new mS(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nh();return await $p(t,Rl,"1"),await Wp(t,Rl),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(s=>$p(s,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(s=>TS(s,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Wp(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=dc(i,!1).getAll();return new aa(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}av.type="LOCAL";const SS=av;new ia(3e4,6e4);function lv(n,t){return t?Zn(t):(rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class sd extends Zh{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ir(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ir(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ir(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function xS(n){return Jy(n.auth,new sd(n),n.bypassAuthState)}function CS(n){const{auth:t,user:e}=n;return rt(e,t,"internal-error"),aS(e,new sd(n),n.bypassAuthState)}async function RS(n){const{auth:t,user:e}=n;return rt(e,t,"internal-error"),oS(e,new sd(n),n.bypassAuthState)}class cv{constructor(t,e,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:e,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xS;case"linkViaPopup":case"linkViaRedirect":return RS;case"reauthViaPopup":case"reauthViaRedirect":return CS;default:hn(this.auth,"internal-error")}}resolve(t){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PS=new ia(2e3,1e4);async function kS(n,t,e){if(Ze(n.app))return Promise.reject(mn(n,"operation-not-supported-in-this-environment"));const s=Xs(n);fA(n,t,ed);const i=lv(s,e);return new gi(s,"signInViaPopup",t,i).executeNotNull()}class gi extends cv{constructor(t,e,s,i,r){super(t,e,i,r),this.provider=s,this.authWindow=null,this.pollId=null,gi.currentPopupAction&&gi.currentPopupAction.cancel(),gi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rt(t,this.auth,"internal-error"),t}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const t=nd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gi.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PS.get())};t()}}gi.currentPopupAction=null;const DS="pendingRedirect",nl=new Map;class MS extends cv{constructor(t,e,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,s),this.eventId=null}async execute(){let t=nl.get(this.auth._key());if(!t){try{const s=await OS(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(e){t=()=>Promise.reject(e)}nl.set(this.auth._key(),t)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OS(n,t){const e=LS(t),s=NS(n);if(!await s._isAvailable())return!1;const i=await s._get(e)==="true";return await s._remove(e),i}function VS(n,t){nl.set(n._key(),t)}function NS(n){return Zn(n._redirectPersistence)}function LS(n){return el(DS,n.config.apiKey,n.name)}async function FS(n,t,e=!1){if(Ze(n.app))return Promise.reject(es(n));const s=Xs(n),i=lv(s,t),o=await new MS(s,i,e).execute();return o&&!e&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}const US=600*1e3;class BS{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(e=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!jS(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!uv(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";e.onError(mn(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const s=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=US&&this.cachedEventUids.clear(),this.cachedEventUids.has(qp(t))}saveEventToCache(t){this.cachedEventUids.add(qp(t)),this.lastProcessedEventTime=Date.now()}}function qp(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function uv({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function jS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uv(n);default:return!1}}async function zS(n,t={}){return Qs(n,"GET","/v1/projects",t)}const HS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$S=/^https?/;async function WS(n){if(n.config.emulator)return;const{authorizedDomains:t}=await zS(n);for(const e of t)try{if(qS(e))return}catch{}hn(n,"unauthorized-domain")}function qS(n){const t=Ju(),{protocol:e,hostname:s}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===s}if(!$S.test(e))return!1;if(HS.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const KS=new ia(3e4,6e4);function Kp(){const n=On().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function GS(n){return new Promise((t,e)=>{function s(){Kp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kp(),e(mn(n,"network-request-failed"))},timeout:KS.get()})}if(On().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(On().gapi?.load)s();else{const i=zA("iframefcb");return On()[i]=()=>{gapi.load?s():e(mn(n,"network-request-failed"))},Gy(`${jA()}?onload=${i}`).catch(r=>e(r))}}).catch(t=>{throw sl=null,t})}let sl=null;function YS(n){return sl=sl||GS(n),sl}const QS=new ia(5e3,15e3),XS="__/auth/iframe",JS="emulator/auth/iframe",ZS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ex(n){const t=n.config;rt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Qh(t,JS):`https://${n.config.authDomain}/${XS}`,s={apiKey:t.apiKey,appName:n.name,v:br},i=tx.get(n.config.apiHost);i&&(s.eid=i);const r=n._getFrameworks();return r.length&&(s.fw=r.join(",")),`${e}?${sa(s).slice(1)}`}async function nx(n){const t=await YS(n),e=On().gapi;return rt(e,n,"internal-error"),t.open({where:document.body,url:ex(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZS,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=mn(n,"network-request-failed"),a=On().setTimeout(()=>{r(o)},QS.get());function l(){On().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}const sx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ix=500,rx=600,ox="_blank",ax="http://localhost";class Gp{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lx(n,t,e,s=ix,i=rx){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...sx,width:s.toString(),height:i.toString(),top:r,left:o},u=De().toLowerCase();e&&(a=jy(u)?ox:e),Uy(u)&&(t=t||ax,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(DA(u)&&a!=="_self")return cx(t||"",a),new Gp(null);const d=window.open(t||"",a,h);rt(d,n,"popup-blocked");try{d.focus()}catch{}return new Gp(d)}function cx(n,t){const e=document.createElement("a");e.href=n,e.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(s)}const ux="__/auth/handler",hx="emulator/auth/handler",dx=encodeURIComponent("fac");async function Yp(n,t,e,s,i,r){rt(n.config.authDomain,n,"auth-domain-config-required"),rt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:s,v:br,eventId:i};if(t instanceof ed){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",ZI(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof oa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${dx}=${encodeURIComponent(l)}`:"";return`${fx(n)}?${sa(a).slice(1)}${u}`}function fx({config:n}){return n.emulator?Qh(n,hx):`https://${n.authDomain}/${ux}`}const hu="webStorageSupport";class px{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sv,this._completeRedirectFn=FS,this._overrideRedirectResult=VS}async _openPopup(t,e,s,i){os(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Yp(t,e,s,Ju(),i);return lx(t,r,nd())}async _openRedirect(t,e,s,i){await this._originValidation(t);const r=await Yp(t,e,s,Ju(),i);return _S(r),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:r}=this.eventManagers[e];return i?Promise.resolve(i):(os(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[e]={promise:s},s.catch(()=>{delete this.eventManagers[e]}),s}async initAndGetManager(t){const e=await nx(t),s=new BS(t);return e.register("authEvent",i=>(rt(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=e,s}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(hu,{type:hu},i=>{const r=i?.[0]?.[hu];r!==void 0&&e(!!r),hn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=WS(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return qy()||By()||Jh()}}const gx=px;var Qp="@firebase/auth",Xp="1.12.0";class mx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _x(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yx(n){dr(new Ti("auth",(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;rt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ky(n)},u=new FA(s,i,r,l);return GA(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider("auth-internal").initialize()})),dr(new Ti("auth-internal",t=>{const e=Xs(t.getProvider("auth").getImmediate());return(s=>new mx(s))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(Qp,Xp,_x(n)),Os(Qp,Xp,"esm2020")}const vx=300,bx=Ty("authIdTokenMaxAge")||vx;let Jp=null;const wx=n=>async t=>{const e=t&&await t.getIdTokenResult(),s=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(s&&s>bx)return;const i=e?.token;Jp!==i&&(Jp=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ex(n=Ry()){const t=Kh(n,"auth");if(t.isInitialized())return t.getImmediate();const e=KA(n,{popupRedirectResolver:gx,persistence:[SS,eh,sv]}),s=Ty("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=wx(r.toString());hS(e,o,()=>o(e.currentUser)),uS(e,a=>o(a))}}const i=wy("auth");return i&&YA(e,`http://${i}`),e}function Tx(){return document.getElementsByTagName("head")?.[0]??document}UA({loadJS(n){return new Promise((t,e)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=t,s.onerror=i=>{const r=mn("internal-error");r.customData=i,e(r)},s.type="text/javascript",s.charset="UTF-8",Tx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yx("Browser");var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vs,hv;(function(){var n;function t(I,v){function E(){}E.prototype=v.prototype,I.F=v.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(R,x,k){for(var S=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)S[wt-2]=arguments[wt];return v.prototype[x].apply(R,S)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,e),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,E){E||(E=0);const R=Array(16);if(typeof v=="string")for(var x=0;x<16;++x)R[x]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(x=0;x<16;++x)R[x]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=I.g[0],E=I.g[1],x=I.g[2];let k=I.g[3],S;S=v+(k^E&(x^k))+R[0]+3614090360&4294967295,v=E+(S<<7&4294967295|S>>>25),S=k+(x^v&(E^x))+R[1]+3905402710&4294967295,k=v+(S<<12&4294967295|S>>>20),S=x+(E^k&(v^E))+R[2]+606105819&4294967295,x=k+(S<<17&4294967295|S>>>15),S=E+(v^x&(k^v))+R[3]+3250441966&4294967295,E=x+(S<<22&4294967295|S>>>10),S=v+(k^E&(x^k))+R[4]+4118548399&4294967295,v=E+(S<<7&4294967295|S>>>25),S=k+(x^v&(E^x))+R[5]+1200080426&4294967295,k=v+(S<<12&4294967295|S>>>20),S=x+(E^k&(v^E))+R[6]+2821735955&4294967295,x=k+(S<<17&4294967295|S>>>15),S=E+(v^x&(k^v))+R[7]+4249261313&4294967295,E=x+(S<<22&4294967295|S>>>10),S=v+(k^E&(x^k))+R[8]+1770035416&4294967295,v=E+(S<<7&4294967295|S>>>25),S=k+(x^v&(E^x))+R[9]+2336552879&4294967295,k=v+(S<<12&4294967295|S>>>20),S=x+(E^k&(v^E))+R[10]+4294925233&4294967295,x=k+(S<<17&4294967295|S>>>15),S=E+(v^x&(k^v))+R[11]+2304563134&4294967295,E=x+(S<<22&4294967295|S>>>10),S=v+(k^E&(x^k))+R[12]+1804603682&4294967295,v=E+(S<<7&4294967295|S>>>25),S=k+(x^v&(E^x))+R[13]+4254626195&4294967295,k=v+(S<<12&4294967295|S>>>20),S=x+(E^k&(v^E))+R[14]+2792965006&4294967295,x=k+(S<<17&4294967295|S>>>15),S=E+(v^x&(k^v))+R[15]+1236535329&4294967295,E=x+(S<<22&4294967295|S>>>10),S=v+(x^k&(E^x))+R[1]+4129170786&4294967295,v=E+(S<<5&4294967295|S>>>27),S=k+(E^x&(v^E))+R[6]+3225465664&4294967295,k=v+(S<<9&4294967295|S>>>23),S=x+(v^E&(k^v))+R[11]+643717713&4294967295,x=k+(S<<14&4294967295|S>>>18),S=E+(k^v&(x^k))+R[0]+3921069994&4294967295,E=x+(S<<20&4294967295|S>>>12),S=v+(x^k&(E^x))+R[5]+3593408605&4294967295,v=E+(S<<5&4294967295|S>>>27),S=k+(E^x&(v^E))+R[10]+38016083&4294967295,k=v+(S<<9&4294967295|S>>>23),S=x+(v^E&(k^v))+R[15]+3634488961&4294967295,x=k+(S<<14&4294967295|S>>>18),S=E+(k^v&(x^k))+R[4]+3889429448&4294967295,E=x+(S<<20&4294967295|S>>>12),S=v+(x^k&(E^x))+R[9]+568446438&4294967295,v=E+(S<<5&4294967295|S>>>27),S=k+(E^x&(v^E))+R[14]+3275163606&4294967295,k=v+(S<<9&4294967295|S>>>23),S=x+(v^E&(k^v))+R[3]+4107603335&4294967295,x=k+(S<<14&4294967295|S>>>18),S=E+(k^v&(x^k))+R[8]+1163531501&4294967295,E=x+(S<<20&4294967295|S>>>12),S=v+(x^k&(E^x))+R[13]+2850285829&4294967295,v=E+(S<<5&4294967295|S>>>27),S=k+(E^x&(v^E))+R[2]+4243563512&4294967295,k=v+(S<<9&4294967295|S>>>23),S=x+(v^E&(k^v))+R[7]+1735328473&4294967295,x=k+(S<<14&4294967295|S>>>18),S=E+(k^v&(x^k))+R[12]+2368359562&4294967295,E=x+(S<<20&4294967295|S>>>12),S=v+(E^x^k)+R[5]+4294588738&4294967295,v=E+(S<<4&4294967295|S>>>28),S=k+(v^E^x)+R[8]+2272392833&4294967295,k=v+(S<<11&4294967295|S>>>21),S=x+(k^v^E)+R[11]+1839030562&4294967295,x=k+(S<<16&4294967295|S>>>16),S=E+(x^k^v)+R[14]+4259657740&4294967295,E=x+(S<<23&4294967295|S>>>9),S=v+(E^x^k)+R[1]+2763975236&4294967295,v=E+(S<<4&4294967295|S>>>28),S=k+(v^E^x)+R[4]+1272893353&4294967295,k=v+(S<<11&4294967295|S>>>21),S=x+(k^v^E)+R[7]+4139469664&4294967295,x=k+(S<<16&4294967295|S>>>16),S=E+(x^k^v)+R[10]+3200236656&4294967295,E=x+(S<<23&4294967295|S>>>9),S=v+(E^x^k)+R[13]+681279174&4294967295,v=E+(S<<4&4294967295|S>>>28),S=k+(v^E^x)+R[0]+3936430074&4294967295,k=v+(S<<11&4294967295|S>>>21),S=x+(k^v^E)+R[3]+3572445317&4294967295,x=k+(S<<16&4294967295|S>>>16),S=E+(x^k^v)+R[6]+76029189&4294967295,E=x+(S<<23&4294967295|S>>>9),S=v+(E^x^k)+R[9]+3654602809&4294967295,v=E+(S<<4&4294967295|S>>>28),S=k+(v^E^x)+R[12]+3873151461&4294967295,k=v+(S<<11&4294967295|S>>>21),S=x+(k^v^E)+R[15]+530742520&4294967295,x=k+(S<<16&4294967295|S>>>16),S=E+(x^k^v)+R[2]+3299628645&4294967295,E=x+(S<<23&4294967295|S>>>9),S=v+(x^(E|~k))+R[0]+4096336452&4294967295,v=E+(S<<6&4294967295|S>>>26),S=k+(E^(v|~x))+R[7]+1126891415&4294967295,k=v+(S<<10&4294967295|S>>>22),S=x+(v^(k|~E))+R[14]+2878612391&4294967295,x=k+(S<<15&4294967295|S>>>17),S=E+(k^(x|~v))+R[5]+4237533241&4294967295,E=x+(S<<21&4294967295|S>>>11),S=v+(x^(E|~k))+R[12]+1700485571&4294967295,v=E+(S<<6&4294967295|S>>>26),S=k+(E^(v|~x))+R[3]+2399980690&4294967295,k=v+(S<<10&4294967295|S>>>22),S=x+(v^(k|~E))+R[10]+4293915773&4294967295,x=k+(S<<15&4294967295|S>>>17),S=E+(k^(x|~v))+R[1]+2240044497&4294967295,E=x+(S<<21&4294967295|S>>>11),S=v+(x^(E|~k))+R[8]+1873313359&4294967295,v=E+(S<<6&4294967295|S>>>26),S=k+(E^(v|~x))+R[15]+4264355552&4294967295,k=v+(S<<10&4294967295|S>>>22),S=x+(v^(k|~E))+R[6]+2734768916&4294967295,x=k+(S<<15&4294967295|S>>>17),S=E+(k^(x|~v))+R[13]+1309151649&4294967295,E=x+(S<<21&4294967295|S>>>11),S=v+(x^(E|~k))+R[4]+4149444226&4294967295,v=E+(S<<6&4294967295|S>>>26),S=k+(E^(v|~x))+R[11]+3174756917&4294967295,k=v+(S<<10&4294967295|S>>>22),S=x+(v^(k|~E))+R[2]+718787259&4294967295,x=k+(S<<15&4294967295|S>>>17),S=E+(k^(x|~v))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+k&4294967295}s.prototype.v=function(I,v){v===void 0&&(v=I.length);const E=v-this.blockSize,R=this.C;let x=this.h,k=0;for(;k<v;){if(x==0)for(;k<=E;)i(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<v;)if(R[x++]=I.charCodeAt(k++),x==this.blockSize){i(this,R),x=0;break}}else for(;k<v;)if(R[x++]=I[k++],x==this.blockSize){i(this,R),x=0;break}}this.h=x,this.o+=v},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;v=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=v&255,v/=256;for(this.v(I),I=Array(16),v=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)I[v++]=this.g[E]>>>R&255;return I};function r(I,v){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=v(I)}function o(I,v){this.h=v;const E=[];let R=!0;for(let x=I.length-1;x>=0;x--){const k=I[x]|0;R&&k==v||(E[x]=k,R=!1)}this.g=E}var a={};function l(I){return-128<=I&&I<128?r(I,function(v){return new o([v|0],v<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return A(u(-I));const v=[];let E=1;for(let R=0;I>=E;R++)v[R]=I/E|0,E*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return A(h(I.substring(1),v));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(v,8));let R=d;for(let k=0;k<I.length;k+=8){var x=Math.min(8,I.length-k);const S=parseInt(I.substring(k,k+x),v);x<8?(x=u(Math.pow(v,x)),R=R.j(x).add(u(S))):(R=R.j(E),R=R.add(u(S)))}return R}var d=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-A(this).m();let I=0,v=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);I+=(R>=0?R:4294967296+R)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(b(this))return"-"+A(this).toString(I);const v=u(Math.pow(I,6));var E=this;let R="";for(;;){const x=U(E,v).g;E=P(E,x.j(v));let k=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=x,w(E))return k+R;for(;k.length<6;)k="0"+k;R=k+R}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(let v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=P(this,I),b(I)?-1:w(I)?0:1};function A(I){const v=I.g.length,E=[];for(let R=0;R<v;R++)E[R]=~I.g[R];return new o(E,~I.h).add(p)}n.abs=function(){return b(this)?A(this):this},n.add=function(I){const v=Math.max(this.g.length,I.g.length),E=[];let R=0;for(let x=0;x<=v;x++){let k=R+(this.i(x)&65535)+(I.i(x)&65535),S=(k>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);R=S>>>16,k&=65535,S&=65535,E[x]=S<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(A(v))}n.j=function(I){if(w(this)||w(I))return d;if(b(this))return b(I)?A(this).j(A(I)):A(A(this).j(I));if(b(I))return A(this.j(A(I)));if(this.l(m)<0&&I.l(m)<0)return u(this.m()*I.m());const v=this.g.length+I.g.length,E=[];for(var R=0;R<2*v;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let x=0;x<I.g.length;x++){const k=this.i(R)>>>16,S=this.i(R)&65535,wt=I.i(x)>>>16,pt=I.i(x)&65535;E[2*R+2*x]+=S*pt,N(E,2*R+2*x),E[2*R+2*x+1]+=k*pt,N(E,2*R+2*x+1),E[2*R+2*x+1]+=S*wt,N(E,2*R+2*x+1),E[2*R+2*x+2]+=k*wt,N(E,2*R+2*x+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function N(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function B(I,v){this.g=I,this.h=v}function U(I,v){if(w(v))throw Error("division by zero");if(w(I))return new B(d,d);if(b(I))return v=U(A(I),v),new B(A(v.g),A(v.h));if(b(v))return v=U(I,A(v)),new B(A(v.g),v.h);if(I.g.length>30){if(b(I)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var E=p,R=v;R.l(I)<=0;)E=O(E),R=O(R);var x=Y(E,1),k=Y(R,1);for(R=Y(R,2),E=Y(E,2);!w(R);){var S=k.add(R);S.l(I)<=0&&(x=x.add(E),k=S),R=Y(R,1),E=Y(E,1)}return v=P(I,x.j(v)),new B(x,v)}for(x=d;I.l(v)>=0;){for(E=Math.max(1,Math.floor(I.m()/v.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),k=u(E),S=k.j(v);b(S)||S.l(I)>0;)E-=R,k=u(E),S=k.j(v);w(k)&&(k=p),x=x.add(k),I=P(I,S)}return new B(x,I)}n.B=function(I){return U(this,I).h},n.and=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<v;R++)E[R]=this.i(R)&I.i(R);return new o(E,this.h&I.h)},n.or=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<v;R++)E[R]=this.i(R)|I.i(R);return new o(E,this.h|I.h)},n.xor=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<v;R++)E[R]=this.i(R)^I.i(R);return new o(E,this.h^I.h)};function O(I){const v=I.g.length+1,E=[];for(let R=0;R<v;R++)E[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(E,I.h)}function Y(I,v){const E=v>>5;v%=32;const R=I.g.length-E,x=[];for(let k=0;k<R;k++)x[k]=v>0?I.i(k+E)>>>v|I.i(k+E+1)<<32-v:I.i(k+E);return new o(x,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,hv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Vs=o}).apply(typeof Zp<"u"?Zp:typeof self<"u"?self:typeof window<"u"?window:{});var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dv,oo,fv,il,sh,pv,gv,mv;(function(){var n,t=Object.defineProperty;function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ka=="object"&&ka];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=e(this);function i(c,f){if(f)t:{var g=s;c=c.split(".");for(var y=0;y<c.length-1;y++){var L=c[y];if(!(L in g))break t;g=g[L]}c=c[c.length-1],y=g[c],f=f(y),f!=y&&f!=null&&t(g,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var g=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&g.push([y,f[y]]);return g}});var r=r||{},o=this||self;function a(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,g){return c.call.apply(c.bind,arguments)}function u(c,f,g){return u=l,u.apply(null,arguments)}function h(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function d(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(y,L,F){for(var Q=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)Q[mt-2]=arguments[mt];return f.prototype[L].apply(y,Q)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function m(c){const f=c.length;if(f>0){const g=Array(f);for(let y=0;y<f;y++)g[y]=c[y];return g}return[]}function w(c,f){for(let y=1;y<arguments.length;y++){const L=arguments[y];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=c.length||0;const F=L.length||0;c.length=g+F;for(let Q=0;Q<F;Q++)c[g+Q]=L[Q]}else c.push(L)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(c){o.setTimeout(()=>{throw c},0)}function P(){var c=I;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class N{constructor(){this.h=this.g=null}add(f,g){const y=B.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var B=new b(()=>new U,c=>c.reset());class U{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,Y=!1,I=new N,v=()=>{const c=Promise.resolve(void 0);O=()=>{c.then(E)}};function E(){for(var c;c=P();){try{c.h.call(c.g)}catch(g){A(g)}var f=B;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}Y=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c})();function S(c){return/^[\s\xa0]*$/.test(c)}function wt(c,f){x.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}d(wt,x),wt.prototype.init=function(c,f){const g=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&wt.Z.h.call(this)},wt.prototype.h=function(){wt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),ht=0;function it(c,f,g,y,L){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=L,this.key=++ht,this.da=this.fa=!1}function st(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ct(c,f,g){for(const y in c)f.call(g,c[y],y,c)}function Me(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function me(c){const f={};for(const g in c)f[g]=c[g];return f}const Wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qe(c,f){let g,y;for(let L=1;L<arguments.length;L++){y=arguments[L];for(g in y)c[g]=y[g];for(let F=0;F<Wt.length;F++)g=Wt[F],Object.prototype.hasOwnProperty.call(y,g)&&(c[g]=y[g])}}function Ee(c){this.src=c,this.g={},this.h=0}Ee.prototype.add=function(c,f,g,y,L){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const Q=le(c,f,y,L);return Q>-1?(f=c[Q],g||(f.fa=!1)):(f=new it(f,this.src,F,!!y,L),f.fa=g,c.push(f)),f};function Ke(c,f){const g=f.type;if(g in c.g){var y=c.g[g],L=Array.prototype.indexOf.call(y,f,void 0),F;(F=L>=0)&&Array.prototype.splice.call(y,L,1),F&&(st(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function le(c,f,g,y){for(let L=0;L<c.length;++L){const F=c[L];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==y)return L}return-1}var wn="closure_lm_"+(Math.random()*1e6|0),jn={};function ti(c,f,g,y,L){if(Array.isArray(f)){for(let F=0;F<f.length;F++)ti(c,f[F],g,y,L);return null}return g=J(g),c&&c[pt]?c.J(f,g,a(y)?!!y.capture:!1,L):zn(c,f,g,!1,y,L)}function zn(c,f,g,y,L,F){if(!f)throw Error("Invalid event type");const Q=a(L)?!!L.capture:!!L;let mt=W(c);if(mt||(c[wn]=mt=new Ee(c)),g=mt.add(f,g,y,Q,F),g.proxy)return g;if(y=Ni(),g.proxy=y,y.src=c,y.listener=g,c.addEventListener)k||(L=Q),L===void 0&&(L=!1),c.addEventListener(f.toString(),y,L);else if(c.attachEvent)c.attachEvent(j(f.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ni(){function c(g){return f.call(c.src,c.listener,g)}const f=K;return c}function C(c,f,g,y,L){if(Array.isArray(f))for(var F=0;F<f.length;F++)C(c,f[F],g,y,L);else y=a(y)?!!y.capture:!!y,g=J(g),c&&c[pt]?(c=c.i,F=String(f).toString(),F in c.g&&(f=c.g[F],g=le(f,g,y,L),g>-1&&(st(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[F],c.h--)))):c&&(c=W(c))&&(f=c.g[f.toString()],c=-1,f&&(c=le(f,g,y,L)),(g=c>-1?f[c]:null)&&D(g))}function D(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[pt])Ke(f.i,c);else{var g=c.type,y=c.proxy;f.removeEventListener?f.removeEventListener(g,y,c.capture):f.detachEvent?f.detachEvent(j(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=W(f))?(Ke(g,c),g.h==0&&(g.src=null,f[wn]=null)):st(c)}}}function j(c){return c in jn?jn[c]:jn[c]="on"+c}function K(c,f){if(c.da)c=!0;else{f=new wt(f,this);const g=c.listener,y=c.ha||c.src;c.fa&&D(c),c=g.call(y,f)}return c}function W(c){return c=c[wn],c instanceof Ee?c:null}var q="__closure_events_fn_"+(Math.random()*1e9>>>0);function J(c){return typeof c=="function"?c:(c[q]||(c[q]=function(f){return c.handleEvent(f)}),c[q])}function G(){R.call(this),this.i=new Ee(this),this.M=this,this.G=null}d(G,R),G.prototype[pt]=!0,G.prototype.removeEventListener=function(c,f,g,y){C(this,c,f,g,y)};function V(c,f){var g,y=c.G;if(y)for(g=[];y;y=y.G)g.push(y);if(c=c.M,y=f.type||f,typeof f=="string")f=new x(f,c);else if(f instanceof x)f.target=f.target||c;else{var L=f;f=new x(y,c),qe(f,L)}L=!0;let F,Q;if(g)for(Q=g.length-1;Q>=0;Q--)F=f.g=g[Q],L=_(F,y,!0,f)&&L;if(F=f.g=c,L=_(F,y,!0,f)&&L,L=_(F,y,!1,f)&&L,g)for(Q=0;Q<g.length;Q++)F=f.g=g[Q],L=_(F,y,!1,f)&&L}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let y=0;y<g.length;y++)st(g[y]);delete c.g[f],c.h--}}this.G=null},G.prototype.J=function(c,f,g,y){return this.i.add(String(c),f,!1,g,y)},G.prototype.K=function(c,f,g,y){return this.i.add(String(c),f,!0,g,y)};function _(c,f,g,y){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let L=!0;for(let F=0;F<f.length;++F){const Q=f[F];if(Q&&!Q.da&&Q.capture==g){const mt=Q.listener,ce=Q.ha||Q.src;Q.fa&&Ke(c.i,Q),L=mt.call(ce,y)!==!1&&L}}return L&&!y.defaultPrevented}function T(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function $(c){c.g=T(()=>{c.g=null,c.i&&(c.i=!1,$(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class X extends R{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(c){R.call(this),this.h=c,this.g={}}d(et,R);var gt=[];function Rt(c){Ct(c.g,function(f,g){this.g.hasOwnProperty(g)&&D(f)},c),c.g={}}et.prototype.N=function(){et.Z.N.call(this),Rt(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tt=o.JSON.stringify,Te=o.JSON.parse,Ie=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Ge(){}function Ye(){}var fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Li(){x.call(this,"d")}d(Li,x);function _e(){x.call(this,"c")}d(_e,x);var de={},Pr=null;function ei(){return Pr=Pr||new G}de.Ia="serverreachability";function tf(c){x.call(this,de.Ia,c)}d(tf,x);function kr(c){const f=ei();V(f,new tf(f))}de.STAT_EVENT="statevent";function ef(c,f){x.call(this,de.STAT_EVENT,c),this.stat=f}d(ef,x);function Oe(c){const f=ei();V(f,new ef(f,c))}de.Ja="timingevent";function nf(c,f){x.call(this,de.Ja,c),this.size=f}d(nf,x);function Dr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function Mr(){this.g=!0}Mr.prototype.ua=function(){this.g=!1};function Uw(c,f,g,y,L,F){c.info(function(){if(c.g)if(F){var Q="",mt=F.split("&");for(let Ot=0;Ot<mt.length;Ot++){var ce=mt[Ot].split("=");if(ce.length>1){const fe=ce[0];ce=ce[1];const Tn=fe.split("_");Q=Tn.length>=2&&Tn[1]=="type"?Q+(fe+"="+ce+"&"):Q+(fe+"=redacted&")}}}else Q=null;else Q=F;return"XMLHTTP REQ ("+y+") [attempt "+L+"]: "+f+`
`+g+`
`+Q})}function Bw(c,f,g,y,L,F,Q){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+L+"]: "+f+`
`+g+`
`+F+" "+Q})}function Fi(c,f,g,y){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+zw(c,g)+(y?" "+y:"")})}function jw(c,f){c.info(function(){return"TIMEOUT: "+f})}Mr.prototype.info=function(){};function zw(c,f){if(!c.g)return f;if(!f)return null;try{const F=JSON.parse(f);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var g=F[c];if(!(g.length<2)){var y=g[1];if(Array.isArray(y)&&!(y.length<1)){var L=y[0];if(L!="noop"&&L!="stop"&&L!="close")for(let Q=1;Q<y.length;Q++)y[Q]=""}}}}return Tt(F)}catch{return f}}var ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rf;function Vc(){}d(Vc,Ge),Vc.prototype.g=function(){return new XMLHttpRequest},rf=new Vc;function Or(c){return encodeURIComponent(String(c))}function Hw(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function hs(c,f,g,y){this.j=c,this.i=f,this.l=g,this.S=y||1,this.V=new et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}var af={},Nc={};function Lc(c,f,g){c.M=1,c.A=ya(En(f)),c.u=g,c.R=!0,lf(c,null)}function lf(c,f){c.F=Date.now(),_a(c),c.B=En(c.A);var g=c.B,y=c.S;Array.isArray(y)||(y=[String(y)]),wf(g.i,"t",y),c.C=0,g=c.j.L,c.h=new of,c.g=Uf(c.j,g?f:null,!c.u),c.P>0&&(c.O=new X(u(c.Y,c,c.g),c.P)),f=c.V,g=c.g,y=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(gt[0]=L.toString()),L=gt);for(let F=0;F<L.length;F++){const Q=ti(g,L[F],y||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.J?me(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),kr(),Uw(c.i,c.v,c.B,c.l,c.S,c.u)}hs.prototype.ba=function(c){c=c.target;const f=this.O;f&&ps(c)==3?f.j():this.Y(c)},hs.prototype.Y=function(c){try{if(c==this.g)t:{const mt=ps(this.g),ce=this.g.ya(),Ot=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||Cf(this.g)))){this.K||mt!=4||ce==7||(ce==8||Ot<=0?kr(3):kr(2)),Fc(this);var f=this.g.ca();this.X=f;var g=$w(this);if(this.o=f==200,Bw(this.i,this.v,this.B,this.l,this.S,mt,f),this.o){if(this.U&&!this.L){e:{if(this.g){var y,L=this.g;if((y=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(y)){var F=y;break e}}F=null}if(c=F)Fi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Uc(this,c);else{this.o=!1,this.m=3,Oe(12),ni(this),Vr(this);break t}}if(this.R){c=!0;let fe;for(;!this.K&&this.C<g.length;)if(fe=Ww(this,g),fe==Nc){mt==4&&(this.m=4,Oe(14),c=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==af){this.m=4,Oe(15),Fi(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else Fi(this.i,this.l,fe,null),Uc(this,fe);if(cf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||g.length!=0||this.h.h||(this.m=1,Oe(16),c=!1),this.o=this.o&&c,!c)Fi(this.i,this.l,g,"[Invalid Chunked Response]"),ni(this),Vr(this);else if(g.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Kc(Q),Q.P=!0,Oe(11))}}else Fi(this.i,this.l,g,null),Uc(this,g);mt==4&&ni(this),this.o&&!this.K&&(mt==4?Vf(this.j,this):(this.o=!1,_a(this)))}else rE(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Oe(12)):(this.m=0,Oe(13)),ni(this),Vr(this)}}}catch{}};function $w(c){if(!cf(c))return c.g.la();const f=Cf(c.g);if(f==="")return"";let g="";const y=f.length,L=ps(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ni(c),Vr(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<y;F++)c.h.h=!0,g+=c.h.i.decode(f[F],{stream:!(L&&F==y-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function cf(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ww(c,f){var g=c.C,y=f.indexOf(`
`,g);return y==-1?Nc:(g=Number(f.substring(g,y)),isNaN(g)?af:(y+=1,y+g>f.length?Nc:(f=f.slice(y,y+g),c.C=y+g,f)))}hs.prototype.cancel=function(){this.K=!0,ni(this)};function _a(c){c.T=Date.now()+c.H,uf(c,c.H)}function uf(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Dr(u(c.aa,c),f)}function Fc(c){c.D&&(o.clearTimeout(c.D),c.D=null)}hs.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(jw(this.i,this.B),this.M!=2&&(kr(),Oe(17)),ni(this),this.m=2,Vr(this)):uf(this,this.T-c)};function Vr(c){c.j.I==0||c.K||Vf(c.j,c)}function ni(c){Fc(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Rt(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Uc(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||Bc(g.h,c))){if(!c.L&&Bc(g.h,c)&&g.I==3){try{var y=g.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var L=y;if(L[0]==0){t:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Ta(g),wa(g);else break t;qc(g),Oe(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Dr(u(g.Va,g),6e3));ff(g.h)<=1&&g.ta&&(g.ta=void 0)}else ii(g,11)}else if((c.L||g.g==c)&&Ta(g),!S(f))for(L=g.Ba.g.parse(f),f=0;f<L.length;f++){let Ot=L[f];const fe=Ot[0];if(!(fe<=g.K))if(g.K=fe,Ot=Ot[1],g.I==2)if(Ot[0]=="c"){g.M=Ot[1],g.ba=Ot[2];const Tn=Ot[3];Tn!=null&&(g.ka=Tn,g.j.info("VER="+g.ka));const ri=Ot[4];ri!=null&&(g.za=ri,g.j.info("SVER="+g.za));const gs=Ot[5];gs!=null&&typeof gs=="number"&&gs>0&&(y=1.5*gs,g.O=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const ms=c.g;if(ms){const Aa=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Aa){var F=y.h;F.g||Aa.indexOf("spdy")==-1&&Aa.indexOf("quic")==-1&&Aa.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(jc(F,F.h),F.h=null))}if(y.G){const Gc=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(y.wa=Gc,jt(y.J,y.G,Gc))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),y=g;var Q=c;if(y.na=Ff(y,y.L?y.ba:null,y.W),Q.L){pf(y.h,Q);var mt=Q,ce=y.O;ce&&(mt.H=ce),mt.D&&(Fc(mt),_a(mt)),y.g=Q}else Mf(y);g.i.length>0&&Ea(g)}else Ot[0]!="stop"&&Ot[0]!="close"||ii(g,7);else g.I==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?ii(g,7):Wc(g):Ot[0]!="noop"&&g.l&&g.l.qa(Ot),g.A=0)}}kr(4)}catch{}}var qw=class{constructor(c,f){this.g=c,this.map=f}};function hf(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function df(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ff(c){return c.h?1:c.g?c.g.size:0}function Bc(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function jc(c,f){c.g?c.g.add(f):c.h=f}function pf(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}hf.prototype.cancel=function(){if(this.i=gf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gf(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return m(c.i)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kw(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const y=c[g].indexOf("=");let L,F=null;y>=0?(L=c[g].substring(0,y),F=c[g].substring(y+1)):L=c[g],f(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ds(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof ds?(this.l=c.l,Nr(this,c.j),this.o=c.o,this.g=c.g,Lr(this,c.u),this.h=c.h,zc(this,Ef(c.i)),this.m=c.m):c&&(f=String(c).match(mf))?(this.l=!1,Nr(this,f[1]||"",!0),this.o=Fr(f[2]||""),this.g=Fr(f[3]||"",!0),Lr(this,f[4]),this.h=Fr(f[5]||"",!0),zc(this,f[6]||"",!0),this.m=Fr(f[7]||"")):(this.l=!1,this.i=new Br(null,this.l))}ds.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(Ur(f,_f,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ur(f,_f,!0),"@"),c.push(Or(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ur(g,g.charAt(0)=="/"?Qw:Yw,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ur(g,Jw)),c.join("")},ds.prototype.resolve=function(c){const f=En(this);let g=!!c.j;g?Nr(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var y=c.h;if(g)Lr(f,c.u);else if(g=!!c.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var L=f.h.lastIndexOf("/");L!=-1&&(y=f.h.slice(0,L+1)+y)}if(L=y,L==".."||L==".")y="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){y=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let Q=0;Q<L.length;){const mt=L[Q++];mt=="."?y&&Q==L.length&&F.push(""):mt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),y&&Q==L.length&&F.push("")):(F.push(mt),y=!0)}y=F.join("/")}else y=L}return g?f.h=y:g=c.i.toString()!=="",g?zc(f,Ef(c.i)):g=!!c.m,g&&(f.m=c.m),f};function En(c){return new ds(c)}function Nr(c,f,g){c.j=g?Fr(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Lr(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function zc(c,f,g){f instanceof Br?(c.i=f,Zw(c.i,c.l)):(g||(f=Ur(f,Xw)),c.i=new Br(f,c.l))}function jt(c,f,g){c.i.set(f,g)}function ya(c){return jt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Fr(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ur(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Gw),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _f=/[#\/\?@]/g,Yw=/[#\?:]/g,Qw=/[#\?]/g,Xw=/[#\?@]/g,Jw=/#/g;function Br(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function si(c){c.g||(c.g=new Map,c.h=0,c.i&&Kw(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Br.prototype,n.add=function(c,f){si(this),this.i=null,c=Ui(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function yf(c,f){si(c),f=Ui(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function vf(c,f){return si(c),f=Ui(c,f),c.g.has(f)}n.forEach=function(c,f){si(this),this.g.forEach(function(g,y){g.forEach(function(L){c.call(f,L,y,this)},this)},this)};function bf(c,f){si(c);let g=[];if(typeof f=="string")vf(c,f)&&(g=g.concat(c.g.get(Ui(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}n.set=function(c,f){return si(this),this.i=null,c=Ui(this,c),vf(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},n.get=function(c,f){return c?(c=bf(this,c),c.length>0?String(c[0]):f):f};function wf(c,f,g){yf(c,f),g.length>0&&(c.i=null,c.g.set(Ui(c,f),m(g)),c.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var g=f[y];const L=Or(g);g=bf(this,g);for(let F=0;F<g.length;F++){let Q=L;g[F]!==""&&(Q+="="+Or(g[F])),c.push(Q)}}return this.i=c.join("&")};function Ef(c){const f=new Br;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Ui(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Zw(c,f){f&&!c.j&&(si(c),c.i=null,c.g.forEach(function(g,y){const L=y.toLowerCase();y!=L&&(yf(this,y),wf(this,L,g))},c)),c.j=f}function tE(c,f){const g=new Mr;if(o.Image){const y=new Image;y.onload=h(fs,g,"TestLoadImage: loaded",!0,f,y),y.onerror=h(fs,g,"TestLoadImage: error",!1,f,y),y.onabort=h(fs,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(fs,g,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else f(!1)}function eE(c,f){const g=new Mr,y=new AbortController,L=setTimeout(()=>{y.abort(),fs(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:y.signal}).then(F=>{clearTimeout(L),F.ok?fs(g,"TestPingServer: ok",!0,f):fs(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),fs(g,"TestPingServer: error",!1,f)})}function fs(c,f,g,y,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),y(g)}catch{}}function nE(){this.g=new Ie}function Hc(c){this.i=c.Sb||null,this.h=c.ab||!1}d(Hc,Ge),Hc.prototype.g=function(){return new va(this.i,this.h)};function va(c,f){G.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(va,G),n=va.prototype,n.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,zr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tf(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tf(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?jr(this):zr(this),this.readyState==3&&Tf(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,jr(this))},n.Na=function(c){this.g&&(this.response=c,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,zr(c)}n.setRequestHeader=function(c,f){this.A.append(c,f)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function zr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function If(c){let f="";return Ct(c,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function $c(c,f,g){t:{for(y in g){var y=!1;break t}y=!0}y||(g=If(g),typeof c=="string"?g!=null&&Or(g):jt(c,f,g))}function Gt(c){G.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Gt,G);var sE=/^https?$/i,iE=["POST","PUT"];n=Gt.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rf.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Af(this,F);return}if(c=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var L in y)g.set(L,y[L]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const F of y.keys())g.set(F,y.get(F));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),L=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(iE,f,void 0)>=0)||y||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of g)this.g.setRequestHeader(F,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Af(this,F)}};function Af(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,Sf(c),ba(c)}function Sf(c){c.A||(c.A=!0,V(c,"complete"),V(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,V(this,"complete"),V(this,"abort"),ba(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),Gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xf(this):this.Xa())},n.Xa=function(){xf(this)};function xf(c){if(c.h&&typeof r<"u"){if(c.v&&ps(c)==4)setTimeout(c.Ca.bind(c),0);else if(V(c,"readystatechange"),ps(c)==4){c.h=!1;try{const F=c.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var g;if(!(g=f)){var y;if(y=F===0){let Q=String(c.D).match(mf)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),y=!sE.test(Q?Q.toLowerCase():"")}g=y}if(g)V(c,"complete"),V(c,"success");else{c.o=6;try{var L=ps(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",Sf(c)}}finally{ba(c)}}}}function ba(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||V(c,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ps(c){return c.g?c.g.readyState:0}n.ca=function(){try{return ps(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Te(f)}};function Cf(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rE(c){const f={};c=(c.g&&ps(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(S(c[y]))continue;var g=Hw(c[y]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[L]||[];f[L]=F,F.push(g)}Me(f,function(y){return y.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Rf(c){this.za=0,this.i=[],this.j=new Mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hr("baseRetryDelayMs",5e3,c),this.Za=Hr("retryDelaySeedMs",1e4,c),this.Ta=Hr("forwardChannelMaxRetries",2,c),this.va=Hr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new hf(c&&c.concurrentRequestLimit),this.Ba=new nE,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Rf.prototype,n.ka=8,n.I=1,n.connect=function(c,f,g,y){Oe(0),this.W=c,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.J=Ff(this,null,this.W),Ea(this)};function Wc(c){if(Pf(c),c.I==3){var f=c.V++,g=En(c.J);if(jt(g,"SID",c.M),jt(g,"RID",f),jt(g,"TYPE","terminate"),$r(c,g),f=new hs(c,c.j,f),f.M=2,f.A=ya(En(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Uf(f.j,null),f.g.ea(f.A)),f.F=Date.now(),_a(f)}Lf(c)}function wa(c){c.g&&(Kc(c),c.g.cancel(),c.g=null)}function Pf(c){wa(c),c.v&&(o.clearTimeout(c.v),c.v=null),Ta(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ea(c){if(!df(c.h)&&!c.m){c.m=!0;var f=c.Ea;O||v(),Y||(O(),Y=!0),I.add(f,c),c.D=0}}function oE(c,f){return ff(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Dr(u(c.Ea,c,f),Nf(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new hs(this,this.j,c);let F=this.o;if(this.U&&(F?(F=me(F),qe(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)t:{for(var f=0,g=0;g<this.i.length;g++){e:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=g;break t}if(f===4096||g===this.i.length-1){f=g+1;break t}}f=1e3}else f=1e3;f=Df(this,L,f),g=En(this.J),jt(g,"RID",c),jt(g,"CVER",22),this.G&&jt(g,"X-HTTP-Session-Id",this.G),$r(this,g),F&&(this.R?f="headers="+Or(If(F))+"&"+f:this.u&&$c(g,this.u,F)),jc(this.h,L),this.Ra&&jt(g,"TYPE","init"),this.S?(jt(g,"$req",f),jt(g,"SID","null"),L.U=!0,Lc(L,g,null)):Lc(L,g,f),this.I=2}}else this.I==3&&(c?kf(this,c):this.i.length==0||df(this.h)||kf(this))};function kf(c,f){var g;f?g=f.l:g=c.V++;const y=En(c.J);jt(y,"SID",c.M),jt(y,"RID",g),jt(y,"AID",c.K),$r(c,y),c.u&&c.o&&$c(y,c.u,c.o),g=new hs(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=Df(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),jc(c.h,g),Lc(g,y,f)}function $r(c,f){c.H&&Ct(c.H,function(g,y){jt(f,y,g)}),c.l&&Ct({},function(g,y){jt(f,y,g)})}function Df(c,f,g){g=Math.min(c.i.length,g);const y=c.l?u(c.l.Ka,c.l,c):null;t:{var L=c.i;let mt=-1;for(;;){const ce=["count="+g];mt==-1?g>0?(mt=L[0].g,ce.push("ofs="+mt)):mt=0:ce.push("ofs="+mt);let Ot=!0;for(let fe=0;fe<g;fe++){var F=L[fe].g;const Tn=L[fe].map;if(F-=mt,F<0)mt=Math.max(0,L[fe].g-100),Ot=!1;else try{F="req"+F+"_"||"";try{var Q=Tn instanceof Map?Tn:Object.entries(Tn);for(const[ri,gs]of Q){let ms=gs;a(gs)&&(ms=Tt(gs)),ce.push(F+ri+"="+encodeURIComponent(ms))}}catch(ri){throw ce.push(F+"type="+encodeURIComponent("_badmap")),ri}}catch{y&&y(Tn)}}if(Ot){Q=ce.join("&");break t}}Q=void 0}return c=c.i.splice(0,g),f.G=c,Q}function Mf(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;O||v(),Y||(O(),Y=!0),I.add(f,c),c.A=0}}function qc(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Dr(u(c.Da,c),Nf(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Of(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Dr(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Oe(10),wa(this),Of(this))};function Kc(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Of(c){c.g=new hs(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=En(c.na);jt(f,"RID","rpc"),jt(f,"SID",c.M),jt(f,"AID",c.K),jt(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&jt(f,"TO",c.ia),jt(f,"TYPE","xmlhttp"),$r(c,f),c.u&&c.o&&$c(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=ya(En(f)),g.u=null,g.R=!0,lf(g,c)}n.Va=function(){this.C!=null&&(this.C=null,wa(this),qc(this),Oe(19))};function Ta(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Vf(c,f){var g=null;if(c.g==f){Ta(c),Kc(c),c.g=null;var y=2}else if(Bc(c.h,f))g=f.G,pf(c.h,f),y=1;else return;if(c.I!=0){if(f.o)if(y==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var L=c.D;y=ei(),V(y,new nf(y,g)),Ea(c)}else Mf(c);else if(L=f.m,L==3||L==0&&f.X>0||!(y==1&&oE(c,f)||y==2&&qc(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),L){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function Nf(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function ii(c,f){if(c.j.info("Error code "+f),f==2){var g=u(c.bb,c),y=c.Ua;const L=!y;y=new ds(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Nr(y,"https"),ya(y),L?tE(y.toString(),g):eE(y.toString(),g)}else Oe(2);c.I=0,c.l&&c.l.pa(f),Lf(c),Pf(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Lf(c){if(c.I=0,c.ja=[],c.l){const f=gf(c.h);(f.length!=0||c.i.length!=0)&&(w(c.ja,f),w(c.ja,c.i),c.h.i.length=0,m(c.i),c.i.length=0),c.l.oa()}}function Ff(c,f,g){var y=g instanceof ds?En(g):new ds(g);if(y.g!="")f&&(y.g=f+"."+y.g),Lr(y,y.u);else{var L=o.location;y=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;const F=new ds(null);y&&Nr(F,y),f&&(F.g=f),L&&Lr(F,L),g&&(F.h=g),y=F}return g=c.G,f=c.wa,g&&f&&jt(y,g,f),jt(y,"VER",c.ka),$r(c,y),y}function Uf(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new Gt(new Hc({ab:g})):new Gt(c.ma),f.Fa(c.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bf(){}n=Bf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ia(){}Ia.prototype.g=function(c,f){return new Qe(c,f)};function Qe(c,f){G.call(this),this.g=new Rf(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!S(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Bi(this)}d(Qe,G),Qe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){Wc(this.g)},Qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=Tt(c),c=g);f.i.push(new qw(f.Ya++,c)),f.I==3&&Ea(f)},Qe.prototype.N=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,Qe.Z.N.call(this)};function jf(c){Li.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){t:{for(const g in f){c=g;break t}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}d(jf,Li);function zf(){_e.call(this),this.status=1}d(zf,_e);function Bi(c){this.g=c}d(Bi,Bf),Bi.prototype.ra=function(){V(this.g,"a")},Bi.prototype.qa=function(c){V(this.g,new jf(c))},Bi.prototype.pa=function(c){V(this.g,new zf)},Bi.prototype.oa=function(){V(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,mv=function(){return new Ia},gv=function(){return ei()},pv=de,sh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,il=ma,sf.COMPLETE="complete",fv=sf,Ye.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",G.prototype.listen=G.prototype.J,oo=Ye,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,dv=Gt}).apply(typeof ka<"u"?ka:typeof self<"u"?self:typeof window<"u"?window:{});class xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");let Er="12.9.0";function Ix(n){Er=n}const Si=new Wh("@firebase/firestore");function Ki(){return Si.logLevel}function tt(n,...t){if(Si.logLevel<=_t.DEBUG){const e=t.map(id);Si.debug(`Firestore (${Er}): ${n}`,...e)}}function as(n,...t){if(Si.logLevel<=_t.ERROR){const e=t.map(id);Si.error(`Firestore (${Er}): ${n}`,...e)}}function xi(n,...t){if(Si.logLevel<=_t.WARN){const e=t.map(id);Si.warn(`Firestore (${Er}): ${n}`,...e)}}function id(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function ot(n,t,e){let s="Unexpected state";typeof t=="string"?s=t:e=t,_v(n,s,e)}function _v(n,t,e){let s=`FIRESTORE (${Er}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{s+=" CONTEXT: "+JSON.stringify(e)}catch{s+=" CONTEXT: "+e}throw as(s),new Error(s)}function Dt(n,t,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,n||_v(t,i,s)}function dt(n,t){return n}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends us{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ns{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class yv{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ax{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(xe.UNAUTHENTICATED)))}shutdown(){}}class Sx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class xx{constructor(t){this.t=t,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Dt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,e(l)):Promise.resolve();let r=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ns,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ns)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((s=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Dt(typeof s.accessToken=="string",31837,{l:s}),new yv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Dt(t===null||typeof t=="string",2055,{h:t}),new xe(t)}}class Cx{constructor(t,e,s){this.P=t,this.T=e,this.I=s,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Rx{constructor(t,e,s){this.P=t,this.T=e,this.I=s}getToken(){return Promise.resolve(new Cx(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tg{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Px{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Dt(this.o===void 0,3512);const s=r=>{r.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,tt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tg(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Dt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new tg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kx(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}class rd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=kx(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<e&&(s+=t.charAt(i[r]%62))}return s}}function yt(n,t){return n<t?-1:n>t?1:0}function ih(n,t){const e=Math.min(n.length,t.length);for(let s=0;s<e;s++){const i=n.charAt(s),r=t.charAt(s);if(i!==r)return du(i)===du(r)?yt(i,r):du(i)?1:-1}return yt(n.length,t.length)}const Dx=55296,Mx=57343;function du(n){const t=n.charCodeAt(0);return t>=Dx&&t<=Mx}function fr(n,t,e){return n.length===t.length&&n.every(((s,i)=>e(s,t[i])))}const eg="__name__";class Pn{constructor(t,e,s){e===void 0?e=0:e>t.length&&ot(637,{offset:e,range:t.length}),s===void 0?s=t.length-e:s>t.length-e&&ot(1746,{length:s,range:t.length-e}),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Pn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Pn?t.forEach((s=>{e.push(s)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let i=0;i<s;i++){const r=Pn.compareSegments(t.get(i),e.get(i));if(r!==0)return r}return yt(t.length,e.length)}static compareSegments(t,e){const s=Pn.isNumericId(t),i=Pn.isNumericId(e);return s&&!i?-1:!s&&i?1:s&&i?Pn.extractNumericId(t).compare(Pn.extractNumericId(e)):ih(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vs.fromString(t.substring(4,t.length-2))}}class Bt extends Pn{construct(t,e,s){return new Bt(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((i=>i.length>0)))}return new Bt(e)}static emptyPath(){return new Bt([])}}const Ox=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends Pn{construct(t,e,s){return new ve(t,e,s)}static isValidIdentifier(t){return Ox.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eg}static keyField(){return new ve([eg])}static fromServerFormat(t){const e=[];let s="",i=0;const r=()=>{if(s.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(e)}static emptyPath(){return new ve([])}}class nt{constructor(t){this.path=t}static fromPath(t){return new nt(Bt.fromString(t))}static fromName(t){return new nt(Bt.fromString(t).popFirst(5))}static empty(){return new nt(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Bt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Bt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new Bt(t.slice()))}}function vv(n,t,e){if(!e)throw new Z(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Vx(n,t,e,s){if(t===!0&&s===!0)throw new Z(z.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function ng(n){if(!nt.isDocumentKey(n))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sg(n){if(nt.isDocumentKey(n))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ot(12329,{type:typeof n})}function ln(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=fc(n);throw new Z(z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function re(n,t){const e={typeString:n};return t&&(e.value=t),e}function la(n,t){if(!bv(n))throw new Z(z.INVALID_ARGUMENT,"JSON must be an object");let e;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in n)){e=`JSON missing required field: '${s}'`;break}const o=n[s];if(i&&typeof o!==i){e=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${s}' field to equal '${r.value}'`;break}}if(e)throw new Z(z.INVALID_ARGUMENT,e);return!0}const ig=-62135596800,rg=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(t){return Ht.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*rg);return new Ht(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ig)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rg}_compareTo(t){return this.seconds===t.seconds?yt(this.nanoseconds,t.nanoseconds):yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(la(t,Ht._jsonSchema))return new Ht(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ig;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:re("string",Ht._jsonSchemaVersion),seconds:re("number"),nanoseconds:re("number")};class ut{static fromTimestamp(t){return new ut(t)}static min(){return new ut(new Ht(0,0))}static max(){return new ut(new Ht(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Uo=-1;function Nx(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(s===1e9?new Ht(e+1,0):new Ht(e,s));return new js(i,nt.empty(),t)}function Lx(n){return new js(n.readTime,n.key,Uo)}class js{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new js(ut.min(),nt.empty(),Uo)}static max(){return new js(ut.max(),nt.empty(),Uo)}}function Fx(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=nt.comparator(n.documentKey,t.documentKey),e!==0?e:yt(n.largestBatchId,t.largestBatchId))}const Ux="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Tr(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==Ux)throw n;tt("LocalStore","Unexpectedly lost primary lease")}class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new H(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(e,r).next(s,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof H?e:H.resolve(e)}catch(e){return H.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):H.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):H.reject(e)}static resolve(t){return new H(((e,s)=>{e(t)}))}static reject(t){return new H(((e,s)=>{s(t)}))}static waitFor(t){return new H(((e,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&e()}),(l=>s(l)))})),o=!0,r===i&&e()}))}static or(t){let e=H.resolve(!1);for(const s of t)e=e.next((i=>i?H.resolve(i):s()));return e}static forEach(t,e){const s=[];return t.forEach(((i,r)=>{s.push(e.call(this,i,r))})),this.waitFor(s)}static mapArray(t,e){return new H(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;e(t[u]).next((h=>{o[u]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,e){return new H(((s,i)=>{const r=()=>{t()===!0?e().next((()=>{r()}),i):s()};r()}))}}function jx(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ir(n){return n.name==="IndexedDbTransactionError"}class pc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>e.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}pc.ce=-1;const od=-1;function gc(n){return n==null}function kl(n){return n===0&&1/n==-1/0}function zx(n){return typeof n=="number"&&Number.isInteger(n)&&!kl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const wv="";function Hx(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=og(t)),t=$x(n.get(e),t);return og(t)}function $x(n,t){let e=t;const s=n.length;for(let i=0;i<s;i++){const r=n.charAt(i);switch(r){case"\0":e+="";break;case wv:e+="";break;default:e+=r}}return e}function og(n){return n+wv+""}function ag(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Js(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Ev(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Kt{constructor(t,e){this.comparator=t,this.root=e||ye.EMPTY}insert(t,e){return new Kt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Kt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return e+s.left.size;i<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,s)=>(t(e,s),!1)))}toString(){const t=[];return this.inorderTraversal(((e,s)=>(t.push(`${e}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Da(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Da(this.root,t,this.comparator,!1)}getReverseIterator(){return new Da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Da(this.root,t,this.comparator,!0)}}class Da{constructor(t,e,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?s(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,e,s,i,r){this.key=t,this.value=e,this.color=s??ye.RED,this.left=i??ye.EMPTY,this.right=r??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,i,r){return new ye(t??this.key,e??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,s),null):r===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return ye.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ot(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(t,e,s,i,r){return this}insert(t,e,s){return new ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class he{constructor(t){this.comparator=t,this.data=new Kt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,s)=>(t(e),!1)))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(t){return new lg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((s=>{e=e.add(s)})),e}isEqual(t){if(!(t instanceof he)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new he(this.comparator);return e.data=t,e}}class lg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nn{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new nn([])}unionWith(t){let e=new he(ve.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new nn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return fr(this.fields,t.fields,((e,s)=>e.isEqual(s)))}}class Tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class we{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Tv("Invalid base64 string: "+r):r}})(t);return new we(e)}static fromUint8Array(t){const e=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new we(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const s=new Uint8Array(e.length);for(let i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}we.EMPTY_BYTE_STRING=new we("");const Wx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(n){if(Dt(!!n,39018),typeof n=="string"){let t=0;const e=Wx.exec(n);if(Dt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Xt(n.seconds),nanos:Xt(n.nanos)}}function Xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hs(n){return typeof n=="string"?we.fromBase64String(n):we.fromUint8Array(n)}const Iv="server_timestamp",Av="__type__",Sv="__previous_value__",xv="__local_write_time__";function ad(n){return(n?.mapValue?.fields||{})[Av]?.stringValue===Iv}function mc(n){const t=n.mapValue.fields[Sv];return ad(t)?mc(t):t}function Bo(n){const t=zs(n.mapValue.fields[xv].timestampValue);return new Ht(t.seconds,t.nanos)}class qx{constructor(t,e,s,i,r,o,a,l,u,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=d}}const Dl="(default)";class jo{constructor(t,e){this.projectId=t,this.database=e||Dl}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database===Dl}isEqual(t){return t instanceof jo&&t.projectId===this.projectId&&t.database===this.database}}function Kx(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(n.options.projectId,t)}const Cv="__type__",Gx="__max__",Ma={mapValue:{}},Rv="__vector__",Ml="value";function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ad(n)?4:Qx(n)?9007199254740991:Yx(n)?10:11:ot(28295,{value:n})}function Bn(n,t){if(n===t)return!0;const e=$s(n);if(e!==$s(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Bo(n).isEqual(Bo(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=zs(i.timestampValue),a=zs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(i,r){return Hs(i.bytesValue).isEqual(Hs(r.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(i,r){return Xt(i.geoPointValue.latitude)===Xt(r.geoPointValue.latitude)&&Xt(i.geoPointValue.longitude)===Xt(r.geoPointValue.longitude)})(n,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return Xt(i.integerValue)===Xt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Xt(i.doubleValue),a=Xt(r.doubleValue);return o===a?kl(o)===kl(a):isNaN(o)&&isNaN(a)}return!1})(n,t);case 9:return fr(n.arrayValue.values||[],t.arrayValue.values||[],Bn);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(ag(o)!==ag(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0})(n,t);default:return ot(52216,{left:n})}}function zo(n,t){return(n.values||[]).find((e=>Bn(e,t)))!==void 0}function pr(n,t){if(n===t)return 0;const e=$s(n),s=$s(t);if(e!==s)return yt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=Xt(r.integerValue||r.doubleValue),l=Xt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,t);case 3:return cg(n.timestampValue,t.timestampValue);case 4:return cg(Bo(n),Bo(t));case 5:return ih(n.stringValue,t.stringValue);case 6:return(function(r,o){const a=Hs(r),l=Hs(o);return a.compareTo(l)})(n.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=yt(a[u],l[u]);if(h!==0)return h}return yt(a.length,l.length)})(n.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=yt(Xt(r.latitude),Xt(o.latitude));return a!==0?a:yt(Xt(r.longitude),Xt(o.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return ug(n.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},u=a[Ml]?.arrayValue,h=l[Ml]?.arrayValue,d=yt(u?.values?.length||0,h?.values?.length||0);return d!==0?d:ug(u,h)})(n.mapValue,t.mapValue);case 11:return(function(r,o){if(r===Ma.mapValue&&o===Ma.mapValue)return 0;if(r===Ma.mapValue)return 1;if(o===Ma.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ih(l[d],h[d]);if(p!==0)return p;const m=pr(a[l[d]],u[h[d]]);if(m!==0)return m}return yt(l.length,h.length)})(n.mapValue,t.mapValue);default:throw ot(23264,{he:e})}}function cg(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return yt(n,t);const e=zs(n),s=zs(t),i=yt(e.seconds,s.seconds);return i!==0?i:yt(e.nanos,s.nanos)}function ug(n,t){const e=n.values||[],s=t.values||[];for(let i=0;i<e.length&&i<s.length;++i){const r=pr(e[i],s[i]);if(r)return r}return yt(e.length,s.length)}function gr(n){return rh(n)}function rh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const s=zs(e);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Hs(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return nt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let s="[",i=!0;for(const r of e.values||[])i?i=!1:s+=",",s+=rh(r);return s+"]"})(n.arrayValue):"mapValue"in n?(function(e){const s=Object.keys(e.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${rh(e.fields[o])}`;return i+"}"})(n.mapValue):ot(61005,{value:n})}function rl(n){switch($s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mc(n);return t?16+rl(t):16;case 5:return 2*n.stringValue.length;case 6:return Hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+rl(r)),0)})(n.arrayValue);case 10:case 11:return(function(s){let i=0;return Js(s.fields,((r,o)=>{i+=r.length+rl(o)})),i})(n.mapValue);default:throw ot(13486,{value:n})}}function hg(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function oh(n){return!!n&&"integerValue"in n}function ld(n){return!!n&&"arrayValue"in n}function dg(n){return!!n&&"nullValue"in n}function fg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ol(n){return!!n&&"mapValue"in n}function Yx(n){return(n?.mapValue?.fields||{})[Cv]?.stringValue===Rv}function Io(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Js(n.mapValue.fields,((e,s)=>t.mapValue.fields[e]=Io(s))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Io(n.arrayValue.values[e]);return t}return{...n}}function Qx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Gx}class ze{constructor(t){this.value=t}static empty(){return new ze({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!ol(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Io(e)}setAll(t){let e=ve.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,s,i),s={},i=[],e=a.popLast()}o?s[a.lastSegment()]=Io(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,s,i)}delete(t){const e=this.field(t.popLast());ol(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Bn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=e.mapValue.fields[t.get(s)];ol(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,s){Js(e,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new ze(Io(this.value))}}function Pv(n){const t=[];return Js(n.fields,((e,s)=>{const i=new ve([e]);if(ol(s)){const r=Pv(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new nn(t)}class Re{constructor(t,e,s,i,r,o,a){this.key=t,this.documentType=e,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Re(t,0,ut.min(),ut.min(),ut.min(),ze.empty(),0)}static newFoundDocument(t,e,s,i){return new Re(t,1,e,ut.min(),s,i,0)}static newNoDocument(t,e){return new Re(t,2,e,ut.min(),ut.min(),ze.empty(),0)}static newUnknownDocument(t,e){return new Re(t,3,e,ut.min(),ut.min(),ze.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ol{constructor(t,e){this.position=t,this.inclusive=e}}function pg(n,t,e){let s=0;for(let i=0;i<n.position.length;i++){const r=t[i],o=n.position[i];if(r.field.isKeyField()?s=nt.comparator(nt.fromName(o.referenceValue),e.key):s=pr(o,e.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function gg(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Bn(n.position[e],t.position[e]))return!1;return!0}class Ho{constructor(t,e="asc"){this.field=t,this.dir=e}}function Xx(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class kv{}class ie extends kv{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new Zx(t,e,s):e==="array-contains"?new nC(t,s):e==="in"?new sC(t,s):e==="not-in"?new iC(t,s):e==="array-contains-any"?new rC(t,s):new ie(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new tC(t,s):new eC(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(pr(e,this.value)):e!==null&&$s(this.value)===$s(e)&&this.matchesComparison(pr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends kv{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new vn(t,e)}matches(t){return Dv(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dv(n){return n.op==="and"}function Mv(n){return Jx(n)&&Dv(n)}function Jx(n){for(const t of n.filters)if(t instanceof vn)return!1;return!0}function ah(n){if(n instanceof ie)return n.field.canonicalString()+n.op.toString()+gr(n.value);if(Mv(n))return n.filters.map((t=>ah(t))).join(",");{const t=n.filters.map((e=>ah(e))).join(",");return`${n.op}(${t})`}}function Ov(n,t){return n instanceof ie?(function(s,i){return i instanceof ie&&s.op===i.op&&s.field.isEqual(i.field)&&Bn(s.value,i.value)})(n,t):n instanceof vn?(function(s,i){return i instanceof vn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&Ov(o,i.filters[a])),!0):!1})(n,t):void ot(19439)}function Vv(n){return n instanceof ie?(function(e){return`${e.field.canonicalString()} ${e.op} ${gr(e.value)}`})(n):n instanceof vn?(function(e){return e.op.toString()+" {"+e.getFilters().map(Vv).join(" ,")+"}"})(n):"Filter"}class Zx extends ie{constructor(t,e,s){super(t,e,s),this.key=nt.fromName(s.referenceValue)}matches(t){const e=nt.comparator(t.key,this.key);return this.matchesComparison(e)}}class tC extends ie{constructor(t,e){super(t,"in",e),this.keys=Nv("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class eC extends ie{constructor(t,e){super(t,"not-in",e),this.keys=Nv("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Nv(n,t){return(t.arrayValue?.values||[]).map((e=>nt.fromName(e.referenceValue)))}class nC extends ie{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ld(e)&&zo(e.arrayValue,this.value)}}class sC extends ie{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&zo(this.value.arrayValue,e)}}class iC extends ie{constructor(t,e){super(t,"not-in",e)}matches(t){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!zo(this.value.arrayValue,e)}}class rC extends ie{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ld(e)||!e.arrayValue.values)&&e.arrayValue.values.some((s=>zo(this.value.arrayValue,s)))}}class oC{constructor(t,e=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function mg(n,t=null,e=[],s=[],i=null,r=null,o=null){return new oC(n,t,e,s,i,r,o)}function cd(n){const t=dt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((s=>ah(s))).join(","),e+="|ob:",e+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),gc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((s=>gr(s))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((s=>gr(s))).join(",")),t.Te=e}return t.Te}function ud(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Xx(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Ov(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!gg(n.startAt,t.startAt)&&gg(n.endAt,t.endAt)}function lh(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ar{constructor(t,e=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function aC(n,t,e,s,i,r,o,a){return new Ar(n,t,e,s,i,r,o,a)}function _c(n){return new Ar(n)}function _g(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lC(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lv(n){return n.collectionGroup!==null}function Ao(n){const t=dt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new he(ve.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ho(r,s))})),e.has(ve.keyField().canonicalString())||t.Ie.push(new Ho(ve.keyField(),s))}return t.Ie}function Vn(n){const t=dt(n);return t.Ee||(t.Ee=cC(t,Ao(n))),t.Ee}function cC(n,t){if(n.limitType==="F")return mg(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new Ho(i.field,r)}));const e=n.endAt?new Ol(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ol(n.startAt.position,n.startAt.inclusive):null;return mg(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function ch(n,t){const e=n.filters.concat([t]);return new Ar(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function uC(n,t){const e=n.explicitOrderBy.concat([t]);return new Ar(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function uh(n,t,e){return new Ar(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function yc(n,t){return ud(Vn(n),Vn(t))&&n.limitType===t.limitType}function Fv(n){return`${cd(Vn(n))}|lt:${n.limitType}`}function Gi(n){return`Query(target=${(function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map((i=>Vv(i))).join(", ")}]`),gc(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>gr(i))).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>gr(i))).join(",")),`Target(${s})`})(Vn(n))}; limitType=${n.limitType})`}function vc(n,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):nt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(n,t)&&(function(s,i){for(const r of Ao(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(n,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(n,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Ao(s),i)||s.endAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Ao(s),i))})(n,t)}function hC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uv(n){return(t,e)=>{let s=!1;for(const i of Ao(n)){const r=dC(i,t,e);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function dC(n,t,e){const s=n.field.isKeyField()?nt.comparator(t.key,e.key):(function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?pr(l,u):ot(42886)})(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ot(19790,{direction:n.dir})}}class Mi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[e]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Js(this.inner,((e,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return Ev(this.inner)}size(){return this.innerSize}}const fC=new Kt(nt.comparator);function ls(){return fC}const Bv=new Kt(nt.comparator);function ao(...n){let t=Bv;for(const e of n)t=t.insert(e.key,e);return t}function jv(n){let t=Bv;return n.forEach(((e,s)=>t=t.insert(e,s.overlayedDocument))),t}function mi(){return So()}function zv(){return So()}function So(){return new Mi((n=>n.toString()),((n,t)=>n.isEqual(t)))}const pC=new Kt(nt.comparator),gC=new he(nt.comparator);function vt(...n){let t=gC;for(const e of n)t=t.add(e);return t}const mC=new he(yt);function _C(){return mC}function hd(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(t)?"-0":t}}function Hv(n){return{integerValue:""+n}}function $v(n,t){return zx(t)?Hv(t):hd(n,t)}class bc{constructor(){this._=void 0}}function yC(n,t,e){return n instanceof $o?(function(i,r){const o={fields:{[Av]:{stringValue:Iv},[xv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&ad(r)&&(r=mc(r)),r&&(o.fields[Sv]=r),{mapValue:o}})(e,t):n instanceof Wo?qv(n,t):n instanceof qo?Kv(n,t):(function(i,r){const o=Wv(i,r),a=yg(o)+yg(i.Ae);return oh(o)&&oh(i.Ae)?Hv(a):hd(i.serializer,a)})(n,t)}function vC(n,t,e){return n instanceof Wo?qv(n,t):n instanceof qo?Kv(n,t):e}function Wv(n,t){return n instanceof Ko?(function(s){return oh(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class $o extends bc{}class Wo extends bc{constructor(t){super(),this.elements=t}}function qv(n,t){const e=Gv(t);for(const s of n.elements)e.some((i=>Bn(i,s)))||e.push(s);return{arrayValue:{values:e}}}class qo extends bc{constructor(t){super(),this.elements=t}}function Kv(n,t){let e=Gv(t);for(const s of n.elements)e=e.filter((i=>!Bn(i,s)));return{arrayValue:{values:e}}}class Ko extends bc{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function yg(n){return Xt(n.integerValue||n.doubleValue)}function Gv(n){return ld(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yv{constructor(t,e){this.field=t,this.transform=e}}function bC(n,t){return n.field.isEqual(t.field)&&(function(s,i){return s instanceof Wo&&i instanceof Wo||s instanceof qo&&i instanceof qo?fr(s.elements,i.elements,Bn):s instanceof Ko&&i instanceof Ko?Bn(s.Ae,i.Ae):s instanceof $o&&i instanceof $o})(n.transform,t.transform)}class wC{constructor(t,e){this.version=t,this.transformResults=e}}class cn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new cn}static exists(t){return new cn(void 0,t)}static updateTime(t){return new cn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function al(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class wc{}function Qv(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new dd(n.key,cn.none()):new ca(n.key,n.data,cn.none());{const e=n.data,s=ze.empty();let i=new he(ve.comparator);for(let r of t.fields)if(!i.has(r)){let o=e.field(r);o===null&&r.length>1&&(r=r.popLast(),o=e.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Zs(n.key,s,new nn(i.toArray()),cn.none())}}function EC(n,t,e){n instanceof ca?(function(i,r,o){const a=i.value.clone(),l=bg(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,t,e):n instanceof Zs?(function(i,r,o){if(!al(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=bg(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(Xv(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,t,e):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,e)}function xo(n,t,e,s){return n instanceof ca?(function(r,o,a,l){if(!al(r.precondition,o))return a;const u=r.value.clone(),h=wg(r.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,t,e,s):n instanceof Zs?(function(r,o,a,l){if(!al(r.precondition,o))return a;const u=wg(r.fieldTransforms,l,o),h=o.data;return h.setAll(Xv(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(n,t,e,s):(function(r,o,a){return al(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,t,e)}function TC(n,t){let e=null;for(const s of n.fieldTransforms){const i=t.data.field(s.field),r=Wv(s.transform,i||null);r!=null&&(e===null&&(e=ze.empty()),e.set(s.field,r))}return e||null}function vg(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&fr(s,i,((r,o)=>bC(r,o)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class ca extends wc{constructor(t,e,s,i=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zs extends wc{constructor(t,e,s,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Xv(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}})),t}function bg(n,t,e){const s=new Map;Dt(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let i=0;i<e.length;i++){const r=n[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,vC(o,a,e[i]))}return s}function wg(n,t,e){const s=new Map;for(const i of n){const r=i.transform,o=e.data.field(i.field);s.set(i.field,yC(r,o,t))}return s}class dd extends wc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IC extends wc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AC{constructor(t,e,s,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&EC(r,t,s[i])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=xo(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=xo(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=zv();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=e.has(i.key)?null:a;const l=Qv(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ut.min())})),s}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),vt())}isEqual(t){return this.batchId===t.batchId&&fr(this.mutations,t.mutations,((e,s)=>vg(e,s)))&&fr(this.baseMutations,t.baseMutations,((e,s)=>vg(e,s)))}}class fd{constructor(t,e,s,i){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=i}static from(t,e,s){Dt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return pC})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new fd(t,e,s,i)}}class SC{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xC{constructor(t,e){this.count=t,this.unchangedNames=e}}var ne,Et;function CC(n){switch(n){case z.OK:return ot(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ot(15467,{code:n})}}function Jv(n){if(n===void 0)return as("GRPC error has no .code"),z.UNKNOWN;switch(n){case ne.OK:return z.OK;case ne.CANCELLED:return z.CANCELLED;case ne.UNKNOWN:return z.UNKNOWN;case ne.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ne.INTERNAL:return z.INTERNAL;case ne.UNAVAILABLE:return z.UNAVAILABLE;case ne.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ne.NOT_FOUND:return z.NOT_FOUND;case ne.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ne.ABORTED:return z.ABORTED;case ne.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ne.DATA_LOSS:return z.DATA_LOSS;default:return ot(39323,{code:n})}}(Et=ne||(ne={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";function RC(){return new TextEncoder}const PC=new Vs([4294967295,4294967295],0);function Eg(n){const t=RC().encode(n),e=new hv;return e.update(t),new Uint8Array(e.digest())}function Tg(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Vs([e,s],0),new Vs([i,r],0)]}class pd{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new lo(`Invalid padding: ${e}`);if(s<0)throw new lo(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new lo(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new lo(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Vs.fromNumber(this.ge)}ye(t,e,s){let i=t.add(e.multiply(Vs.fromNumber(s)));return i.compare(PC)===1&&(i=new Vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Eg(t),[s,i]=Tg(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,e,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new pd(r,i,e);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const e=Eg(t),[s,i]=Tg(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.be(o)}}be(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ec{constructor(t,e,s,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const i=new Map;return i.set(t,ua.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Ec(ut.min(),i,new Kt(yt),ls(),vt())}}class ua{constructor(t,e,s,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new ua(s,e,vt(),vt(),vt())}}class ll{constructor(t,e,s,i){this.Se=t,this.removedTargetIds=e,this.key=s,this.De=i}}class Zv{constructor(t,e){this.targetId=t,this.Ce=e}}class tb{constructor(t,e,s=we.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=i}}class Ig{constructor(){this.ve=0,this.Fe=Ag(),this.Me=we.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=vt(),e=vt(),s=vt();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:s=s.add(i);break;default:ot(38017,{changeType:r})}})),new ua(this.Me,this.xe,t,e,s)}Ke(){this.Oe=!1,this.Fe=Ag()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kC{constructor(t){this.Ge=t,this.ze=new Map,this.je=ls(),this.He=Oa(),this.Je=Oa(),this.Ze=new Kt(yt)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const s=this.nt(e);switch(t.state){case 0:this.rt(e)&&s.Le(t.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(t.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(s.Qe(),s.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),s.Le(t.resumeToken));break;default:ot(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((s,i)=>{this.rt(i)&&e(i)}))}st(t){const e=t.targetId,s=t.Ce.count,i=this.ot(e);if(i){const r=i.target;if(lh(r))if(s===0){const o=new nt(r.path);this.et(e,o,Re.newNoDocument(o,ut.min()))}else Dt(s===1,20013,{expectedCount:s});else{const o=this._t(e);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(e);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,u)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=e;let o,a;try{o=Hs(s).toUint8Array()}catch(l){if(l instanceof Tv)return xi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new pd(o,i,r)}catch(l){return xi(l instanceof lo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,e,s){return e.Ce.count===s-this.Pt(t,e.targetId)?0:2}Pt(t,e){const s=this.Ge.getRemoteKeysForTarget(e);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(e,r,null),i++)})),i}Tt(t){const e=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&lh(a.target)){const l=new nt(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Re.newNoDocument(l,t))}r.Be&&(e.set(o,r.ke()),r.Ke())}}));let s=vt();this.Je.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new Ec(t,e,this.Ze,this.je,s);return this.je=ls(),this.He=Oa(),this.Je=Oa(),this.Ze=new Kt(yt),i}Ye(t,e){if(!this.rt(t))return;const s=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,s),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.qe(e,1):i.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),s&&(this.je=this.je.insert(e,s))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new Ig,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new he(yt),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new he(yt),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Ig),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Oa(){return new Kt(nt.comparator)}function Ag(){return new Kt(nt.comparator)}const DC={asc:"ASCENDING",desc:"DESCENDING"},MC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class VC{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function hh(n,t){return n.useProto3Json||gc(t)?t:{value:t}}function Vl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eb(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function NC(n,t){return Vl(n,t.toTimestamp())}function Nn(n){return Dt(!!n,49232),ut.fromTimestamp((function(e){const s=zs(e);return new Ht(s.seconds,s.nanos)})(n))}function gd(n,t){return dh(n,t).canonicalString()}function dh(n,t){const e=(function(i){return new Bt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return t===void 0?e:e.child(t)}function nb(n){const t=Bt.fromString(n);return Dt(ab(t),10190,{key:t.toString()}),t}function fh(n,t){return gd(n.databaseId,t.path)}function fu(n,t){const e=nb(t);if(e.get(1)!==n.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new nt(ib(e))}function sb(n,t){return gd(n.databaseId,t)}function LC(n){const t=nb(n);return t.length===4?Bt.emptyPath():ib(t)}function ph(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ib(n){return Dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Sg(n,t,e){return{name:fh(n,t),fields:e.value.mapValue.fields}}function FC(n,t){let e;if("targetChange"in t){t.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ot(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(u,h){return u.useProto3Json?(Dt(h===void 0||typeof h=="string",58123),we.fromBase64String(h||"")):(Dt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),we.fromUint8Array(h||new Uint8Array))})(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?z.UNKNOWN:Jv(u.code);return new Z(h,u.message||"")})(o);e=new tb(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=fu(n,s.document.name),r=Nn(s.document.updateTime),o=s.document.createTime?Nn(s.document.createTime):ut.min(),a=new ze({mapValue:{fields:s.document.fields}}),l=Re.newFoundDocument(i,r,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];e=new ll(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=fu(n,s.document),r=s.readTime?Nn(s.readTime):ut.min(),o=Re.newNoDocument(i,r),a=s.removedTargetIds||[];e=new ll([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=fu(n,s.document),r=s.removedTargetIds||[];e=new ll([],r,i,null)}else{if(!("filter"in t))return ot(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new xC(i,r),a=s.targetId;e=new Zv(a,o)}}return e}function UC(n,t){let e;if(t instanceof ca)e={update:Sg(n,t.key,t.value)};else if(t instanceof dd)e={delete:fh(n,t.key)};else if(t instanceof Zs)e={update:Sg(n,t.key,t.data),updateMask:GC(t.fieldMask)};else{if(!(t instanceof IC))return ot(16599,{dt:t.type});e={verify:fh(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof $o)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ot(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(e.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:NC(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ot(27497)})(n,t.precondition)),e}function BC(n,t){return n&&n.length>0?(Dt(t!==void 0,14353),n.map((e=>(function(i,r){let o=i.updateTime?Nn(i.updateTime):Nn(r);return o.isEqual(ut.min())&&(o=Nn(r)),new wC(o,i.transformResults||[])})(e,t)))):[]}function jC(n,t){return{documents:[sb(n,t.path)]}}function zC(n,t){const e={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=sb(n,i);const r=(function(u){if(u.length!==0)return ob(vn.create(u,"and"))})(t.filters);r&&(e.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Yi(p.field),direction:WC(p.dir)}})(h)))})(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=hh(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:e,parent:i}}function HC(n){let t=LC(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let i=null;if(s>0){Dt(s===1,65062);const h=e.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];e.where&&(r=(function(d){const p=rb(d);return p instanceof vn&&Mv(p)?p.getFilters():[p]})(e.where));let o=[];e.orderBy&&(o=(function(d){return d.map((p=>(function(w){return new Ho(Qi(w.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(p)))})(e.orderBy));let a=null;e.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,gc(p)?null:p})(e.limit));let l=null;e.startAt&&(l=(function(d){const p=!!d.before,m=d.values||[];return new Ol(m,p)})(e.startAt));let u=null;return e.endAt&&(u=(function(d){const p=!d.before,m=d.values||[];return new Ol(m,p)})(e.endAt)),aC(t,i,o,r,a,"F",l,u)}function $C(n,t){const e=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:i})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function rb(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Qi(e.unaryFilter.field);return ie.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Qi(e.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qi(e.unaryFilter.field);return ie.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qi(e.unaryFilter.field);return ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(n):n.fieldFilter!==void 0?(function(e){return ie.create(Qi(e.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return vn.create(e.compositeFilter.filters.map((s=>rb(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(e.compositeFilter.op))})(n):ot(30097,{filter:n})}function WC(n){return DC[n]}function qC(n){return MC[n]}function KC(n){return OC[n]}function Yi(n){return{fieldPath:n.canonicalString()}}function Qi(n){return ve.fromServerFormat(n.fieldPath)}function ob(n){return n instanceof ie?(function(e){if(e.op==="=="){if(fg(e.value))return{unaryFilter:{field:Yi(e.field),op:"IS_NAN"}};if(dg(e.value))return{unaryFilter:{field:Yi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(fg(e.value))return{unaryFilter:{field:Yi(e.field),op:"IS_NOT_NAN"}};if(dg(e.value))return{unaryFilter:{field:Yi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yi(e.field),op:qC(e.op),value:e.value}}})(n):n instanceof vn?(function(e){const s=e.getFilters().map((i=>ob(i)));return s.length===1?s[0]:{compositeFilter:{op:KC(e.op),filters:s}}})(n):ot(54877,{filter:n})}function GC(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ab(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function lb(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Ss{constructor(t,e,s,i,r=ut.min(),o=ut.min(),a=we.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ss(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class YC{constructor(t){this.yt=t}}function QC(n){const t=HC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uh(t,t.limit,"L"):t}class XC{constructor(){this.Sn=new JC}addToCollectionParentIndex(t,e){return this.Sn.add(e),H.resolve()}getCollectionParents(t,e){return H.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return H.resolve()}deleteFieldIndex(t,e){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,e){return H.resolve()}getDocumentsMatchingTarget(t,e){return H.resolve(null)}getIndexType(t,e){return H.resolve(0)}getFieldIndexes(t,e){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,e){return H.resolve(js.min())}getMinOffsetFromCollectionGroup(t,e){return H.resolve(js.min())}updateCollectionGroup(t,e,s){return H.resolve()}updateIndexEntries(t,e){return H.resolve()}}class JC{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e]||new he(Bt.comparator),r=!i.has(s);return this.index[e]=i.add(s),r}has(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e];return i&&i.has(s)}getEntries(t){return(this.index[t]||new he(Bt.comparator)).toArray()}}const xg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cb=41943040;class je{static withCacheSize(t){return new je(t,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}je.DEFAULT_COLLECTION_PERCENTILE=10,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,je.DEFAULT=new je(cb,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),je.DISABLED=new je(-1,0,0);class mr{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new mr(0)}static ar(){return new mr(-1)}}const Cg="LruGarbageCollector",ZC=1048576;function Rg([n,t],[e,s]){const i=yt(n,e);return i===0?yt(t,s):i}class tR{constructor(t){this.Pr=t,this.buffer=new he(Rg),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Rg(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class eR{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){tt(Cg,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ir(e)?tt(Cg,"Ignoring IndexedDB error during garbage collection: ",e):await Tr(e)}await this.Ar(3e5)}))}}class nR{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((s=>Math.floor(e/100*s)))}nthSequenceNumber(t,e){if(e===0)return H.resolve(pc.ce);const s=new tR(e);return this.Vr.forEachTarget(t,(i=>s.Er(i.sequenceNumber))).next((()=>this.Vr.mr(t,(i=>s.Er(i))))).next((()=>s.maxValue))}removeTargets(t,e,s){return this.Vr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(xg)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xg):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let s,i,r,o,a,l,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,e)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(u=Date.now(),Ki()<=_t.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function sR(n,t){return new nR(n,t)}class iR{constructor(){this.changes=new Mi((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Re.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?H.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class rR{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class oR{constructor(t,e,s,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,e)))).next((i=>(s!==null&&xo(s.mutation,i,nn.empty(),Ht.now()),i)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.getLocalViewOfDocuments(t,s,vt()).next((()=>s))))}getLocalViewOfDocuments(t,e,s=vt()){const i=mi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,s).next((r=>{let o=ao();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,e){const s=mi();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,vt())))}populateOverlays(t,e,s){const i=[];return s.forEach((r=>{e.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{e.set(o,a)}))}))}computeViews(t,e,s,i){let r=ls();const o=So(),a=(function(){return So()})();return e.forEach(((l,u)=>{const h=s.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Zs)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),xo(h.mutation,u,h.mutation.getFieldMask(),Ht.now())):o.set(u.key,nn.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((u,h)=>o.set(u,h))),e.forEach(((u,h)=>a.set(u,new rR(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(t,e){const s=So();let i=new Kt(((o,a)=>o-a)),r=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=e.get(l);if(u===null)return;let h=s.get(l)||nn.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(i.get(a.batchId)||vt()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=zv();h.forEach((p=>{if(!r.has(p)){const m=Qv(e.get(p),s.get(p));m!==null&&d.set(p,m),r=r.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return H.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,e,s,i){return lC(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Lv(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,i):this.getDocumentsMatchingCollectionQuery(t,e,s,i)}getNextDocuments(t,e,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,i-r.size):H.resolve(mi());let a=Uo,l=r;return o.next((u=>H.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?H.resolve():this.remoteDocumentCache.getEntry(t,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,l,u,vt()))).next((h=>({batchId:a,changes:jv(h)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nt(e)).next((s=>{let i=ao();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,e,s,i){const r=e.collectionGroup;let o=ao();return this.indexManager.getCollectionParents(t,r).next((a=>H.forEach(a,(l=>{const u=(function(d,p){return new Ar(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(e,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,s,i).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,r,i)))).next((o=>{r.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Re.newInvalidDocument(h)))}));let a=ao();return o.forEach(((l,u)=>{const h=r.get(l);h!==void 0&&xo(h.mutation,u,nn.empty(),Ht.now()),vc(e,u)&&(a=a.insert(l,u))})),a}))}}class aR{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return H.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}})(e)),H.resolve()}getNamedQuery(t,e){return H.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(i){return{name:i.name,query:QC(i.bundledQuery),readTime:Nn(i.readTime)}})(e)),H.resolve()}}class lR{constructor(){this.overlays=new Kt(nt.comparator),this.Lr=new Map}getOverlay(t,e){return H.resolve(this.overlays.get(e))}getOverlays(t,e){const s=mi();return H.forEach(e,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,e,s){return s.forEach(((i,r)=>{this.bt(t,e,r)})),H.resolve()}removeOverlaysForBatchId(t,e,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.Lr.delete(s)),H.resolve()}getOverlaysForCollection(t,e,s){const i=mi(),r=e.length+1,o=new nt(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(t,e,s,i){let r=new Kt(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>s){let h=r.get(u.largestBatchId);h===null&&(h=mi(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=mi(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=i)););return H.resolve(a)}bt(t,e,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new SC(e,s));let r=this.Lr.get(e);r===void 0&&(r=vt(),this.Lr.set(e,r)),this.Lr.set(e,r.add(s.key))}}class cR{constructor(){this.sessionToken=we.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,H.resolve()}}class md{constructor(){this.kr=new he(pe.Kr),this.qr=new he(pe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const s=new pe(t,e);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(t,e){t.forEach((s=>this.addReference(s,e)))}removeReference(t,e){this.Wr(new pe(t,e))}Qr(t,e){t.forEach((s=>this.removeReference(s,e)))}Gr(t){const e=new nt(new Bt([])),s=new pe(e,t),i=new pe(e,t+1),r=[];return this.qr.forEachInRange([s,i],(o=>{this.Wr(o),r.push(o.key)})),r}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new nt(new Bt([])),s=new pe(e,t),i=new pe(e,t+1);let r=vt();return this.qr.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const e=new pe(t,0),s=this.kr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class pe{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return nt.comparator(t.key,e.key)||yt(t.Hr,e.Hr)}static Ur(t,e){return yt(t.Hr,e.Hr)||nt.comparator(t.key,e.key)}}class uR{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new he(pe.Kr)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AC(r,e,s,i);this.mutationQueue.push(o);for(const a of i)this.Jr=this.Jr.add(new pe(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(t,e){return H.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,i=this.Xr(s),r=i<0?0:i;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?od:this.Yn-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new pe(e,0),i=new pe(e,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([s,i],(o=>{const a=this.Zr(o.Hr);r.push(a)})),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new he(yt);return e.forEach((i=>{const r=new pe(i,0),o=new pe(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,o],(a=>{s=s.add(a.Hr)}))})),H.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,i=s.length+1;let r=s;nt.isDocumentKey(r)||(r=r.child(""));const o=new pe(new nt(r),0);let a=new he(yt);return this.Jr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)}),o),H.resolve(this.Yr(a))}Yr(t){const e=[];return t.forEach((s=>{const i=this.Zr(s);i!==null&&e.push(i)})),e}removeMutationBatch(t,e){Dt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return H.forEach(e.mutations,(i=>{const r=new pe(i.key,e.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Jr=s}))}nr(t){}containsKey(t,e){const s=new pe(e,0),i=this.Jr.firstAfterOrEqual(s);return H.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class hR{constructor(t){this.ti=t,this.docs=(function(){return new Kt(nt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,i=this.docs.get(s),r=i?i.size:0,o=this.ti(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return H.resolve(s?s.document.mutableCopy():Re.newInvalidDocument(e))}getEntries(t,e){let s=ls();return e.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Re.newInvalidDocument(i))})),H.resolve(s)}getDocumentsMatchingQuery(t,e,s,i){let r=ls();const o=e.path,a=new nt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Fx(Lx(h),s)<=0||(i.has(h.key)||vc(e,h))&&(r=r.insert(h.key,h.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(t,e,s,i){ot(9500)}ni(t,e){return H.forEach(this.docs,(s=>e(s)))}newChangeBuffer(t){return new dR(this)}getSize(t){return H.resolve(this.size)}}class dR extends iR{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?e.push(this.Mr.addEntry(t,i)):this.Mr.removeEntry(s)})),H.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class fR{constructor(t){this.persistence=t,this.ri=new Mi((e=>cd(e)),ud),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ii=0,this.si=new md,this.targetCount=0,this.oi=mr._r()}forEachTarget(t,e){return this.ri.forEach(((s,i)=>e(i))),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.ii&&(this.ii=e),H.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new mr(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,H.resolve()}updateTargetData(t,e){return this.lr(e),H.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,e,s){let i=0;const r=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=e&&s.get(a.targetId)===null&&(this.ri.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),H.waitFor(r).next((()=>i))}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,e){const s=this.ri.get(e)||null;return H.resolve(s)}addMatchingKeys(t,e,s){return this.si.$r(e,s),H.resolve()}removeMatchingKeys(t,e,s){this.si.Qr(e,s);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),H.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),H.resolve()}getMatchingKeysForTargetId(t,e){const s=this.si.jr(e);return H.resolve(s)}containsKey(t,e){return H.resolve(this.si.containsKey(e))}}class ub{constructor(t,e){this._i={},this.overlays={},this.ai=new pc(0),this.ui=!1,this.ui=!0,this.ci=new cR,this.referenceDelegate=t(this),this.li=new fR(this),this.indexManager=new XC,this.remoteDocumentCache=(function(i){return new hR(i)})((s=>this.referenceDelegate.hi(s))),this.serializer=new YC(e),this.Pi=new aR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new lR,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this._i[t.toKey()];return s||(s=new uR(e,this.referenceDelegate),this._i[t.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,s){tt("MemoryPersistence","Starting transaction:",t);const i=new pR(this.ai.next());return this.referenceDelegate.Ti(),s(i).next((r=>this.referenceDelegate.Ii(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ei(t,e){return H.or(Object.values(this._i).map((s=>()=>s.containsKey(t,e))))}}class pR extends Bx{constructor(t){super(),this.currentSequenceNumber=t}}class _d{constructor(t){this.persistence=t,this.Ri=new md,this.Ai=null}static Vi(t){return new _d(t)}get di(){if(this.Ai)return this.Ai;throw ot(60996)}addReference(t,e,s){return this.Ri.addReference(s,e),this.di.delete(s.toString()),H.resolve()}removeReference(t,e,s){return this.Ri.removeReference(s,e),this.di.add(s.toString()),H.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),H.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((i=>this.di.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next((i=>{i.forEach((r=>this.di.add(r.toString())))})).next((()=>s.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(s=>{const i=nt.fromPath(s);return this.mi(t,i).next((r=>{r||e.removeEntry(i,ut.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((s=>{s?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return H.or([()=>H.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Nl{constructor(t,e){this.persistence=t,this.fi=new Mi((s=>Hx(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=sR(this,e)}static Vi(t,e){return new Nl(t,e)}Ti(){}Ii(t){return H.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>e.next((i=>s+i))))}pr(t){let e=0;return this.mr(t,(s=>{e++})).next((()=>e))}mr(t,e){return H.forEach(this.fi,((s,i)=>this.wr(t,s,i).next((r=>r?H.resolve():e(i)))))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(t,(o=>this.wr(t,o,e).next((a=>{a||(s++,r.removeEntry(o,ut.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),H.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.fi.set(s,t.currentSequenceNumber),H.resolve()}removeReference(t,e,s){return this.fi.set(s,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),H.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=rl(t.data.value)),e}wr(t,e,s){return H.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.fi.get(e);return H.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class yd{constructor(t,e,s,i){this.targetId=t,this.fromCache=e,this.Ts=s,this.Is=i}static Es(t,e){let s=vt(),i=vt();for(const r of e.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new yd(t,e.fromCache,s,i)}}class gR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class mR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return KI()?8:jx(De())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,s,i){const r={result:null};return this.gs(t,e).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ps(t,e,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new gR;return this.ys(t,e,o).next((a=>{if(r.result=a,this.As)return this.ws(t,e,o,a.size)}))})).next((()=>r.result))}ws(t,e,s,i){return s.documentReadCount<this.Vs?(Ki()<=_t.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Gi(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Ki()<=_t.DEBUG&&tt("QueryEngine","Query:",Gi(e),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(Ki()<=_t.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Gi(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vn(e))):H.resolve())}gs(t,e){if(_g(e))return H.resolve(null);let s=Vn(e);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(e.limit!==null&&i===1&&(e=uh(e,null,"F"),s=Vn(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=vt(...r);return this.fs.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const u=this.bs(e,a);return this.Ss(e,u,o,l.readTime)?this.gs(t,uh(e,null,"F")):this.Ds(t,u,e,l)}))))})))))}ps(t,e,s,i){return _g(e)||i.isEqual(ut.min())?H.resolve(null):this.fs.getDocuments(t,s).next((r=>{const o=this.bs(e,r);return this.Ss(e,o,s,i)?H.resolve(null):(Ki()<=_t.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gi(e)),this.Ds(t,o,e,Nx(i,Uo)).next((a=>a)))}))}bs(t,e){let s=new he(Uv(t));return e.forEach(((i,r)=>{vc(t,r)&&(s=s.add(r))})),s}Ss(t,e,s,i){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(t,e,s){return Ki()<=_t.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Gi(e)),this.fs.getDocumentsMatchingQuery(t,e,js.min(),s)}Ds(t,e,s,i){return this.fs.getDocumentsMatchingQuery(t,s,i).next((r=>(e.forEach((o=>{r=r.insert(o.key,o)})),r)))}}const vd="LocalStore",_R=3e8;class yR{constructor(t,e,s,i){this.persistence=t,this.Cs=e,this.serializer=i,this.vs=new Kt(yt),this.Fs=new Mi((r=>cd(r)),ud),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(s)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new oR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function vR(n,t,e,s){return new yR(n,t,e,s)}async function hb(n,t){const e=dt(n);return await e.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return e.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,e.Os(t),e.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=vt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(s,l).next((u=>({Ns:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function bR(n,t){const e=dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=e.xs.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,p=d.keys();let m=H.resolve();return p.forEach((w=>{m=m.next((()=>h.getEntry(l,w))).next((b=>{const A=u.docVersions.get(w);Dt(A!==null,48541),b.version.compareTo(A)<0&&(d.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(e,s,t,r).next((()=>r.apply(s))).next((()=>e.mutationQueue.performConsistencyCheck(s))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(t)))).next((()=>e.localDocuments.getDocuments(s,i)))}))}function db(n){const t=dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function wR(n,t){const e=dt(n),s=t.snapshotVersion;let i=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=e.xs.newChangeBuffer({trackRemovals:!0});i=e.vs;const a=[];t.targetChanges.forEach(((h,d)=>{const p=i.get(d);if(!p)return;a.push(e.li.removeMatchingKeys(r,h.removedDocuments,d).next((()=>e.li.addMatchingKeys(r,h.addedDocuments,d))));let m=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(we.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),i=i.insert(d,m),(function(b,A,P){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=_R?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(p,m,h)&&a.push(e.li.updateTargetData(r,m))}));let l=ls(),u=vt();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(ER(r,o,t.documentUpdates).next((h=>{l=h.Bs,u=h.Ls}))),!s.isEqual(ut.min())){const h=e.li.getLastRemoteSnapshotVersion(r).next((d=>e.li.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return H.waitFor(a).next((()=>o.apply(r))).next((()=>e.localDocuments.getLocalViewOfDocuments(r,l,u))).next((()=>l))})).then((r=>(e.vs=i,r)))}function ER(n,t,e){let s=vt(),i=vt();return e.forEach((r=>s=s.add(r))),t.getEntries(n,s).next((r=>{let o=ls();return e.forEach(((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ut.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):tt(vd,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{Bs:o,Ls:i}}))}function TR(n,t){const e=dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=od),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function IR(n,t){const e=dt(n);return e.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return e.li.getTargetData(s,t).next((r=>r?(i=r,H.resolve(i)):e.li.allocateTargetId(s).next((o=>(i=new Ss(t,o,"TargetPurposeListen",s.currentSequenceNumber),e.li.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=e.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.vs=e.vs.insert(s.targetId,s),e.Fs.set(t,s.targetId)),s}))}async function gh(n,t,e){const s=dt(n),i=s.vs.get(t),r=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ir(o))throw o;tt(vd,`Failed to update sequence numbers for target ${t}: ${o}`)}s.vs=s.vs.remove(t),s.Fs.delete(i.target)}function Pg(n,t,e){const s=dt(n);let i=ut.min(),r=vt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=dt(l),p=d.Fs.get(h);return p!==void 0?H.resolve(d.vs.get(p)):d.li.getTargetData(u,h)})(s,o,Vn(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Cs.getDocumentsMatchingQuery(o,t,e?i:ut.min(),e?r:vt()))).next((a=>(AR(s,hC(t),a),{documents:a,ks:r})))))}function AR(n,t,e){let s=n.Ms.get(t)||ut.min();e.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),n.Ms.set(t,s)}class kg{constructor(){this.activeTargetIds=_C()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class SR{constructor(){this.vo=new kg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,s){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new kg,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class xR{Mo(t){}shutdown(){}}const Dg="ConnectivityMonitor";class Mg{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){tt(Dg,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){tt(Dg,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Va=null;function mh(){return Va===null?Va=(function(){return 268435456+Math.round(2147483648*Math.random())})():Va++,"0x"+Va.toString(16)}const pu="RestConnection",CR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class RR{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===Dl?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(t,e,s,i,r){const o=mh(),a=this.Qo(t,e.toUriEncodedString());tt(pu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,r);const{host:u}=new URL(a),h=vr(u);return this.zo(t,a,l,s,h).then((d=>(tt(pu,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw xi(pu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}jo(t,e,s,i,r,o){return this.Wo(t,e,s,i,r)}Go(t,e,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Er})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}Qo(t,e){const s=CR[t];let i=`${this.qo}/v1/${e}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class PR{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const Ae="WebChannelConnection",Gr=(n,t,e)=>{n.listen(t,(s=>{try{e(s)}catch(i){setTimeout((()=>{throw i}),0)}}))};class rr extends RR{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!rr.c_){const t=gv();Gr(t,pv.STAT_EVENT,(e=>{e.stat===sh.PROXY?tt(Ae,"STAT_EVENT: detected buffering proxy"):e.stat===sh.NOPROXY&&tt(Ae,"STAT_EVENT: detected no buffering proxy")})),rr.c_=!0}}zo(t,e,s,i,r){const o=mh();return new Promise(((a,l)=>{const u=new dv;u.setWithCredentials(!0),u.listenOnce(fv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case il.NO_ERROR:const d=u.getResponseJson();tt(Ae,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case il.TIMEOUT:tt(Ae,`RPC '${t}' ${o} timed out`),l(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case il.HTTP_ERROR:const p=u.getStatus();if(tt(Ae,`RPC '${t}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const b=(function(P){const N=P.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(N)>=0?N:z.UNKNOWN})(w.status);l(new Z(b,w.message))}else l(new Z(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(z.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{tt(Ae,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);tt(Ae,`RPC '${t}' ${o} sending request:`,i),u.send(e,"POST",h,s,15)}))}T_(t,e,s){const i=mh(),r=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,e,s),a.encodeInitMessageHeaders=!0;const u=r.join("");tt(Ae,`Creating RPC '${t}' stream ${i}: ${u}`,a);const h=o.createWebChannel(u,a);this.I_(h);let d=!1,p=!1;const m=new PR({Ho:w=>{p?tt(Ae,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(d||(tt(Ae,`Opening RPC '${t}' stream ${i} transport.`),h.open(),d=!0),tt(Ae,`RPC '${t}' stream ${i} sending:`,w),h.send(w))},Jo:()=>h.close()});return Gr(h,oo.EventType.OPEN,(()=>{p||(tt(Ae,`RPC '${t}' stream ${i} transport opened.`),m.i_())})),Gr(h,oo.EventType.CLOSE,(()=>{p||(p=!0,tt(Ae,`RPC '${t}' stream ${i} transport closed`),m.o_(),this.E_(h))})),Gr(h,oo.EventType.ERROR,(w=>{p||(p=!0,xi(Ae,`RPC '${t}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),m.o_(new Z(z.UNAVAILABLE,"The operation could not be completed")))})),Gr(h,oo.EventType.MESSAGE,(w=>{if(!p){const b=w.data[0];Dt(!!b,16349);const A=b,P=A?.error||A[0]?.error;if(P){tt(Ae,`RPC '${t}' stream ${i} received error:`,P);const N=P.status;let B=(function(Y){const I=ne[Y];if(I!==void 0)return Jv(I)})(N),U=P.message;N==="NOT_FOUND"&&U.includes("database")&&U.includes("does not exist")&&U.includes(this.databaseId.database)&&xi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),B===void 0&&(B=z.INTERNAL,U="Unknown error status: "+N+" with message "+P.message),p=!0,m.o_(new Z(B,U)),h.close()}else tt(Ae,`RPC '${t}' stream ${i} received:`,b),m.__(b)}})),rr.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,s){super.Go(t,e,s),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return mv()}}function kR(n){return new rr(n)}function gu(){return typeof document<"u"?document:null}function Tc(n){return new VC(n,!0)}rr.c_=!1;class fb{constructor(t,e,s=1e3,i=1.5,r=6e4){this.Ci=t,this.timerId=e,this.R_=s,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-s);i>0&&tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Og="PersistentStream";class pb{constructor(t,e,s,i,r,o,a,l){this.Ci=t,this.b_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fb(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===z.RESOURCE_EXHAUSTED?(as(e.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===e&&this.G_(s,i)}),(s=>{t((()=>{const i=new Z(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,e){const s=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(Og,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(tt(Og,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DR extends pb{constructor(t,e,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,i,o),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=FC(this.serializer,t),s=(function(r){if(!("targetChange"in r))return ut.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ut.min():o.readTime?Nn(o.readTime):ut.min()})(t);return this.listener.J_(e,s)}Z_(t){const e={};e.database=ph(this.serializer),e.addTarget=(function(r,o){let a;const l=o.target;if(a=lh(l)?{documents:jC(r,l)}:{query:zC(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eb(r,o.resumeToken);const u=hh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ut.min())>0){a.readTime=Vl(r,o.snapshotVersion.toTimestamp());const u=hh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);const s=$C(this.serializer,t);s&&(e.labels=s),this.K_(e)}X_(t){const e={};e.database=ph(this.serializer),e.removeTarget=t,this.K_(e)}}class MR extends pb{constructor(t,e,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,i,o),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return Dt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Dt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Dt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=BC(t.writeResults,t.commitTime),s=Nn(t.commitTime);return this.listener.na(s,e)}ra(){const t={};t.database=ph(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((s=>UC(this.serializer,s)))};this.K_(e)}}class OR{}class VR extends OR{constructor(t,e,s,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Wo(t,dh(e,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(z.UNKNOWN,r.toString())}))}jo(t,e,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(t,dh(e,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function NR(n,t,e,s){return new VR(n,t,e,s)}class LR{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ci="RemoteStore";class FR{constructor(t,e,s,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo((o=>{s.enqueueAndForget((async()=>{Oi(this)&&(tt(Ci,"Restarting streams for network reachability change."),await(async function(l){const u=dt(l);u.Ea.add(4),await ha(u),u.Va.set("Unknown"),u.Ea.delete(4),await Ic(u)})(this))}))})),this.Va=new LR(s,i)}}async function Ic(n){if(Oi(n))for(const t of n.Ra)await t(!0)}async function ha(n){for(const t of n.Ra)await t(!1)}function gb(n,t){const e=dt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Td(e)?Ed(e):Sr(e).O_()&&wd(e,t))}function bd(n,t){const e=dt(n),s=Sr(e);e.Ia.delete(t),s.O_()&&mb(e,t),e.Ia.size===0&&(s.O_()?s.L_():Oi(e)&&e.Va.set("Unknown"))}function wd(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ut.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Sr(n).Z_(t)}function mb(n,t){n.da.$e(t),Sr(n).X_(t)}function Ed(n){n.da=new kC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Sr(n).start(),n.Va.ua()}function Td(n){return Oi(n)&&!Sr(n).x_()&&n.Ia.size>0}function Oi(n){return dt(n).Ea.size===0}function _b(n){n.da=void 0}async function UR(n){n.Va.set("Online")}async function BR(n){n.Ia.forEach(((t,e)=>{wd(n,t)}))}async function jR(n,t){_b(n),Td(n)?(n.Va.ha(t),Ed(n)):n.Va.set("Unknown")}async function zR(n,t,e){if(n.Va.set("Online"),t instanceof tb&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,t)}catch(s){tt(Ci,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ll(n,s)}else if(t instanceof ll?n.da.Xe(t):t instanceof Zv?n.da.st(t):n.da.tt(t),!e.isEqual(ut.min()))try{const s=await db(n.localStore);e.compareTo(s)>=0&&await(function(r,o){const a=r.da.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(we.EMPTY_BYTE_STRING,h.snapshotVersion)),mb(r,l);const d=new Ss(h.target,l,u,h.sequenceNumber);wd(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(n,e)}catch(s){tt(Ci,"Failed to raise snapshot:",s),await Ll(n,s)}}async function Ll(n,t,e){if(!Ir(t))throw t;n.Ea.add(1),await ha(n),n.Va.set("Offline"),e||(e=()=>db(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{tt(Ci,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Ic(n)}))}function yb(n,t){return t().catch((e=>Ll(n,e,t)))}async function Ac(n){const t=dt(n),e=Ws(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:od;for(;HR(t);)try{const i=await TR(t.localStore,s);if(i===null){t.Ta.length===0&&e.L_();break}s=i.batchId,$R(t,i)}catch(i){await Ll(t,i)}vb(t)&&bb(t)}function HR(n){return Oi(n)&&n.Ta.length<10}function $R(n,t){n.Ta.push(t);const e=Ws(n);e.O_()&&e.Y_&&e.ea(t.mutations)}function vb(n){return Oi(n)&&!Ws(n).x_()&&n.Ta.length>0}function bb(n){Ws(n).start()}async function WR(n){Ws(n).ra()}async function qR(n){const t=Ws(n);for(const e of n.Ta)t.ea(e.mutations)}async function KR(n,t,e){const s=n.Ta.shift(),i=fd.from(s,t,e);await yb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ac(n)}async function GR(n,t){t&&Ws(n).Y_&&await(async function(s,i){if((function(o){return CC(o)&&o!==z.ABORTED})(i.code)){const r=s.Ta.shift();Ws(s).B_(),await yb(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await Ac(s)}})(n,t),vb(n)&&bb(n)}async function Vg(n,t){const e=dt(n);e.asyncQueue.verifyOperationInProgress(),tt(Ci,"RemoteStore received new credentials");const s=Oi(e);e.Ea.add(3),await ha(e),s&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Ic(e)}async function YR(n,t){const e=dt(n);t?(e.Ea.delete(2),await Ic(e)):t||(e.Ea.add(2),await ha(e),e.Va.set("Unknown"))}function Sr(n){return n.ma||(n.ma=(function(e,s,i){const r=dt(e);return r.sa(),new DR(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(n.datastore,n.asyncQueue,{Zo:UR.bind(null,n),Yo:BR.bind(null,n),t_:jR.bind(null,n),J_:zR.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),Td(n)?Ed(n):n.Va.set("Unknown")):(await n.ma.stop(),_b(n))}))),n.ma}function Ws(n){return n.fa||(n.fa=(function(e,s,i){const r=dt(e);return r.sa(),new MR(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:WR.bind(null,n),t_:GR.bind(null,n),ta:qR.bind(null,n),na:KR.bind(null,n)}),n.Ra.push((async t=>{t?(n.fa.B_(),await Ac(n)):(await n.fa.stop(),n.Ta.length>0&&(tt(Ci,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Id{constructor(t,e,s,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,i,r){const o=Date.now()+s,a=new Id(t,e,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ad(n,t){if(as("AsyncQueue",`${t}: ${n}`),Ir(n))return new Z(z.UNAVAILABLE,`${t}: ${n}`);throw n}class or{static emptySet(t){return new or(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||nt.comparator(e.key,s.key):(e,s)=>nt.comparator(e.key,s.key),this.keyedMap=ao(),this.sortedSet=new Kt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,s)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof or)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new or;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}class Ng{constructor(){this.ga=new Kt(nt.comparator)}track(t){const e=t.doc.key,s=this.ga.get(e);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(e,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(e):t.type===1&&s.type===2?this.ga=this.ga.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ot(63341,{Vt:t,pa:s}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,s)=>{t.push(s)})),t}}class _r{constructor(t,e,s,i,r,o,a,l,u){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,s,i,r){const o=[];return e.forEach((a=>{o.push({type:0,doc:a})})),new _r(t,e,or.emptySet(e),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==s[i].type||!e[i].doc.isEqual(s[i].doc))return!1;return!0}}class QR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class XR{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,s){const i=dt(e),r=i.queries;i.queries=Lg(),r.forEach(((o,a)=>{for(const l of a.ba)l.onError(s)}))})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function Lg(){return new Mi((n=>Fv(n)),yc)}async function wb(n,t){const e=dt(n);let s=3;const i=t.query;let r=e.queries.get(i);r?!r.Sa()&&t.Da()&&(s=2):(r=new QR,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await e.onListen(i,!0);break;case 1:r.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(o){const a=Ad(o,`Initialization of query '${Gi(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,r),r.ba.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&Sd(e)}async function Eb(n,t){const e=dt(n),s=t.query;let i=3;const r=e.queries.get(s);if(r){const o=r.ba.indexOf(t);o>=0&&(r.ba.splice(o,1),r.ba.length===0?i=t.Da()?0:1:!r.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function JR(n,t){const e=dt(n);let s=!1;for(const i of t){const r=i.query,o=e.queries.get(r);if(o){for(const a of o.ba)a.Fa(i)&&(s=!0);o.wa=i}}s&&Sd(e)}function ZR(n,t,e){const s=dt(n),i=s.queries.get(t);if(i)for(const r of i.ba)r.onError(e);s.queries.delete(t)}function Sd(n){n.Ca.forEach((t=>{t.next()}))}var _h,Fg;(Fg=_h||(_h={})).Ma="default",Fg.Cache="cache";class Tb{constructor(t,e,s){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new _r(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const s=e!=="Offline";return(!this.options.Ka||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=_r.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==_h.Cache}}class Ib{constructor(t){this.key=t}}class Ab{constructor(t){this.key=t}}class tP{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=vt(),this.mutatedKeys=vt(),this.eu=Uv(t),this.tu=new or(this.eu)}get nu(){return this.Za}ru(t,e){const s=e?e.iu:new Ng,i=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const p=i.get(h),m=vc(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?w!==b&&(s.track({type:3,doc:m}),A=!0):this.su(p,m)||(s.track({type:2,doc:m}),A=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),A=!0):p&&!m&&(s.track({type:1,doc:p}),A=!0,(l||u)&&(a=!0)),A&&(m?(o=o.add(m),r=b?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Ss:a,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(m,w){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Vt:A})}};return b(m)-b(w)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=e&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Xa;return this.Xa=l,o.length!==0||u?{snapshot:new _r(this.query,t.tu,r,o,t.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ng,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=vt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const e=[];return t.forEach((s=>{this.Ya.has(s)||e.push(new Ab(s))})),this.Ya.forEach((s=>{t.has(s)||e.push(new Ib(s))})),e}cu(t){this.Za=t.ks,this.Ya=vt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return _r.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const xd="SyncEngine";class eP{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class nP{constructor(t){this.key=t,this.hu=!1}}class sP{constructor(t,e,s,i,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Mi((a=>Fv(a)),yc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kt(nt.comparator),this.Au=new Map,this.Vu=new md,this.du={},this.mu=new Map,this.fu=mr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iP(n,t,e=!0){const s=kb(n);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await Sb(s,t,e,!0),i}async function rP(n,t){const e=kb(n);await Sb(e,t,!0,!1)}async function Sb(n,t,e,s){const i=await IR(n.localStore,Vn(t)),r=i.targetId,o=n.sharedClientState.addLocalQueryTarget(r,e);let a;return s&&(a=await oP(n,t,r,o==="current",i.resumeToken)),n.isPrimaryClient&&e&&gb(n.remoteStore,i),a}async function oP(n,t,e,s,i){n.pu=(d,p,m)=>(async function(b,A,P,N){let B=A.view.ru(P);B.Ss&&(B=await Pg(b.localStore,A.query,!1).then((({documents:I})=>A.view.ru(I,B))));const U=N&&N.targetChanges.get(A.targetId),O=N&&N.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(B,b.isPrimaryClient,U,O);return Bg(b,A.targetId,Y.au),Y.snapshot})(n,d,p,m);const r=await Pg(n.localStore,t,!0),o=new tP(t,r.ks),a=o.ru(r.documents),l=ua.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);Bg(n,e,u.au);const h=new eP(t,e,o);return n.Tu.set(t,h),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),u.snapshot}async function aP(n,t,e){const s=dt(n),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!yc(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await gh(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),e&&bd(s.remoteStore,i.targetId),yh(s,i.targetId)})).catch(Tr)):(yh(s,i.targetId),await gh(s.localStore,i.targetId,!0))}async function lP(n,t){const e=dt(n),s=e.Tu.get(t),i=e.Iu.get(s.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),bd(e.remoteStore,s.targetId))}async function cP(n,t,e){const s=mP(n);try{const i=await(function(o,a){const l=dt(o),u=Ht.now(),h=a.reduce(((m,w)=>m.add(w.key)),vt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let w=ls(),b=vt();return l.xs.getEntries(m,h).next((A=>{w=A,w.forEach(((P,N)=>{N.isValidDocument()||(b=b.add(P))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,w))).next((A=>{d=A;const P=[];for(const N of a){const B=TC(N,d.get(N.key).overlayedDocument);B!=null&&P.push(new Zs(N.key,B,Pv(B.value.mapValue),cn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,P,a)})).next((A=>{p=A;const P=A.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(m,A.batchId,P)}))})).then((()=>({batchId:p.batchId,changes:jv(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.du[o.currentUser.toKey()];u||(u=new Kt(yt)),u=u.insert(a,l),o.du[o.currentUser.toKey()]=u})(s,i.batchId,e),await da(s,i.changes),await Ac(s.remoteStore)}catch(i){const r=Ad(i,"Failed to persist write");e.reject(r)}}async function xb(n,t){const e=dt(n);try{const s=await wR(e.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=e.Au.get(r);o&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Dt(o.hu,14607):i.removedDocuments.size>0&&(Dt(o.hu,42227),o.hu=!1))})),await da(e,s,t)}catch(s){await Tr(s)}}function Ug(n,t,e){const s=dt(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=dt(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const p of d.ba)p.va(a)&&(u=!0)})),u&&Sd(l)})(s.eventManager,t),i.length&&s.Pu.J_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function uP(n,t,e){const s=dt(n);s.sharedClientState.updateQueryState(t,"rejected",e);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new Kt(nt.comparator);o=o.insert(r,Re.newNoDocument(r,ut.min()));const a=vt().add(r),l=new Ec(ut.min(),new Map,new Kt(yt),o,a);await xb(s,l),s.Ru=s.Ru.remove(r),s.Au.delete(t),Cd(s)}else await gh(s.localStore,t,!1).then((()=>yh(s,t,e))).catch(Tr)}async function hP(n,t){const e=dt(n),s=t.batch.batchId;try{const i=await bR(e.localStore,t);Rb(e,s,null),Cb(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await da(e,i)}catch(i){await Tr(i)}}async function dP(n,t,e){const s=dt(n);try{const i=await(function(o,a){const l=dt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(Dt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,t);Rb(s,t,e),Cb(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await da(s,i)}catch(i){await Tr(i)}}function Cb(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function Rb(n,t,e){const s=dt(n);let i=s.du[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(e?r.reject(e):r.resolve(),i=i.remove(t)),s.du[s.currentUser.toKey()]=i}}function yh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Iu.get(t))n.Tu.delete(s),e&&n.Pu.yu(s,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((s=>{n.Vu.containsKey(s)||Pb(n,s)}))}function Pb(n,t){n.Eu.delete(t.path.canonicalString());const e=n.Ru.get(t);e!==null&&(bd(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),Cd(n))}function Bg(n,t,e){for(const s of e)s instanceof Ib?(n.Vu.addReference(s.key,t),fP(n,s)):s instanceof Ab?(tt(xd,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,t),n.Vu.containsKey(s.key)||Pb(n,s.key)):ot(19791,{wu:s})}function fP(n,t){const e=t.key,s=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(s)||(tt(xd,"New document in limbo: "+e),n.Eu.add(s),Cd(n))}function Cd(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new nt(Bt.fromString(t)),s=n.fu.next();n.Au.set(s,new nP(e)),n.Ru=n.Ru.insert(e,s),gb(n.remoteStore,new Ss(Vn(_c(e.path)),s,"TargetPurposeLimboResolution",pc.ce))}}async function da(n,t,e){const s=dt(n),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,e).then((u=>{if((u||e)&&s.isPrimaryClient){const h=u?!u.fromCache:e?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=yd.Es(l.targetId,u);r.push(h)}})))})),await Promise.all(o),s.Pu.J_(i),await(async function(l,u){const h=dt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>H.forEach(u,(p=>H.forEach(p.Ts,(m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m))).next((()=>H.forEach(p.Is,(m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))))))}catch(d){if(!Ir(d))throw d;tt(vd,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const m=h.vs.get(p),w=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(w);h.vs=h.vs.insert(p,b)}}})(s.localStore,r))}async function pP(n,t){const e=dt(n);if(!e.currentUser.isEqual(t)){tt(xd,"User change. New user:",t.toKey());const s=await hb(e.localStore,t);e.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new Z(z.CANCELLED,o))}))})),r.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await da(e,s.Ns)}}function gP(n,t){const e=dt(n),s=e.Au.get(t);if(s&&s.hu)return vt().add(s.key);{let i=vt();const r=e.Iu.get(t);if(!r)return i;for(const o of r){const a=e.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function kb(n){const t=dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uP.bind(null,t),t.Pu.J_=JR.bind(null,t.eventManager),t.Pu.yu=ZR.bind(null,t.eventManager),t}function mP(n){const t=dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,t),t}class Fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Tc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return vR(this.persistence,new mR,t.initialUser,this.serializer)}Cu(t){return new ub(_d.Vi,this.serializer)}Du(t){return new SR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fl.provider={build:()=>new Fl};class _P extends Fl{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Dt(this.persistence.referenceDelegate instanceof Nl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new eR(s,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?je.withCacheSize(this.cacheSizeBytes):je.DEFAULT;return new ub((s=>Nl.Vi(s,e)),this.serializer)}}class vh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ug(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,this.syncEngine),await YR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new XR})()}createDatastore(t){const e=Tc(t.databaseInfo.databaseId),s=kR(t.databaseInfo);return NR(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return(function(s,i,r,o,a){return new FR(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(e=>Ug(this.syncEngine,e,0)),(function(){return Mg.v()?new Mg:new xR})())}createSyncEngine(t,e){return(function(i,r,o,a,l,u,h){const d=new sP(i,r,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const s=dt(e);tt(Ci,"RemoteStore shutting down."),s.Ea.add(5),await ha(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vh.provider={build:()=>new vh};class Db{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):as("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const qs="FirestoreClient";class yP{constructor(t,e,s,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this._databaseInfo=i,this.user=xe.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{tt(qs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(tt(qs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Ad(e,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function mu(n,t){n.asyncQueue.verifyOperationInProgress(),tt(qs,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await hb(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function jg(n,t){n.asyncQueue.verifyOperationInProgress();const e=await vP(n);tt(qs,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((s=>Vg(t.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>Vg(t.remoteStore,i))),n._onlineComponents=t}async function vP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){tt(qs,"Using user provided OfflineComponentProvider");try{await mu(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(e))throw e;xi("Error using user provided cache. Falling back to memory cache: "+e),await mu(n,new Fl)}}else tt(qs,"Using default OfflineComponentProvider"),await mu(n,new _P(void 0));return n._offlineComponents}async function Mb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(tt(qs,"Using user provided OnlineComponentProvider"),await jg(n,n._uninitializedComponentsProvider._online)):(tt(qs,"Using default OnlineComponentProvider"),await jg(n,new vh))),n._onlineComponents}function bP(n){return Mb(n).then((t=>t.syncEngine))}async function bh(n){const t=await Mb(n),e=t.eventManager;return e.onListen=iP.bind(null,t.syncEngine),e.onUnlisten=aP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=rP.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=lP.bind(null,t.syncEngine),e}function wP(n,t,e,s){const i=new Db(s),r=new Tb(t,i,e);return n.asyncQueue.enqueueAndForget((async()=>wb(await bh(n),r))),()=>{i.Nu(),n.asyncQueue.enqueueAndForget((async()=>Eb(await bh(n),r)))}}function EP(n,t,e={}){const s=new Ns;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new Db({next:p=>{h.Nu(),o.enqueueAndForget((()=>Eb(r,d)));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new Z(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new Z(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Tb(_c(a.path),h,{includeMetadataChanges:!0,Ka:!0});return wb(r,d)})(await bh(n),n.asyncQueue,t,e,s))),s.promise}function TP(n,t){const e=new Ns;return n.asyncQueue.enqueueAndForget((async()=>cP(await bP(n),t,e))),e.promise}function Ob(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const IP="ComponentProvider",zg=new Map;function AP(n,t,e,s,i){return new qx(n,t,e,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Ob(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}const Vb="firestore.googleapis.com",Hg=!0;class $g{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=Hg}else this.host=t.host,this.ssl=t.ssl??Hg;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=cb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ZC)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ob(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sc{constructor(t,e,s,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Ax;switch(s.type){case"firstParty":return new Rx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const s=zg.get(e);s&&(tt(IP,"Removing Datastore"),zg.delete(e),s.terminate())})(this),Promise.resolve()}}function SP(n,t,e,s={}){n=ln(n,Sc);const i=vr(t),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${t}:${e}`;i&&(Iy(`https://${a}`),Ay("Firestore",!0)),r.host!==Vb&&r.host!==a&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!Ei(l,o)&&(n._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=xe.MOCK_USER;else{u=FI(s.mockUserToken,n._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xe(d)}n._authCredentials=new Sx(new yv(u,h))}}class Vi{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Vi(this.firestore,t,this._query)}}class Qt{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qt(this.firestore,t,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,s){if(la(e,Qt._jsonSchema))return new Qt(t,s||null,new nt(Bt.fromString(e.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:re("string",Qt._jsonSchemaVersion),referencePath:re("string")};class Ls extends Vi{constructor(t,e,s){super(t,e,_c(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qt(this.firestore,null,new nt(t))}withConverter(t){return new Ls(this.firestore,t,this._path)}}function Yr(n,t,...e){if(n=ae(n),vv("collection","path",t),n instanceof Sc){const s=Bt.fromString(t,...e);return sg(s),new Ls(n,null,s)}{if(!(n instanceof Qt||n instanceof Ls))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Bt.fromString(t,...e));return sg(s),new Ls(n.firestore,null,s)}}function qt(n,t,...e){if(n=ae(n),arguments.length===1&&(t=rd.newId()),vv("doc","path",t),n instanceof Sc){const s=Bt.fromString(t,...e);return ng(s),new Qt(n,null,new nt(s))}{if(!(n instanceof Qt||n instanceof Ls))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Bt.fromString(t,...e));return ng(s),new Qt(n.firestore,n instanceof Ls?n.converter:null,new nt(s))}}const Wg="AsyncQueue";class qg{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fb(this,"async_queue_retry"),this._c=()=>{const s=gu();s&&tt(Wg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const e=gu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=gu();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Ir(t))throw t;tt(Wg,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",Kg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=e,e}enqueueAfterDelay(t,e,s){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=Id.createAndSchedule(this,t,e,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&ot(47125,{Pc:Kg(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,s)=>e.targetTimeMs-s.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Kg(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Ks extends Sc{constructor(t,e,s,i){super(t,e,s,i),this.type="firestore",this._queue=new qg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qg(t),this._firestoreClient=void 0,await t}}}function xP(n,t){const e=typeof n=="object"?n:Ry(),s=typeof n=="string"?n:Dl,i=Kh(e,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=NI("firestore");r&&SP(i,...r)}return i}function Rd(n){if(n._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CP(n),n._firestoreClient}function CP(n){const t=n._freezeSettings(),e=AP(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new yP(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(n._componentsProvider))}class on{constructor(t){this._byteString=t}static fromBase64String(t){try{return new on(we.fromBase64String(t))}catch(e){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new on(we.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(la(t,on._jsonSchema))return on.fromBase64String(t.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:re("string",on._jsonSchemaVersion),bytes:re("string")};class Pd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class fa{constructor(t){this._methodName=t}}class Ln{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return yt(this._lat,t._lat)||yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(t){if(la(t,Ln._jsonSchema))return new Ln(t.latitude,t.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:re("string",Ln._jsonSchemaVersion),latitude:re("number"),longitude:re("number")};class _n{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(la(t,_n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new _n(t.vectorValues);throw new Z(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:re("string",_n._jsonSchemaVersion),vectorValues:re("object")};const RP=/^__.*__$/;class PP{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new Zs(t,this.data,this.fieldMask,e,this.fieldTransforms):new ca(t,this.data,e,this.fieldTransforms)}}class Nb{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new Zs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Lb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{dataSource:n})}}class kd{constructor(t,e,s,i,r,o){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new kd({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),s=this.contextWith({path:e,arrayElement:!1});return s.validatePathSegment(t),s}childContextForFieldPath(t){const e=this.path?.child(t),s=this.contextWith({path:e,arrayElement:!1});return s.validatePath(),s}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Ul(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(Lb(this.dataSource)&&RP.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class kP{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Tc(t)}createContext(t,e,s,i=!1){return new kd({dataSource:t,methodName:e,targetDoc:s,path:ve.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xc(n){const t=n._freezeSettings(),e=Tc(n._databaseId);return new kP(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Fb(n,t,e,s,i,r={}){const o=n.createContext(r.merge||r.mergeFields?2:0,t,e,i);Od("Data must be an object, but it was:",o,s);const a=Ub(s,o);let l,u;if(r.merge)l=new nn(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const p=Ri(t,d,e);if(!o.contains(p))throw new Z(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zb(h,p)||h.push(p)}l=new nn(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new PP(new ze(a),l,u)}class Cc extends fa{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Cc}}class Dd extends fa{_toFieldTransform(t){return new Yv(t.path,new $o)}isEqual(t){return t instanceof Dd}}class Md extends fa{constructor(t,e){super(t),this.Vc=e}_toFieldTransform(t){const e=new Ko(t.serializer,$v(t.serializer,this.Vc));return new Yv(t.path,e)}isEqual(t){return t instanceof Md&&this.Vc===t.Vc}}function DP(n,t,e,s){const i=n.createContext(1,t,e);Od("Data must be an object, but it was:",i,s);const r=[],o=ze.empty();Js(s,((l,u)=>{const h=jb(t,l,e);u=ae(u);const d=i.childContextForFieldPath(h);if(u instanceof Cc)r.push(h);else{const p=pa(u,d);p!=null&&(r.push(h),o.set(h,p))}}));const a=new nn(r);return new Nb(o,a,i.fieldTransforms)}function MP(n,t,e,s,i,r){const o=n.createContext(1,t,e),a=[Ri(t,s,e)],l=[i];if(r.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(Ri(t,r[p])),l.push(r[p+1]);const u=[],h=ze.empty();for(let p=a.length-1;p>=0;--p)if(!zb(u,a[p])){const m=a[p];let w=l[p];w=ae(w);const b=o.childContextForFieldPath(m);if(w instanceof Cc)u.push(m);else{const A=pa(w,b);A!=null&&(u.push(m),h.set(m,A))}}const d=new nn(u);return new Nb(h,d,o.fieldTransforms)}function OP(n,t,e,s=!1){return pa(e,n.createContext(s?4:3,t))}function pa(n,t){if(Bb(n=ae(n)))return Od("Unsupported field value:",t,n),Ub(n,t);if(n instanceof fa)return(function(s,i){if(!Lb(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=pa(a,i.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(n,t)}return(function(s,i){if((s=ae(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $v(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Ht.fromDate(s);return{timestampValue:Vl(i.serializer,r)}}if(s instanceof Ht){const r=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vl(i.serializer,r)}}if(s instanceof Ln)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof on)return{bytesValue:eb(i.serializer,s._byteString)};if(s instanceof Qt){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:gd(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof _n)return(function(o,a){const l=o instanceof _n?o.toArray():o;return{mapValue:{fields:{[Cv]:{stringValue:Rv},[Ml]:{arrayValue:{values:l.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return hd(a.serializer,h)}))}}}}}})(s,i);if(lb(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${fc(s)}`)})(n,t)}function Ub(n,t){const e={};return Ev(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Js(n,((s,i)=>{const r=pa(i,t.childContextForField(s));r!=null&&(e[s]=r)})),{mapValue:{fields:e}}}function Bb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Ln||n instanceof on||n instanceof Qt||n instanceof fa||n instanceof _n||lb(n))}function Od(n,t,e){if(!Bb(e)||!bv(e)){const s=fc(e);throw s==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+s)}}function Ri(n,t,e){if((t=ae(t))instanceof Pd)return t._internalPath;if(typeof t=="string")return jb(n,t);throw Ul("Field path arguments must be of type string or ",n,!1,void 0,e)}const VP=new RegExp("[~\\*/\\[\\]]");function jb(n,t,e){if(t.search(VP)>=0)throw Ul(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Pd(...t.split("."))._internalPath}catch{throw Ul(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Ul(n,t,e,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new Z(z.INVALID_ARGUMENT,a+n+l)}function zb(n,t){return n.some((e=>e.isEqual(t)))}class NP{convertValue(t,e="none"){switch($s(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ot(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return Js(t,((i,r)=>{s[i]=this.convertValue(r,e)})),s}convertVectorValue(t){const e=t.fields?.[Ml].arrayValue?.values?.map((s=>Xt(s.doubleValue)));return new _n(e)}convertGeoPoint(t){return new Ln(Xt(t.latitude),Xt(t.longitude))}convertArray(t,e){return(t.values||[]).map((s=>this.convertValue(s,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const s=mc(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Bo(t));default:return null}}convertTimestamp(t){const e=zs(t);return new Ht(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Bt.fromString(t);Dt(ab(s),9688,{name:t});const i=new jo(s.get(1),s.get(3)),r=new nt(s.popFirst(5));return i.isEqual(e)||as(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}class Hb extends NP{constructor(t){super(),this.firestore=t}convertBytes(t){return new on(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qt(this.firestore,null,e)}}function _u(){return new Dd("serverTimestamp")}function yu(n){return new Md("increment",n)}const Gg="@firebase/firestore",Yg="4.11.0";function Qg(n){return(function(e,s){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1})(n,["next","error","complete"])}class $b{constructor(t,e,s,i,r){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(Ri("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class LP extends $b{data(){return super.data()}}function FP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}class Wb extends Vd{}function Na(n,t,...e){let s=[];t instanceof Vd&&s.push(t),s=s.concat(e),(function(r){const o=r.filter((l=>l instanceof Nd)).length,a=r.filter((l=>l instanceof Rc)).length;if(o>1||o>0&&a>0)throw new Z(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)n=i._apply(n);return n}class Rc extends Wb{constructor(t,e,s){super(),this._field=t,this._op=e,this._value=s,this.type="where"}static _create(t,e,s){return new Rc(t,e,s)}_apply(t){const e=this._parse(t);return qb(t._query,e),new Vi(t.firestore,t.converter,ch(t._query,e))}_parse(t){const e=xc(t.firestore);return(function(r,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Jg(d,h);const w=[];for(const b of d)w.push(Xg(l,r,b));p={arrayValue:{values:w}}}else p=Xg(l,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Jg(d,h),p=OP(a,o,d,h==="in"||h==="not-in");return ie.create(u,h,p)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function vu(n,t,e){const s=t,i=Ri("where",n);return Rc._create(i,s,e)}class Nd extends Vd{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Nd(t,e)}_parse(t){const e=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return e.length===1?e[0]:vn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(i,r){let o=i;const a=r.getFlattenedFilters();for(const l of a)qb(o,l),o=ch(o,l)})(t._query,e),new Vi(t.firestore,t.converter,ch(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ld extends Wb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ld(t,e)}_apply(t){const e=(function(i,r,o){if(i.startAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ho(r,o)})(t._query,this._field,this._direction);return new Vi(t.firestore,t.converter,uC(t._query,e))}}function bu(n,t="asc"){const e=t,s=Ri("orderBy",n);return Ld._create(s,e)}function Xg(n,t,e){if(typeof(e=ae(e))=="string"){if(e==="")throw new Z(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lv(t)&&e.indexOf("/")!==-1)throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const s=t.path.child(Bt.fromString(e));if(!nt.isDocumentKey(s))throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hg(n,new nt(s))}if(e instanceof Qt)return hg(n,e._key);throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fc(e)}.`)}function Jg(n,t){if(!Array.isArray(n)||n.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qb(n,t){const e=(function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function Kb(n,t,e){let s;return s=n?n.toFirestore(t):t,s}class co{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bi extends $b{constructor(t,e,s,i,r,o){super(t,e,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Ri("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=bi._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:re("string",bi._jsonSchemaVersion),bundleSource:re("string","DocumentSnapshot"),bundleName:re("string"),bundle:re("string")};class cl extends bi{data(t={}){return super.data(t)}}class ar{constructor(t,e,s,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new co(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((s=>{t.call(e,new cl(this._firestore,this._userDataWriter,s.key,s,new co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:UP(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ar._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(e.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function UP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:n})}}ar._jsonSchemaVersion="firestore/querySnapshot/1.0",ar._jsonSchema={type:re("string",ar._jsonSchemaVersion),bundleSource:re("string","QuerySnapshot"),bundleName:re("string"),bundle:re("string")};function Qr(n){n=ln(n,Qt);const t=ln(n.firestore,Ks),e=Rd(t);return EP(e,n._key).then((s=>Gb(t,n,s)))}function Xr(n,t,e){n=ln(n,Qt);const s=ln(n.firestore,Ks),i=Kb(n.converter,t),r=xc(s);return Pc(s,[Fb(r,"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,cn.none())])}function ys(n,t,e,...s){n=ln(n,Qt);const i=ln(n.firestore,Ks),r=xc(i);let o;return o=typeof(t=ae(t))=="string"||t instanceof Pd?MP(r,"updateDoc",n._key,t,e,s):DP(r,"updateDoc",n._key,t),Pc(i,[o.toMutation(n._key,cn.exists(!0))])}function La(n){return Pc(ln(n.firestore,Ks),[new dd(n._key,cn.none())])}function BP(n,t){const e=ln(n.firestore,Ks),s=qt(n),i=Kb(n.converter,t),r=xc(n.firestore);return Pc(e,[Fb(r,"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,cn.exists(!1))]).then((()=>s))}function wu(n,...t){n=ae(n);let e={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Qg(t[s])||(e=t[s++]);const i={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(Qg(t[s])){const u=t[s];t[s]=u.next?.bind(u),t[s+1]=u.error?.bind(u),t[s+2]=u.complete?.bind(u)}let r,o,a;if(n instanceof Qt)o=ln(n.firestore,Ks),a=_c(n._key.path),r={next:u=>{t[s]&&t[s](Gb(o,n,u))},error:t[s+1],complete:t[s+2]};else{const u=ln(n,Vi);o=ln(u.firestore,Ks),a=u._query;const h=new Hb(o);r={next:d=>{t[s]&&t[s](new ar(o,h,u,d))},error:t[s+1],complete:t[s+2]},FP(n._query)}const l=Rd(o);return wP(l,a,i,r)}function Pc(n,t){const e=Rd(n);return TP(e,t)}function Gb(n,t,e){const s=e.docs.get(t._key),i=new Hb(n);return new bi(n,i,t._key,s,new co(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){Ix(br),dr(new Ti("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Ks(new xx(s.getProvider("auth-internal")),new Px(o,s.getProvider("app-check-internal")),Kx(o,i),o);return r={useFetchStreams:e,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Os(Gg,Yg,t),Os(Gg,Yg,"esm2020")})();var jP="firebase",zP="12.9.0";Os(jP,zP,"app");const Yb={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Zg=Object.entries(Yb).filter(([,n])=>!n).map(([n])=>n);if(Zg.length)throw new Error(`Missing Firebase config: ${Zg.join(", ")}`);const Qb=Cy(Yb),Vt=xP(Qb),sn=Ex(Qb),HP=new Xn;function ga(n){return n+.5|0}const xs=(n,t,e)=>Math.max(Math.min(n,e),t);function uo(n){return xs(ga(n*2.55),0,255)}function Fs(n){return xs(ga(n*255),0,255)}function Gn(n){return xs(ga(n/2.55)/100,0,1)}function tm(n){return xs(ga(n*100),0,100)}const rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wh=[..."0123456789ABCDEF"],$P=n=>wh[n&15],WP=n=>wh[(n&240)>>4]+wh[n&15],Fa=n=>(n&240)>>4===(n&15),qP=n=>Fa(n.r)&&Fa(n.g)&&Fa(n.b)&&Fa(n.a);function KP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&rn[n[1]]*17,g:255&rn[n[2]]*17,b:255&rn[n[3]]*17,a:t===5?rn[n[4]]*17:255}:(t===7||t===9)&&(e={r:rn[n[1]]<<4|rn[n[2]],g:rn[n[3]]<<4|rn[n[4]],b:rn[n[5]]<<4|rn[n[6]],a:t===9?rn[n[7]]<<4|rn[n[8]]:255})),e}const GP=(n,t)=>n<255?t(n):"";function YP(n){var t=qP(n)?$P:WP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+GP(n.a,t):void 0}const QP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xb(n,t,e){const s=t*Math.min(e,1-e),i=(r,o=(r+n/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function XP(n,t,e){const s=(i,r=(i+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function JP(n,t,e){const s=Xb(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)s[i]*=1-t-e,s[i]+=t;return s}function ZP(n,t,e,s,i){return n===i?(t-e)/s+(t<e?6:0):t===i?(e-n)/s+2:(n-t)/s+4}function Fd(n){const e=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(e,s,i),o=Math.min(e,s,i),a=(r+o)/2;let l,u,h;return r!==o&&(h=r-o,u=a>.5?h/(2-r-o):h/(r+o),l=ZP(e,s,i,h,r),l=l*60+.5),[l|0,u||0,a]}function Ud(n,t,e,s){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,s)).map(Fs)}function Bd(n,t,e){return Ud(Xb,n,t,e)}function tk(n,t,e){return Ud(JP,n,t,e)}function ek(n,t,e){return Ud(XP,n,t,e)}function Jb(n){return(n%360+360)%360}function nk(n){const t=QP.exec(n);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?uo(+t[5]):Fs(+t[5]));const i=Jb(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=tk(i,r,o):t[1]==="hsv"?s=ek(i,r,o):s=Bd(i,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function sk(n,t){var e=Fd(n);e[0]=Jb(e[0]+t),e=Bd(e),n.r=e[0],n.g=e[1],n.b=e[2]}function ik(n){if(!n)return;const t=Fd(n),e=t[0],s=tm(t[1]),i=tm(t[2]);return n.a<255?`hsla(${e}, ${s}%, ${i}%, ${Gn(n.a)})`:`hsl(${e}, ${s}%, ${i}%)`}const em={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rk(){const n={},t=Object.keys(nm),e=Object.keys(em);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<e.length;i++)r=e[i],a=a.replace(r,em[r]);r=parseInt(nm[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Ua;function ok(n){Ua||(Ua=rk(),Ua.transparent=[0,0,0,0]);const t=Ua[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ak=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lk(n){const t=ak.exec(n);let e=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?uo(o):xs(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?uo(s):xs(s,0,255)),i=255&(t[4]?uo(i):xs(i,0,255)),r=255&(t[6]?uo(r):xs(r,0,255)),{r:s,g:i,b:r,a:e}}}function ck(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Gn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Eu=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,zi=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function uk(n,t,e){const s=zi(Gn(n.r)),i=zi(Gn(n.g)),r=zi(Gn(n.b));return{r:Fs(Eu(s+e*(zi(Gn(t.r))-s))),g:Fs(Eu(i+e*(zi(Gn(t.g))-i))),b:Fs(Eu(r+e*(zi(Gn(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Ba(n,t,e){if(n){let s=Fd(n);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=Bd(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function Zb(n,t){return n&&Object.assign(t||{},n)}function sm(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Fs(n[3]))):(t=Zb(n,{r:0,g:0,b:0,a:1}),t.a=Fs(t.a)),t}function hk(n){return n.charAt(0)==="r"?lk(n):nk(n)}class Go{constructor(t){if(t instanceof Go)return t;const e=typeof t;let s;e==="object"?s=sm(t):e==="string"&&(s=KP(t)||ok(t)||hk(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Zb(this._rgb);return t&&(t.a=Gn(t.a)),t}set rgb(t){this._rgb=sm(t)}rgbString(){return this._valid?ck(this._rgb):void 0}hexString(){return this._valid?YP(this._rgb):void 0}hslString(){return this._valid?ik(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=s.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-u,s.r=255&u*s.r+r*i.r+.5,s.g=255&u*s.g+r*i.g+.5,s.b=255&u*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=uk(this._rgb,t._rgb,e)),this}clone(){return new Go(this.rgb)}alpha(t){return this._rgb.a=Fs(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ga(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ba(this._rgb,2,t),this}darken(t){return Ba(this._rgb,2,-t),this}saturate(t){return Ba(this._rgb,1,t),this}desaturate(t){return Ba(this._rgb,1,-t),this}rotate(t){return sk(this._rgb,t),this}}function $n(){}const dk=(()=>{let n=0;return()=>n++})();function Lt(n){return n==null}function ge(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function St(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function dn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Sn(n,t){return dn(n)?n:t}function At(n,t){return typeof n>"u"?t:n}const fk=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,tw=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function zt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Mt(n,t,e,s){let i,r,o;if(ge(n))for(r=n.length,i=0;i<r;i++)t.call(e,n[i],i);else if(St(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)t.call(e,n[o[i]],o[i])}function Bl(n,t){let e,s,i,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,s=n.length;e<s;++e)if(i=n[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function jl(n){if(ge(n))return n.map(jl);if(St(n)){const t=Object.create(null),e=Object.keys(n),s=e.length;let i=0;for(;i<s;++i)t[e[i]]=jl(n[e[i]]);return t}return n}function ew(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function pk(n,t,e,s){if(!ew(n))return;const i=t[n],r=e[n];St(i)&&St(r)?Yo(i,r,s):t[n]=jl(r)}function Yo(n,t,e){const s=ge(t)?t:[t],i=s.length;if(!St(n))return n;e=e||{};const r=e.merger||pk;let o;for(let a=0;a<i;++a){if(o=s[a],!St(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)r(l[u],n,o,e)}return n}function Co(n,t){return Yo(n,t,{merger:gk})}function gk(n,t,e){if(!ew(n))return;const s=t[n],i=e[n];St(s)&&St(i)?Co(s,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=jl(i))}const im={"":n=>n,x:n=>n.x,y:n=>n.y};function mk(n){const t=n.split("."),e=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function _k(n){const t=mk(n);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function Pi(n,t){return(im[t]||(im[t]=_k(t)))(n)}function jd(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Qo=n=>typeof n<"u",Gs=n=>typeof n=="function",rm=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function yk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const $t=Math.PI,oe=2*$t,zl=Number.POSITIVE_INFINITY,vk=$t/180,ue=$t/2,li=$t/4,om=$t*2/3,nw=Math.log10,Us=Math.sign;function ul(n,t,e){return Math.abs(n-t)<e}function am(n){const t=Math.round(n);n=ul(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(nw(n))),s=n/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function bk(n){const t=[],e=Math.sqrt(n);let s;for(s=1;s<e;s++)n%s===0&&(t.push(s),t.push(n/s));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function wk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Hl(n){return!wk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Ek(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Tk(n,t,e){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function ts(n){return n*($t/180)}function Ik(n){return n*(180/$t)}function lm(n){if(!dn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function sw(n,t){const e=t.x-n.x,s=t.y-n.y,i=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*$t&&(r+=oe),{angle:r,distance:i}}function Ak(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function kn(n){return(n%oe+oe)%oe}function $l(n,t,e,s){const i=kn(n),r=kn(t),o=kn(e),a=kn(r-i),l=kn(o-i),u=kn(i-r),h=kn(i-o);return i===r||i===o||s&&r===o||a>l&&u<h}function $e(n,t,e){return Math.max(t,Math.min(e,n))}function Sk(n){return $e(n,-32768,32767)}function _i(n,t,e,s=1e-6){return n>=Math.min(t,e)-s&&n<=Math.max(t,e)+s}function zd(n,t,e){e=e||(o=>n[o]<t);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,e(r)?i=r:s=r;return{lo:i,hi:s}}const Eh=(n,t,e,s)=>zd(n,e,s?i=>{const r=n[i][t];return r<e||r===e&&n[i+1][t]===e}:i=>n[i][t]<e),xk=(n,t,e)=>zd(n,e,s=>n[s][t]>=e);function Ck(n,t,e){let s=0,i=n.length;for(;s<i&&n[s]<t;)s++;for(;i>s&&n[i-1]>e;)i--;return s>0||i<n.length?n.slice(s,i):n}const iw=["push","pop","shift","splice","unshift"];function Rk(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),iw.forEach(e=>{const s="_onData"+jd(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function cm(n,t){const e=n._chartjs;if(!e)return;const s=e.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(iw.forEach(r=>{delete n[r]}),delete n._chartjs)}function rw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const ow=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function aw(n,t){let e=[],s=!1;return function(...i){e=i,s||(s=!0,ow.call(window,()=>{s=!1,n.apply(t,e)}))}}function Pk(n,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(n,t,s)):n.apply(this,s),t}}const lw=n=>n==="start"?"left":n==="end"?"right":"center",Je=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,kk=(n,t,e,s)=>n===(s?"left":"right")?e:n==="center"?(t+e)/2:t,ja=n=>n===0||n===1,um=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*oe/e)),hm=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*oe/e)+1,Ro={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ue)+1,easeOutSine:n=>Math.sin(n*ue),easeInOutSine:n=>-.5*(Math.cos($t*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ja(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ja(n)?n:um(n,.075,.3),easeOutElastic:n=>ja(n)?n:hm(n,.075,.3),easeInOutElastic(n){return ja(n)?n:n<.5?.5*um(n*2,.1125,.45):.5+.5*hm(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Ro.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ro.easeInBounce(n*2)*.5:Ro.easeOutBounce(n*2-1)*.5+.5};function cw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function dm(n){return cw(n)?n:new Go(n)}function Tu(n){return cw(n)?n:new Go(n).saturate(.5).darken(.1).hexString()}const Dk=["x","y","borderWidth","radius","tension"],Mk=["color","borderColor","backgroundColor"];function Ok(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Mk},numbers:{type:"number",properties:Dk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Vk(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fm=new Map;function Nk(n,t){t=t||{};const e=n+JSON.stringify(t);let s=fm.get(e);return s||(s=new Intl.NumberFormat(n,t),fm.set(e,s)),s}function Hd(n,t,e){return Nk(t,e).format(n)}const Lk={values(n){return ge(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),r=Fk(n,e)}const o=nw(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Hd(n,s,l)}};function Fk(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var uw={formatters:Lk};function Uk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ki=Object.create(null),Th=Object.create(null);function Po(n,t){if(!t)return n;const e=t.split(".");for(let s=0,i=e.length;s<i;++s){const r=e[s];n=n[r]||(n[r]=Object.create(null))}return n}function Iu(n,t,e){return typeof t=="string"?Yo(Po(n,t),e):Yo(Po(n,""),t)}class Bk{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Tu(i.backgroundColor),this.hoverBorderColor=(s,i)=>Tu(i.borderColor),this.hoverColor=(s,i)=>Tu(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Iu(this,t,e)}get(t){return Po(this,t)}describe(t,e){return Iu(Th,t,e)}override(t,e){return Iu(ki,t,e)}route(t,e,s,i){const r=Po(this,t),o=Po(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],u=o[i];return St(l)?Object.assign({},u,l):At(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var Jt=new Bk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ok,Vk,Uk]);function jk(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function pm(n,t,e,s,i){let r=t[i];return r||(r=t[i]=n.measureText(i).width,e.push(i)),r>s&&(s=r),s}function ci(n,t,e){const s=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*s)/s+i}function gm(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function mm(n,t,e,s){hw(n,t,e,s,null)}function hw(n,t,e,s,i){let r,o,a,l,u,h,d,p;const m=t.pointStyle,w=t.rotation,b=t.radius;let A=(w||0)*vk;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,s),n.rotate(A),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),m){default:i?n.ellipse(e,s,i/2,b,0,0,oe):n.arc(e,s,b,0,oe),n.closePath();break;case"triangle":h=i?i/2:b,n.moveTo(e+Math.sin(A)*h,s-Math.cos(A)*b),A+=om,n.lineTo(e+Math.sin(A)*h,s-Math.cos(A)*b),A+=om,n.lineTo(e+Math.sin(A)*h,s-Math.cos(A)*b),n.closePath();break;case"rectRounded":u=b*.516,l=b-u,o=Math.cos(A+li)*l,d=Math.cos(A+li)*(i?i/2-u:l),a=Math.sin(A+li)*l,p=Math.sin(A+li)*(i?i/2-u:l),n.arc(e-d,s-a,u,A-$t,A-ue),n.arc(e+p,s-o,u,A-ue,A),n.arc(e+d,s+a,u,A,A+ue),n.arc(e-p,s+o,u,A+ue,A+$t),n.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*b,h=i?i/2:l,n.rect(e-h,s-l,2*h,2*l);break}A+=li;case"rectRot":d=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+p,s-o),n.lineTo(e+d,s+a),n.lineTo(e-p,s+o),n.closePath();break;case"crossRot":A+=li;case"cross":d=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+p,s-o),n.lineTo(e-p,s+o);break;case"star":d=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+p,s-o),n.lineTo(e-p,s+o),A+=li,d=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+p,s-o),n.lineTo(e-p,s+o);break;case"line":o=i?i/2:Math.cos(A)*b,a=Math.sin(A)*b,n.moveTo(e-o,s-a),n.lineTo(e+o,s+a);break;case"dash":n.moveTo(e,s),n.lineTo(e+Math.cos(A)*(i?i/2:b),s+Math.sin(A)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function dw(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function $d(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Wd(n){n.restore()}function zk(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Hk(n,t,e,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,u=e+r.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function $k(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Wl(n,t,e,s,i,r={}){const o=ge(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(n.save(),n.font=i.string,zk(n,r),l=0;l<o.length;++l)u=o[l],r.backdrop&&$k(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Lt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(u,e,s,r.maxWidth)),n.fillText(u,e,s,r.maxWidth),Hk(n,e,s,u,r),s+=Number(i.lineHeight);n.restore()}function ql(n,t){const{x:e,y:s,w:i,h:r,radius:o}=t;n.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*$t,$t,!0),n.lineTo(e,s+r-o.bottomLeft),n.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,$t,ue,!0),n.lineTo(e+i-o.bottomRight,s+r),n.arc(e+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ue,0,!0),n.lineTo(e+i,s+o.topRight),n.arc(e+i-o.topRight,s+o.topRight,o.topRight,0,-ue,!0),n.lineTo(e+o.topLeft,s)}const Wk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kk(n,t){const e=(""+n).match(Wk);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Gk=n=>+n||0;function qd(n,t){const e={},s=St(t),i=s?Object.keys(t):t,r=St(n)?s?o=>At(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of i)e[o]=Gk(r(o));return e}function fw(n){return qd(n,{top:"y",right:"x",bottom:"y",left:"x"})}function lr(n){return qd(n,["topLeft","topRight","bottomLeft","bottomRight"])}function bn(n){const t=fw(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function We(n,t){n=n||{},t=t||Jt.font;let e=At(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=At(n.style,t.style);s&&!(""+s).match(qk)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:At(n.family,t.family),lineHeight:Kk(At(n.lineHeight,t.lineHeight),e),size:e,style:s,weight:At(n.weight,t.weight),string:""};return i.string=jk(i),i}function za(n,t,e,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Yk(n,t,e){const{min:s,max:i}=n,r=tw(t,(i-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function xr(n,t){return Object.assign(Object.create(n),t)}function Kd(n,t=[""],e,s,i=()=>n[0]){const r=e||n;typeof s>"u"&&(s=_w("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Kd([a,...n],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return gw(a,l,()=>s1(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return ym(a).includes(l)},ownKeys(a){return ym(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function yr(n,t,e,s){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:pw(n,s),setContext:r=>yr(n,r,e,s),override:r=>yr(n.override(r),t,e,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return gw(r,o,()=>Xk(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function pw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:s,isScriptable:Gs(e)?e:()=>e,isIndexable:Gs(s)?s:()=>s}}const Qk=(n,t)=>n?n+jd(t):t,Gd=(n,t)=>St(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const s=e();return n[t]=s,s}function Xk(n,t,e){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let a=s[t];return Gs(a)&&o.isScriptable(t)&&(a=Jk(t,a,n,e)),ge(a)&&a.length&&(a=Zk(t,a,n,o.isIndexable)),Gd(t,a)&&(a=yr(a,i,r&&r[t],o)),a}function Jk(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||s);return a.delete(n),Gd(n,l)&&(l=Yd(i._scopes,i,n,l)),l}function Zk(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(n))return t[r.index%t.length];if(St(t[0])){const l=t,u=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=Yd(u,i,n,h);t.push(yr(d,r,o&&o[n],a))}}return t}function mw(n,t,e){return Gs(n)?n(t,e):n}const t1=(n,t)=>n===!0?t:typeof n=="string"?Pi(t,n):void 0;function e1(n,t,e,s,i){for(const r of t){const o=t1(e,r);if(o){n.add(o);const a=mw(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function Yd(n,t,e,s){const i=t._rootScopes,r=mw(t._fallback,e,s),o=[...n,...i],a=new Set;a.add(s);let l=_m(a,o,e,r||e,s);return l===null||typeof r<"u"&&r!==e&&(l=_m(a,o,r,l,s),l===null)?!1:Kd(Array.from(a),[""],i,r,()=>n1(t,e,s))}function _m(n,t,e,s,i){for(;e;)e=e1(n,t,e,s,i);return e}function n1(n,t,e){const s=n._getTarget();t in s||(s[t]={});const i=s[t];return ge(i)&&St(e)?e:i||{}}function s1(n,t,e,s){let i;for(const r of t)if(i=_w(Qk(r,n),e),typeof i<"u")return Gd(n,i)?Yd(e,s,n,i):i}function _w(n,t){for(const e of t){if(!e)continue;const s=e[n];if(typeof s<"u")return s}}function ym(n){let t=n._keys;return t||(t=n._keys=i1(n._scopes)),t}function i1(n){const t=new Set;for(const e of n)for(const s of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function Qd(){return typeof window<"u"&&typeof document<"u"}function Xd(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Kl(n,t,e){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=n,s}const kc=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function r1(n,t){return kc(n).getPropertyValue(t)}const o1=["top","right","bottom","left"];function wi(n,t,e){const s={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=o1[i];s[r]=parseFloat(n[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const a1=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function l1(n,t){const e=n.touches,s=e&&e.length?e[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(a1(i,r,n.target))a=i,l=r;else{const u=t.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function fi(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:s}=t,i=kc(e),r=i.boxSizing==="border-box",o=wi(i,"padding"),a=wi(i,"border","width"),{x:l,y:u,box:h}=l1(n,e),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:w}=t;return r&&(m-=o.width+a.width,w-=o.height+a.height),{x:Math.round((l-d)/m*e.width/s),y:Math.round((u-p)/w*e.height/s)}}function c1(n,t,e){let s,i;if(t===void 0||e===void 0){const r=n&&Xd(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=kc(r),l=wi(a,"border","width"),u=wi(a,"padding");t=o.width-u.width-l.width,e=o.height-u.height-l.height,s=Kl(a.maxWidth,r,"clientWidth"),i=Kl(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||zl,maxHeight:i||zl}}const Cs=n=>Math.round(n*10)/10;function u1(n,t,e,s){const i=kc(n),r=wi(i,"margin"),o=Kl(i.maxWidth,n,"clientWidth")||zl,a=Kl(i.maxHeight,n,"clientHeight")||zl,l=c1(n,t,e);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const p=wi(i,"border","width"),m=wi(i,"padding");u-=m.width+p.width,h-=m.height+p.height}return u=Math.max(0,u-r.width),h=Math.max(0,s?u/s:h-r.height),u=Cs(Math.min(u,o,l.maxWidth)),h=Cs(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Cs(u/2)),(t!==void 0||e!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,u=Cs(Math.floor(h*s))),{width:u,height:h}}function vm(n,t,e){const s=t||1,i=Cs(n.height*s),r=Cs(n.width*s);n.height=Cs(n.height),n.width=Cs(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const h1=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Qd()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function bm(n,t){const e=r1(n,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const d1=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},f1=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function cr(n,t,e){return n?d1(t,e):f1()}function yw(n,t){let e,s;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=s)}function vw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Ha(n,t,e){return n.options.clip?n[e]:t[e]}function p1(n,t){const{xScale:e,yScale:s}=n;return e&&s?{left:Ha(e,t,"left"),right:Ha(e,t,"right"),top:Ha(s,t,"top"),bottom:Ha(s,t,"bottom")}:t}function g1(n,t){const e=t._clip;if(e.disabled)return!1;const s=p1(t,n.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:s.bottom+(e.bottom===!0?0:e.bottom)}}class m1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,i){const r=e.listeners[i],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ow.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Wn=new m1;const wm="transparent",_1={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const s=dm(n||wm),i=s.valid&&dm(t||wm);return i&&i.valid?i.mix(s,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class y1{constructor(t,e,s,i){const r=e[s];i=za([t.to,i,r,t.from]);const o=za([t.from,r,i]);this._active=!0,this._fn=t.fn||_1[t.type||typeof o],this._easing=Ro[t.easing]||Ro.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=za([t.to,e,i,t.from]),this._from=za([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][e]()}}class bw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!St(t))return;const e=Object.keys(Jt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!St(r))return;const o={};for(const a of e)o[a]=r[a];(ge(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){const s=e.options,i=b1(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&v1(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,e));continue}const h=e[u];let d=r[u];const p=s.get(u);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){t[u]=h;continue}r[u]=d=new y1(p,t,u,h),i.push(d)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return Wn.add(this._chart,s),!0}}function v1(n,t){const e=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function b1(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Em(n,t){const e=n&&n.options||{},s=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function w1(n,t,e){if(e===!1)return!1;const s=Em(n,e),i=Em(t,e);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function E1(n){let t,e,s,i;return St(n)?(t=n.top,e=n.right,s=n.bottom,i=n.left):t=e=s=i=n,{top:t,right:e,bottom:s,left:i,disabled:n===!1}}function ww(n,t){const e=[],s=n._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)e.push(s[i].index);return e}function Tm(n,t,e,s={}){const i=n.keys,r=s.mode==="single";let o,a,l,u;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(h=!0,s.all)continue;break}u=n.values[l],dn(u)&&(r||t===0||Us(t)===Us(u))&&(t+=u)}return!h&&!s.all?0:t}function T1(n,t){const{iScale:e,vScale:s}=t,i=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[i]:h,[r]:n[h]};return a}function Au(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function I1(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function A1(n){const{min:t,max:e,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function S1(n,t,e){const s=n[t]||(n[t]={});return s[e]||(s[e]={})}function Im(n,t,e,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function Am(n,t){const{chart:e,_cachedMeta:s}=n,i=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,u=o.axis,h=I1(r,o,s),d=t.length;let p;for(let m=0;m<d;++m){const w=t[m],{[l]:b,[u]:A}=w,P=w._stacks||(w._stacks={});p=P[u]=S1(i,h,b),p[a]=A,p._top=Im(p,o,!0,s.type),p._bottom=Im(p,o,!1,s.type);const N=p._visualValues||(p._visualValues={});N[a]=A}}function Su(n,t){const e=n.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function x1(n,t){return xr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function C1(n,t,e){return xr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Jr(n,t){const e=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){t=t||n._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const xu=n=>n==="reset"||n==="none",Sm=(n,t)=>t?n:Object.assign({},n),R1=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:ww(e,!0),values:null};class Jd{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Au(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),i=(d,p,m,w)=>d==="x"?p:d==="r"?w:m,r=e.xAxisID=At(s.xAxisID,Su(t,"x")),o=e.yAxisID=At(s.yAxisID,Su(t,"y")),a=e.rAxisID=At(s.rAxisID,Su(t,"r")),l=e.indexAxis,u=e.iAxisID=i(l,r,o,a),h=e.vAxisID=i(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&cm(this._data,this),t._stacked&&Jr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(St(e)){const i=this._cachedMeta;this._data=T1(e,i)}else if(s!==e){if(s){cm(s,this);const i=this._cachedMeta;Jr(i),i._parsed=[]}e&&Object.isExtensible(e)&&Rk(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Au(e.vScale,e),e.stack!==s.stack&&(i=!0,Jr(e),e.stack=s.stack),this._resyncElements(t),(i||r!==e._stacked)&&(Am(this,e._parsed),e._stacked=Au(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&e===i.length?!0:s._sorted,u=t>0&&s._parsed[t-1],h,d,p;if(this._parsing===!1)s._parsed=i,s._sorted=!0,p=i;else{ge(i[t])?p=this.parseArrayData(s,i,t,e):St(i[t])?p=this.parseObjectData(s,i,t,e):p=this.parsePrimitiveData(s,i,t,e);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<e;++h)s._parsed[h+t]=d=p[h],l&&(m()&&(l=!1),u=d);s._sorted=l}o&&Am(this,p)}parsePrimitiveData(t,e,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,u=r.getLabels(),h=r===o,d=new Array(i);let p,m,w;for(p=0,m=i;p<m;++p)w=p+s,d[p]={[a]:h||r.parse(u[w],w),[l]:o.parse(e[w],w)};return d}parseArrayData(t,e,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+s,d=e[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,e,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,d,p,m;for(h=0,d=i;h<d;++h)p=h+s,m=e[p],u[h]={x:r.parse(Pi(m,a),p),y:o.parse(Pi(m,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const i=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:ww(i,!0),values:e._stacks[t.axis]._visualValues};return Tm(a,o,r.index,{mode:s})}updateRangeFromParsed(t,e,s,i){const r=s[e.axis];let o=r===null?NaN:r;const a=i&&s._stacks[e.axis];i&&a&&(i.values=a,o=Tm(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=R1(e,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=A1(a);let p,m;function w(){m=i[p];const b=m[a.axis];return!dn(m[t.axis])||h>b||d<b}for(p=0;p<o&&!(!w()&&(this.updateRangeFromParsed(u,t,m,l),r));++p);if(r){for(p=o-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(u,t,m,l);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],dn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=E1(At(this.options.clip,w1(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,i=s.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=C1(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=x1(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const i=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Qo(s);if(a)return Sm(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),m=Object.keys(Jt.elements[t]),w=()=>this.getContext(s,i,e),b=u.resolveNamedOptions(p,m,w,d);return b.$shared&&(b.$shared=l,r[o]=Object.freeze(Sm(b,l))),b}_resolveAnimations(t,e,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(t,s,e))}const u=new bw(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xu(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:o}}updateElement(t,e,s,i){xu(i)?Object.assign(t,s):this._resolveAnimations(e,i).update(t,s)}updateSharedOptions(t,e,s){t&&!xu(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=s.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,s=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const l=u=>{for(u.length+=e,a=u.length-1;a>=o;a--)u[a]=u[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,i){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,e);s._stacked&&Jr(s,i)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,i]=t;this[e](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function P1(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=e.length;i<r;i++)s=s.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=rw(s.sort((i,r)=>i-r))}return n._cache.$bar}function k1(n){const t=n.iScale,e=P1(t,n.type);let s=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(Qo(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=e.length;i<r;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function D1(n,t,e,s){const i=e.barThickness;let r,o;return Lt(i)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[n]-r/2}}function M1(n,t,e,s){const i=t.pixels,r=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const u=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:u}}function O1(n,t,e,s){const i=e.parse(n[0],s),r=e.parse(n[1],s),o=Math.min(i,r),a=Math.max(i,r);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),t[e.axis]=u,t._custom={barStart:l,barEnd:u,start:i,end:r,min:o,max:a}}function Ew(n,t,e,s){return ge(n)?O1(n,t,e,s):t[e.axis]=e.parse(n,s),t}function xm(n,t,e,s){const i=n.iScale,r=n.vScale,o=i.getLabels(),a=i===r,l=[];let u,h,d,p;for(u=e,h=e+s;u<h;++u)p=t[u],d={},d[i.axis]=a||i.parse(o[u],u),l.push(Ew(p,d,r,u));return l}function Cu(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function V1(n,t,e){return n!==0?Us(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function N1(n){let t,e,s,i,r;return n.horizontal?(t=n.base>n.x,e="left",s="right"):(t=n.base<n.y,e="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:s,reverse:t,top:i,bottom:r}}function L1(n,t,e,s){let i=t.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=N1(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===s?i=u:(e._bottom||0)===s?i=h:(r[Cm(h,o,a,l)]=!0,i=u)),r[Cm(i,o,a,l)]=!0,n.borderSkipped=r}function Cm(n,t,e,s){return s?(n=F1(n,t,e),n=Rm(n,e,t)):n=Rm(n,t,e),n}function F1(n,t,e){return n===t?e:n===e?t:n}function Rm(n,t,e){return n==="start"?t:n==="end"?e:n}function U1(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class B1 extends Jd{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,s,i){return xm(t,e,s,i)}parseArrayData(t,e,s,i){return xm(t,e,s,i)}parseObjectData(t,e,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=r.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let p,m,w,b;for(p=s,m=s+i;p<m;++p)b=e[p],w={},w[r.axis]=r.parse(Pi(b,u),p),d.push(Ew(Pi(b,h),w,o,p));return d}updateRangeFromParsed(t,e,s,i){super.updateRangeFromParsed(t,e,s,i);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=Cu(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(e,i);for(let m=e;m<e+s;m++){const w=this.getParsed(m),b=r||Lt(w[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),A=this._calculateBarIndexPixels(m,h),P=(w._stacks||{})[a.axis],N={horizontal:u,base:b.base,enableBorderRadius:!P||Cu(w._custom)||o===P._top||o===P._bottom,x:u?b.head:A.center,y:u?A.center:b.head,height:u?A.size:Math.abs(b.size),width:u?Math.abs(b.size):A.size};p&&(N.options=d||this.resolveDataElementOptions(m,t[m].active?"active":i));const B=N.options||t[m].options;L1(N,B,P,o),U1(N,B,h.ratio),this.updateElement(t[m],m,N,i)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[s.axis],u=h=>{const d=h._parsed.find(m=>m[s.axis]===l),p=d&&d[h.vScale.axis];if(Lt(p)||isNaN(p))return!0};for(const h of i)if(!(e!==void 0&&u(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[At(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const i=this._getStacks(t,s),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||k1(e),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),u=l._custom,h=Cu(u);let d=l[e.axis],p=0,m=s?this.applyStack(e,l,s):d,w,b;m!==d&&(p=m-d,m=d),h&&(d=u.barStart,m=u.barEnd-u.barStart,d!==0&&Us(d)!==Us(u.barEnd)&&(p=0),p+=d);const A=!Lt(r)&&!h?r:p;let P=e.getPixelForValue(A);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(p+m):w=P,b=w-P,Math.abs(b)<o){b=V1(b,e,a)*o,d===a&&(P-=b/2);const N=e.getPixelForDecimal(0),B=e.getPixelForDecimal(1),U=Math.min(N,B),O=Math.max(N,B);P=Math.max(Math.min(P,O),U),w=P+b,s&&!h&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(w)-e.getValueForPixel(P))}if(P===e.getPixelForValue(a)){const N=Us(b)*e.getLineWidthForValue(a)/2;P+=N,b-=N}return{size:b,base:P,head:w,center:w+b/2}}_calculateBarIndexPixels(t,e){const s=e.scale,i=this.options,r=i.skipNull,o=At(i.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(e.grouped){const h=r?this._getStackCount(t):e.stackCount,d=i.barThickness==="flex"?M1(t,e,i,h*u):D1(t,e,i,h*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(At(p,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;a=d.start+d.chunk*w+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}function j1(n,t,e){let s=1,i=1,r=0,o=0;if(t<oe){const a=n,l=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(l),p=Math.sin(l),m=(B,U,O)=>$l(B,a,l,!0)?1:Math.max(U,U*e,O,O*e),w=(B,U,O)=>$l(B,a,l,!0)?-1:Math.min(U,U*e,O,O*e),b=m(0,u,d),A=m(ue,h,p),P=w($t,u,d),N=w($t+ue,h,p);s=(b-P)/2,i=(A-N)/2,r=-(b+P)/2,o=-(A+N)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class z1 extends Jd{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(St(s[t])){const{key:l="value"}=this._parsing;r=u=>+Pi(s[u],l)}let o,a;for(o=t,a=t+e;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return ts(this.options.rotation-90)}_getCircumference(){return ts(this.options.circumference)}_getRotationExtents(){let t=oe,e=-oe;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(fk(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:w,offsetY:b}=j1(d,h,l),A=(s.width-o)/p,P=(s.height-o)/m,N=Math.max(Math.min(A,P)/2,0),B=tw(this.options.radius,N),U=Math.max(B*l,0),O=(B-U)/this._getVisibleDatasetWeightTotal();this.offsetX=w*B,this.offsetY=b*B,i.total=this.calculateTotal(),this.outerRadius=B-O*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-O*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/oe)}updateElements(t,e,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=r&&u.animateScale,m=p?0:this.innerRadius,w=p?0:this.outerRadius,{sharedOptions:b,includeOptions:A}=this._getSharedOptions(e,i);let P=this._getRotation(),N;for(N=0;N<e;++N)P+=this._circumference(N,r);for(N=e;N<e+s;++N){const B=this._circumference(N,r),U=t[N],O={x:h+this.offsetX,y:d+this.offsetY,startAngle:P,endAngle:P+B,circumference:B,outerRadius:w,innerRadius:m};A&&(O.options=b||this.resolveDataElementOptions(N,U.active?"active":i)),P+=B,this.updateElement(U,N,O,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?oe*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Hd(e._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(At(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class H1 extends z1{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function ui(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zd{static override(t){Object.assign(Zd.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ui()}parse(){return ui()}format(){return ui()}add(){return ui()}diff(){return ui()}startOf(){return ui()}endOf(){return ui()}}var $1={_date:Zd};function W1(n,t,e,s){const{controller:i,data:r,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const u=a._reversePixels?xk:Eh;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const p=u(r,t,e-d),m=u(r,t,e+d);return{lo:p.lo,hi:m.hi}}}}else{const h=u(r,t,e);if(l){const{vScale:d}=i._cachedMeta,{_parsed:p}=n,m=p.slice(0,h.lo+1).reverse().findIndex(b=>!Lt(b[d.axis]));h.lo-=Math.max(0,m);const w=p.slice(h.hi).findIndex(b=>!Lt(b[d.axis]));h.hi+=Math.max(0,w)}return h}}return{lo:0,hi:r.length-1}}function Dc(n,t,e,s,i){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:h}=r[a],{lo:d,hi:p}=W1(r[a],t,o,i);for(let m=d;m<=p;++m){const w=h[m];w.skip||s(w,u,m)}}}function q1(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=e?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ru(n,t,e,s,i){const r=[];return!i&&!n.isPointInArea(t)||Dc(n,e,t,function(a,l,u){!i&&!dw(a,n.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:u})},!0),r}function K1(n,t,e,s){let i=[];function r(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=sw(o,{x:t.x,y:t.y});$l(d,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Dc(n,e,t,r),i}function G1(n,t,e,s,i,r){let o=[];const a=q1(e);let l=Number.POSITIVE_INFINITY;function u(h,d,p){const m=h.inRange(t.x,t.y,i);if(s&&!m)return;const w=h.getCenterPoint(i);if(!(!!r||n.isPointInArea(w))&&!m)return;const A=a(t,w);A<l?(o=[{element:h,datasetIndex:d,index:p}],l=A):A===l&&o.push({element:h,datasetIndex:d,index:p})}return Dc(n,e,t,u),o}function Pu(n,t,e,s,i,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!s?K1(n,t,e,i):G1(n,t,e,s,i,r)}function Pm(n,t,e,s,i){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return Dc(n,e,t,(l,u,h)=>{l[o]&&l[o](t[e],i)&&(r.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var Y1={modes:{index(n,t,e,s){const i=fi(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Ru(n,i,r,s,o):Pu(n,i,r,!1,s,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(n,t,e,s){const i=fi(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?Ru(n,i,r,s,o):Pu(n,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(n,t,e,s){const i=fi(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Ru(n,i,r,s,o)},nearest(n,t,e,s){const i=fi(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Pu(n,i,r,e.intersect,s,o)},x(n,t,e,s){const i=fi(t,n);return Pm(n,i,"x",e.intersect,s)},y(n,t,e,s){const i=fi(t,n);return Pm(n,i,"y",e.intersect,s)}}};const Tw=["left","top","right","bottom"];function Zr(n,t){return n.filter(e=>e.pos===t)}function km(n,t){return n.filter(e=>Tw.indexOf(e.pos)===-1&&e.box.axis===t)}function to(n,t){return n.sort((e,s)=>{const i=t?s:e,r=t?e:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Q1(n){const t=[];let e,s,i,r,o,a;for(e=0,s=(n||[]).length;e<s;++e)i=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function X1(n){const t={};for(const e of n){const{stack:s,pos:i,stackWeight:r}=e;if(!s||!Tw.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function J1(n,t){const e=X1(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,u=e[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return e}function Z1(n){const t=Q1(n),e=to(t.filter(u=>u.box.fullSize),!0),s=to(Zr(t,"left"),!0),i=to(Zr(t,"right")),r=to(Zr(t,"top"),!0),o=to(Zr(t,"bottom")),a=km(t,"x"),l=km(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Zr(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function Dm(n,t,e,s){return Math.max(n[e],t[e])+Math.max(n[s],t[s])}function Iw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function tD(n,t,e,s){const{pos:i,box:r}=e,o=n.maxPadding;if(!St(i)){e.size&&(n[i]-=e.size);const d=s[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[i]+=e.size}r.getPadding&&Iw(o,r.getPadding());const a=Math.max(0,t.outerWidth-Dm(o,n,"left","right")),l=Math.max(0,t.outerHeight-Dm(o,n,"top","bottom")),u=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:u,other:h}:{same:h,other:u}}function eD(n){const t=n.maxPadding;function e(s){const i=Math.max(t[s]-n[s],0);return n[s]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function nD(n,t){const e=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(n?["left","right"]:["top","bottom"])}function ho(n,t,e,s){const i=[];let r,o,a,l,u,h;for(r=0,o=n.length,u=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,nD(a.horizontal,t));const{same:d,other:p}=tD(t,e,a,s);u|=d&&i.length,h=h||p,l.fullSize||i.push(a)}return u&&ho(i,t,e,s)||h}function $a(n,t,e,s,i){n.top=e,n.left=t,n.right=t+s,n.bottom=e+i,n.width=s,n.height=i}function Mm(n,t,e,s){const i=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,u=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*h,p=u.size||l.height;Qo(u.start)&&(o=u.start),l.fullSize?$a(l,i.left,o,e.outerWidth-i.right-i.left,p):$a(l,t.left+u.placed,o,d,p),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*h,p=u.size||l.width;Qo(u.start)&&(r=u.start),l.fullSize?$a(l,r,i.top,p,e.outerHeight-i.bottom-i.top):$a(l,r,t.top+u.placed,p,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=o}var Rs={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,s){if(!n)return;const i=bn(n.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=Z1(n.boxes),l=a.vertical,u=a.horizontal;Mt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,A)=>A.box.options&&A.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},i);Iw(p,bn(s));const m=Object.assign({maxPadding:p,w:r,h:o,x:i.left,y:i.top},i),w=J1(l.concat(u),d);ho(a.fullSize,m,d,w),ho(l,m,d,w),ho(u,m,d,w)&&ho(l,m,d,w),eD(m),Mm(a.leftAndTop,m,d,w),m.x+=m.w,m.y+=m.h,Mm(a.rightAndBottom,m,d,w),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Mt(a.chartArea,b=>{const A=b.box;Object.assign(A,n.chartArea),A.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Aw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,i){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):s)}}isAttached(t){return!0}updateConfig(t){}}class sD extends Aw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hl="$chartjs",iD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Om=n=>n===null||n==="";function rD(n,t){const e=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[hl]={initial:{height:s,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Om(i)){const r=bm(n,"width");r!==void 0&&(n.width=r)}if(Om(s))if(n.style.height==="")n.height=n.width/(t||2);else{const r=bm(n,"height");r!==void 0&&(n.height=r)}return n}const Sw=h1?{passive:!0}:!1;function oD(n,t,e){n&&n.addEventListener(t,e,Sw)}function aD(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Sw)}function lD(n,t){const e=iD[n.type]||n.type,{x:s,y:i}=fi(n,t);return{type:e,chart:t,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Gl(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function cD(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gl(a.addedNodes,s),o=o&&!Gl(a.removedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function uD(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gl(a.removedNodes,s),o=o&&!Gl(a.addedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Xo=new Map;let Vm=0;function xw(){const n=window.devicePixelRatio;n!==Vm&&(Vm=n,Xo.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function hD(n,t){Xo.size||window.addEventListener("resize",xw),Xo.set(n,t)}function dD(n){Xo.delete(n),Xo.size||window.removeEventListener("resize",xw)}function fD(n,t,e){const s=n.canvas,i=s&&Xd(s);if(!i)return;const r=aw((a,l)=>{const u=i.clientWidth;e(a,l),u<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||r(u,h)});return o.observe(i),hD(n,r),o}function ku(n,t,e){e&&e.disconnect(),t==="resize"&&dD(n)}function pD(n,t,e){const s=n.canvas,i=aw(r=>{n.ctx!==null&&e(lD(r,n))},n);return oD(s,t,i),i}class gD extends Aw{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(rD(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[hl])return!1;const s=e[hl].initial;["height","width"].forEach(r=>{const o=s[r];Lt(o)?e.removeAttribute(r):e.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[hl],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:cD,detach:uD,resize:fD}[e]||pD;i[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),i=s[e];if(!i)return;({attach:ku,detach:ku,resize:ku}[e]||aD)(t,e,i),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,i){return u1(t,e,s,i)}isAttached(t){const e=t&&Xd(t);return!!(e&&e.isConnected)}}function mD(n){return!Qd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?sD:gD}let Cr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Hl(this.x)&&Hl(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function _D(n,t){const e=n.options.ticks,s=yD(n),i=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?bD(t):[],o=r.length,a=r[0],l=r[o-1],u=[];if(o>i)return wD(t,u,r,o/i),u;const h=vD(r,t,i);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Wa(t,u,h,Lt(m)?0:a-m,a),d=0,p=o-1;d<p;d++)Wa(t,u,h,r[d],r[d+1]);return Wa(t,u,h,l,Lt(m)?t.length:l+m),u}return Wa(t,u,h),u}function yD(n){const t=n.options.offset,e=n._tickSize(),s=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(s,i))}function vD(n,t,e){const s=ED(n),i=t.length/e;if(!s)return Math.max(i,1);const r=bk(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function bD(n){const t=[];let e,s;for(e=0,s=n.length;e<s;e++)n[e].major&&t.push(e);return t}function wD(n,t,e,s){let i=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(t.push(n[o]),i++,r=e[i*s])}function Wa(n,t,e,s,i){const r=At(s,0),o=Math.min(At(i,n.length),n.length);let a=0,l,u,h;for(e=Math.ceil(e),i&&(l=i-s,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(u=Math.max(r,0);u<o;u++)u===h&&(t.push(n[u]),a++,h=Math.round(r+a*e))}function ED(n){const t=n.length;let e,s;if(t<2)return!1;for(s=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==s)return!1;return s}const TD=n=>n==="left"?"right":n==="right"?"left":n,Nm=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Lm=(n,t)=>Math.min(t||n,n);function Fm(n,t){const e=[],s=n.length/t,i=n.length;let r=0;for(;r<i;r+=s)e.push(n[Math.floor(r)]);return e}function ID(n,t,e){const s=n.ticks.length,i=Math.min(t,s-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),u;if(!(e&&(s===1?u=Math.max(l-r,o-l):t===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(i-1))/2,l+=i<t?u:-u,l<r-a||l>o+a)))return l}function AD(n,t){Mt(n,e=>{const s=e.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[s[r]];s.splice(0,i)}})}function eo(n){return n.drawTicks?n.tickLength:0}function Um(n,t){if(!n.display)return 0;const e=We(n.font,t),s=bn(n.padding);return(ge(n.text)?n.text.length:1)*e.lineHeight+s.height}function SD(n,t){return xr(n,{scale:t,type:"scale"})}function xD(n,t,e){return xr(n,{tick:e,index:t,type:"tick"})}function CD(n,t,e){let s=lw(n);return(e&&t!=="right"||!e&&t==="right")&&(s=TD(s)),s}function RD(n,t,e,s){const{top:i,left:r,bottom:o,right:a,chart:l}=n,{chartArea:u,scales:h}=l;let d=0,p,m,w;const b=o-i,A=a-r;if(n.isHorizontal()){if(m=Je(s,r,a),St(e)){const P=Object.keys(e)[0],N=e[P];w=h[P].getPixelForValue(N)+b-t}else e==="center"?w=(u.bottom+u.top)/2+b-t:w=Nm(n,e,t);p=a-r}else{if(St(e)){const P=Object.keys(e)[0],N=e[P];m=h[P].getPixelForValue(N)-A+t}else e==="center"?m=(u.left+u.right)/2-A+t:m=Nm(n,e,t);w=Je(s,o,i),d=e==="left"?-ue:ue}return{titleX:m,titleY:w,maxWidth:p,rotation:d}}class Rr extends Cr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:i}=this;return t=Sn(t,Number.POSITIVE_INFINITY),e=Sn(e,Number.NEGATIVE_INFINITY),s=Sn(s,Number.POSITIVE_INFINITY),i=Sn(i,Number.NEGATIVE_INFINITY),{min:Sn(t,s),max:Sn(e,i),minDefined:dn(t),maxDefined:dn(e)}}getMinMax(t){let{min:e,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:e,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=i&&e>s?e:s,{min:Sn(e,Sn(s,e)),max:Sn(s,Sn(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zt(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yk(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Fm(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_D(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zt(this.options.afterUpdate,[this])}beforeSetDimensions(){zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=zt(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=Lm(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!e.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=$e(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:m/(s-1),d+6>a&&(a=m/(s-(t.offset?.5:1)),l=this.maxHeight-eo(t.grid)-e.padding-Um(t.title,this.chart.options.font),u=Math.sqrt(d*d+p*p),o=Ik(Math.min(Math.asin($e((h.highest.height+6)/a,-1,1)),Math.asin($e(l/u,-1,1))-Math.asin($e(p/u,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Um(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=eo(r)+l):(t.height=this.maxHeight,t.width=eo(r)+l),s.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:p}=this._getLabelSizes(),m=s.padding*2,w=ts(this.labelRotation),b=Math.cos(w),A=Math.sin(w);if(a){const P=s.mirror?0:A*d.width+b*p.height;t.height=Math.min(this.maxHeight,t.height+P+m)}else{const P=s.mirror?0:b*d.width+A*p.height;t.width=Math.min(this.maxWidth,t.width+P+m)}this._calculatePadding(u,h,A,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?u?(p=i*t.width,m=s*e.height):(p=s*t.height,m=i*e.width):r==="start"?m=e.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,m=e.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=e.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)Lt(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=Fm(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Lm(e,s));let u=0,h=0,d,p,m,w,b,A,P,N,B,U,O;for(d=0;d<e;d+=l){if(w=t[d].label,b=this._resolveTickFontOptions(d),i.font=A=b.string,P=r[A]=r[A]||{data:{},gc:[]},N=b.lineHeight,B=U=0,!Lt(w)&&!ge(w))B=pm(i,P.data,P.gc,B,w),U=N;else if(ge(w))for(p=0,m=w.length;p<m;++p)O=w[p],!Lt(O)&&!ge(O)&&(B=pm(i,P.data,P.gc,B,O),U+=N);o.push(B),a.push(U),u=Math.max(B,u),h=Math.max(U,h)}AD(r,e);const Y=o.indexOf(u),I=a.indexOf(h),v=E=>({width:o[E]||0,height:a[E]||0});return{first:v(0),last:v(e-1),widest:v(Y),highest:v(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Sk(this._alignToPixels?ci(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=xD(this.getContext(),t,s))}return this.$context||(this.$context=SD(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ts(this.labelRotation),s=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=eo(r),m=[],w=a.setContext(this.getContext()),b=w.display?w.width:0,A=b/2,P=function(ht){return ci(s,ht,b)};let N,B,U,O,Y,I,v,E,R,x,k,S;if(o==="top")N=P(this.bottom),I=this.bottom-p,E=N-A,x=P(t.top)+A,S=t.bottom;else if(o==="bottom")N=P(this.top),x=t.top,S=P(t.bottom)-A,I=N+A,E=this.top+p;else if(o==="left")N=P(this.right),Y=this.right-p,v=N-A,R=P(t.left)+A,k=t.right;else if(o==="right")N=P(this.left),R=t.left,k=P(t.right)-A,Y=N+A,v=this.left+p;else if(e==="x"){if(o==="center")N=P((t.top+t.bottom)/2+.5);else if(St(o)){const ht=Object.keys(o)[0],it=o[ht];N=P(this.chart.scales[ht].getPixelForValue(it))}x=t.top,S=t.bottom,I=N+A,E=I+p}else if(e==="y"){if(o==="center")N=P((t.left+t.right)/2);else if(St(o)){const ht=Object.keys(o)[0],it=o[ht];N=P(this.chart.scales[ht].getPixelForValue(it))}Y=N-A,v=Y-p,R=t.left,k=t.right}const wt=At(i.ticks.maxTicksLimit,d),pt=Math.max(1,Math.ceil(d/wt));for(B=0;B<d;B+=pt){const ht=this.getContext(B),it=r.setContext(ht),st=a.setContext(ht),Ct=it.lineWidth,Me=it.color,me=st.dash||[],Wt=st.dashOffset,qe=it.tickWidth,Ee=it.tickColor,Ke=it.tickBorderDash||[],le=it.tickBorderDashOffset;U=ID(this,B,l),U!==void 0&&(O=ci(s,U,Ct),u?Y=v=R=k=O:I=E=x=S=O,m.push({tx1:Y,ty1:I,tx2:v,ty2:E,x1:R,y1:x,x2:k,y2:S,width:Ct,color:Me,borderDash:me,borderDashOffset:Wt,tickWidth:qe,tickColor:Ee,tickBorderDash:Ke,tickBorderDashOffset:le}))}return this._ticksLength=d,this._borderValue=N,m}_computeLabelItems(t){const e=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=r,p=eo(s.grid),m=p+h,w=d?-h:m,b=-ts(this.labelRotation),A=[];let P,N,B,U,O,Y,I,v,E,R,x,k,S="middle";if(i==="top")Y=this.bottom-w,I=this._getXAxisLabelAlignment();else if(i==="bottom")Y=this.top+w,I=this._getXAxisLabelAlignment();else if(i==="left"){const pt=this._getYAxisLabelAlignment(p);I=pt.textAlign,O=pt.x}else if(i==="right"){const pt=this._getYAxisLabelAlignment(p);I=pt.textAlign,O=pt.x}else if(e==="x"){if(i==="center")Y=(t.top+t.bottom)/2+m;else if(St(i)){const pt=Object.keys(i)[0],ht=i[pt];Y=this.chart.scales[pt].getPixelForValue(ht)+m}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")O=(t.left+t.right)/2-m;else if(St(i)){const pt=Object.keys(i)[0],ht=i[pt];O=this.chart.scales[pt].getPixelForValue(ht)}I=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const wt=this._getLabelSizes();for(P=0,N=a.length;P<N;++P){B=a[P],U=B.label;const pt=r.setContext(this.getContext(P));v=this.getPixelForTick(P)+r.labelOffset,E=this._resolveTickFontOptions(P),R=E.lineHeight,x=ge(U)?U.length:1;const ht=x/2,it=pt.color,st=pt.textStrokeColor,Ct=pt.textStrokeWidth;let Me=I;o?(O=v,I==="inner"&&(P===N-1?Me=this.options.reverse?"left":"right":P===0?Me=this.options.reverse?"right":"left":Me="center"),i==="top"?u==="near"||b!==0?k=-x*R+R/2:u==="center"?k=-wt.highest.height/2-ht*R+R:k=-wt.highest.height+R/2:u==="near"||b!==0?k=R/2:u==="center"?k=wt.highest.height/2-ht*R:k=wt.highest.height-x*R,d&&(k*=-1),b!==0&&!pt.showLabelBackdrop&&(O+=R/2*Math.sin(b))):(Y=v,k=(1-x)*R/2);let me;if(pt.showLabelBackdrop){const Wt=bn(pt.backdropPadding),qe=wt.heights[P],Ee=wt.widths[P];let Ke=k-Wt.top,le=0-Wt.left;switch(S){case"middle":Ke-=qe/2;break;case"bottom":Ke-=qe;break}switch(I){case"center":le-=Ee/2;break;case"right":le-=Ee;break;case"inner":P===N-1?le-=Ee:P>0&&(le-=Ee/2);break}me={left:le,top:Ke,width:Ee+Wt.width,height:qe+Wt.height,color:pt.backdropColor}}A.push({label:U,font:E,textOffset:k,options:{rotation:b,color:it,strokeColor:st,strokeWidth:Ct,textAlign:Me,textBaseline:S,translation:[O,Y],backdrop:me}})}return A}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ts(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let u,h;return e==="left"?i?(h=this.right+r,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h=this.left)):e==="right"?i?(h=this.left+r,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const l=i[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,p;this.isHorizontal()?(u=ci(t,this.left,o)-o/2,h=ci(t,this.right,a)+a/2,d=p=l):(d=ci(t,this.top,o)-o/2,p=ci(t,this.bottom,a)+a/2,u=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(u,d),e.lineTo(h,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&$d(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,u=o.label,h=o.textOffset;Wl(s,u,0,h,l,a)}i&&Wd(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:i}}=this;if(!s.display)return;const r=We(s.font),o=bn(s.padding),a=s.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||St(e)?(l+=o.bottom,ge(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:p}=RD(this,l,e,a);Wl(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:p,textAlign:CD(a,e,i),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=At(t.grid&&t.grid.z,-1),i=At(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Rr.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return We(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class qa{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;DD(e)&&(s=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,PD(t,o,s),this.override&&Jt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,i=this.scope;s in e&&delete e[s],i&&s in Jt[i]&&(delete Jt[i][s],this.override&&delete ki[s])}}function PD(n,t,e){const s=Yo(Object.create(null),[e?Jt.get(e):{},Jt.get(t),n.defaults]);Jt.set(t,s),n.defaultRoutes&&kD(t,n.defaultRoutes),n.descriptors&&Jt.describe(t,n.descriptors)}function kD(n,t){Object.keys(t).forEach(e=>{const s=e.split("."),i=s.pop(),r=[n].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Jt.route(r,i,l,a)})}function DD(n){return"id"in n&&"defaults"in n}class MD{constructor(){this.controllers=new qa(Jd,"datasets",!0),this.elements=new qa(Cr,"elements"),this.plugins=new qa(Object,"plugins"),this.scales=new qa(Rr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Mt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){const i=jd(t);zt(s["before"+i],[],s),e[t](s),zt(s["after"+i],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Rn=new MD;class OD{constructor(){this._init=void 0}notify(t,e,s,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[e,i,r.options];if(zt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,i=At(s.options&&s.options.plugins,{}),r=VD(s);return i===!1&&!e?[]:LD(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,s),t,"stop"),this._notify(i(s,e),t,"start")}}function VD(n){const t={},e=[],s=Object.keys(Rn.plugins.items);for(let r=0;r<s.length;r++)e.push(Rn.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function ND(n,t){return!t&&n===!1?null:n===!0?{}:n}function LD(n,{plugins:t,localIds:e},s,i){const r=[],o=n.getContext();for(const a of t){const l=a.id,u=ND(s[l],i);u!==null&&r.push({plugin:a,options:FD(n.config,{plugin:a,local:e[l]},u,o)})}return r}function FD(n,{plugin:t,local:e},s,i){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ih(n,t){const e=Jt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function UD(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function BD(n,t){return n===t?"_index_":"_value_"}function Bm(n){if(n==="x"||n==="y"||n==="r")return n}function jD(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Ah(n,...t){if(Bm(n))return n;for(const e of t){const s=e.axis||jD(e.position)||n.length>1&&Bm(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function jm(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function zD(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(e.length)return jm(n,"x",e[0])||jm(n,"y",e[0])}return{}}function HD(n,t){const e=ki[n.type]||{scales:{}},s=t.scales||{},i=Ih(n.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!St(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ah(o,a,zD(o,n),Jt.scales[a.type]),u=BD(l,i),h=e.scales||{};r[o]=Co(Object.create(null),[{axis:l},a,h[l],h[u]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Ih(a,t),h=(ki[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=UD(d,l),m=o[p+"AxisID"]||p;r[m]=r[m]||Object.create(null),Co(r[m],[{axis:p},s[m],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Co(a,[Jt.scales[a.type],Jt.scale])}),r}function Cw(n){const t=n.options||(n.options={});t.plugins=At(t.plugins,{}),t.scales=HD(n,t)}function Rw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function $D(n){return n=n||{},n.data=Rw(n.data),Cw(n),n}const zm=new Map,Pw=new Set;function Ka(n,t){let e=zm.get(n);return e||(e=t(),zm.set(n,e),Pw.add(e)),e}const no=(n,t,e)=>{const s=Pi(t,e);s!==void 0&&n.add(s)};class WD{constructor(t){this._config=$D(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Rw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Cw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ka(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ka(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ka(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return Ka(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let i=s.get(t);return(!i||e)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,e,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>no(l,t,d))),h.forEach(d=>no(l,i,d)),h.forEach(d=>no(l,ki[r]||{},d)),h.forEach(d=>no(l,Jt,d)),h.forEach(d=>no(l,Th,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),Pw.has(e)&&o.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,ki[e]||{},Jt.datasets[e]||{},{type:e},Jt,Th]}resolveNamedOptions(t,e,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Hm(this._resolverCache,t,i);let l=o;if(KD(o,e)){r.$shared=!1,s=Gs(s)?s():s;const u=this.createResolver(t,s,a);l=yr(o,s,u)}for(const u of e)r[u]=l[u];return r}createResolver(t,e,s=[""],i){const{resolver:r}=Hm(this._resolverCache,t,s);return St(e)?yr(r,e,void 0,i):r}}function Hm(n,t,e){let s=n.get(t);s||(s=new Map,n.set(t,s));const i=e.join();let r=s.get(i);return r||(r={resolver:Kd(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const qD=n=>St(n)&&Object.getOwnPropertyNames(n).some(t=>Gs(n[t]));function KD(n,t){const{isScriptable:e,isIndexable:s}=pw(n);for(const i of t){const r=e(i),o=s(i),a=(o||r)&&n[i];if(r&&(Gs(a)||qD(a))||o&&ge(a))return!0}return!1}var GD="4.5.1";const YD=["top","bottom","left","right","chartArea"];function $m(n,t){return n==="top"||n==="bottom"||YD.indexOf(n)===-1&&t==="x"}function Wm(n,t){return function(e,s){return e[n]===s[n]?e[t]-s[t]:e[n]-s[n]}}function qm(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),zt(e&&e.onComplete,[n],t)}function QD(n){const t=n.chart,e=t.options.animation;zt(e&&e.onProgress,[n],t)}function kw(n){return Qd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const dl={},Km=n=>{const t=kw(n);return Object.values(dl).filter(e=>e.canvas===t).pop()};function XD(n,t,e){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=t){const o=n[i];delete n[i],(e>0||r>t)&&(n[r+e]=o)}}}function JD(n,t,e,s){return!e||n.type==="mouseout"?null:s?t:n}let Mc=class{static defaults=Jt;static instances=dl;static overrides=ki;static registry=Rn;static version=GD;static getChart=Km;static register(...t){Rn.add(...t),Gm()}static unregister(...t){Rn.remove(...t),Gm()}constructor(t,e){const s=this.config=new WD(e),i=kw(t),r=Km(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||mD(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=dk(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Pk(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],dl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Wn.listen(this,"complete",qm),Wn.listen(this,"progress",QD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:i,_aspectRatio:r}=this;return Lt(t)?e&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Rn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gm(this.canvas,this.ctx),this}stop(){return Wn.stop(this),this}resize(t,e){Wn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vm(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),zt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Mt(e,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=Ah(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Mt(r,o=>{const a=o.options,l=a.id,u=Ah(l,a),h=At(a.type,o.dtype);(a.position===void 0||$m(a.position,u)!==$m(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const p=Rn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Mt(i,(o,a)=>{o||delete s[a]}),Mt(s,o=>{Rs.configure(this,o,o.options),Rs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>e){for(let i=e;i<s;++i)this._destroyDatasetMeta(i);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Wm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,i)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=e.length;s<i;s++){const r=e[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Ih(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Rn.getController(a),{datasetElementType:u,dataElementType:h}=Jt.datasets[a];Object.assign(l,{dataElementType:Rn.getElement(h),datasetElementType:u&&Rn.getElement(u)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Mt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),p=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Mt(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Wm("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Mt(this.scales,t=>{Rs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!rm(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of e){const o=s==="_removeElements"?-r:r;XD(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<e;r++)if(!rm(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],Mt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Gs(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wn.has(this)?this.attached&&!Wn.running(this)&&Wn.start(this):(this.draw(),qm({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let i,r;for(i=0,r=e.length;i<r;++i){const o=e[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=g1(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&$d(e,i),t.controller.draw(),i&&Wd(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return dw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,i){const r=Y1.modes[e];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=xr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Qo(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Wn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gm(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete dl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Mt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,u)=>{e.addEventListener(this,l,u),t[l]=u},i=(l,u)=>{t[l]&&(e.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Mt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Mt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const i=s?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Bl(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const i=this.options.hover,r=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(e,t),a=s?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,s,o),l=yk(t),u=JD(t,this._lastEvent,s,l);s&&(this._lastEvent=null,zt(r.onHover,[t,a,this],this),l&&zt(r.onClick,[t,a,this],this));const h=!Bl(a,i);return(h||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=u,h}_getActiveElements(t,e,s,i){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}};function Gm(){return Mt(Mc.instances,n=>n._plugins.invalidate())}function ZD(n,t,e){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:h}=l,d=Math.min(u/o,kn(s-e));if(n.beginPath(),n.arc(i,r,o-u/2,s+d/2,e-d/2),a>0){const p=Math.min(u/a,kn(s-e));n.arc(i,r,a+u/2,e-p/2,s+p/2,!0)}else{const p=Math.min(u/2,o*kn(s-e));if(h==="round")n.arc(i,r,p,e-$t/2,s+$t/2,!0);else if(h==="bevel"){const m=2*p*p,w=-m*Math.cos(e+$t/2)+i,b=-m*Math.sin(e+$t/2)+r,A=m*Math.cos(s+$t/2)+i,P=m*Math.sin(s+$t/2)+r;n.lineTo(w,b),n.lineTo(A,P)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function tM(n,t,e){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let u=i/a;n.beginPath(),n.arc(r,o,a,s-u,e+u),l>i?(u=i/l,n.arc(r,o,l,e+u,s-u,!0)):n.arc(r,o,i,e+ue,s-ue),n.closePath(),n.clip()}function eM(n){return qd(n,["outerStart","outerEnd","innerStart","innerEnd"])}function nM(n,t,e,s){const i=eM(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{const u=(e-Math.min(r,l))*s/2;return $e(l,0,Math.min(r,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:$e(i.innerStart,0,o),innerEnd:$e(i.innerEnd,0,o)}}function Hi(n,t,e,s){return{x:e+n*Math.cos(t),y:s+n*Math.sin(t)}}function Yl(n,t,e,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+s+e-u,0),p=h>0?h+s+e+u:0;let m=0;const w=i-l;if(s){const pt=h>0?h-s:0,ht=d>0?d-s:0,it=(pt+ht)/2,st=it!==0?w*it/(it+s):w;m=(w-st)/2}const b=Math.max(.001,w*d-e/$t)/d,A=(w-b)/2,P=l+A+m,N=i-A-m,{outerStart:B,outerEnd:U,innerStart:O,innerEnd:Y}=nM(t,p,d,N-P),I=d-B,v=d-U,E=P+B/I,R=N-U/v,x=p+O,k=p+Y,S=P+O/x,wt=N-Y/k;if(n.beginPath(),r){const pt=(E+R)/2;if(n.arc(o,a,d,E,pt),n.arc(o,a,d,pt,R),U>0){const Ct=Hi(v,R,o,a);n.arc(Ct.x,Ct.y,U,R,N+ue)}const ht=Hi(k,N,o,a);if(n.lineTo(ht.x,ht.y),Y>0){const Ct=Hi(k,wt,o,a);n.arc(Ct.x,Ct.y,Y,N+ue,wt+Math.PI)}const it=(N-Y/p+(P+O/p))/2;if(n.arc(o,a,p,N-Y/p,it,!0),n.arc(o,a,p,it,P+O/p,!0),O>0){const Ct=Hi(x,S,o,a);n.arc(Ct.x,Ct.y,O,S+Math.PI,P-ue)}const st=Hi(I,P,o,a);if(n.lineTo(st.x,st.y),B>0){const Ct=Hi(I,E,o,a);n.arc(Ct.x,Ct.y,B,P-ue,E)}}else{n.moveTo(o,a);const pt=Math.cos(E)*d+o,ht=Math.sin(E)*d+a;n.lineTo(pt,ht);const it=Math.cos(R)*d+o,st=Math.sin(R)*d+a;n.lineTo(it,st)}n.closePath()}function sM(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Yl(n,t,e,s,l,i);for(let u=0;u<r;++u)n.fill();isNaN(a)||(l=o+(a%oe||oe))}return Yl(n,t,e,s,l,i),n.fill(),l}function iM(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:p,borderRadius:m}=l,w=l.borderAlign==="inner";if(!u)return;n.setLineDash(d||[]),n.lineDashOffset=p,w?(n.lineWidth=u*2,n.lineJoin=h||"round"):(n.lineWidth=u,n.lineJoin=h||"bevel");let b=t.endAngle;if(r){Yl(n,t,e,s,b,i);for(let A=0;A<r;++A)n.stroke();isNaN(a)||(b=o+(a%oe||oe))}w&&tM(n,t,b),l.selfJoin&&b-o>=$t&&m===0&&h!=="miter"&&ZD(n,t,b),r||(Yl(n,t,e,s,b,i),n.stroke())}class rM extends Cr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=sw(i,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,m=At(d,l-a),w=$l(r,a,l)&&a!==l,b=m>=oe||w,A=_i(o,u+p,h+p);return b&&A}getCenterPoint(t){const{x:e,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:u}=this.options,h=(i+r)/2,d=(o+a+u+l)/2;return{x:e+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>oe?Math.floor(s/oe):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min($t,s||0)),u=i*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,sM(t,this,u,r,o),iM(t,this,u,r,o),t.restore()}}function Dw(n,t){const{x:e,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,u,h,d;return n.horizontal?(d=o/2,a=Math.min(e,i),l=Math.max(e,i),u=s-d,h=s+d):(d=r/2,a=e-d,l=e+d,u=Math.min(s,i),h=Math.max(s,i)),{left:a,top:u,right:l,bottom:h}}function Ps(n,t,e,s){return n?0:$e(t,e,s)}function oM(n,t,e){const s=n.options.borderWidth,i=n.borderSkipped,r=fw(s);return{t:Ps(i.top,r.top,0,e),r:Ps(i.right,r.right,0,t),b:Ps(i.bottom,r.bottom,0,e),l:Ps(i.left,r.left,0,t)}}function aM(n,t,e){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=lr(i),o=Math.min(t,e),a=n.borderSkipped,l=s||St(i);return{topLeft:Ps(!l||a.top||a.left,r.topLeft,0,o),topRight:Ps(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Ps(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ps(!l||a.bottom||a.right,r.bottomRight,0,o)}}function lM(n){const t=Dw(n),e=t.right-t.left,s=t.bottom-t.top,i=oM(n,e/2,s/2),r=aM(n,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Du(n,t,e,s){const i=t===null,r=e===null,a=n&&!(i&&r)&&Dw(n,s);return a&&(i||_i(t,a.left,a.right))&&(r||_i(e,a.top,a.bottom))}function cM(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function uM(n,t){n.rect(t.x,t.y,t.w,t.h)}function Mu(n,t,e={}){const s=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-s,o=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class hM extends Cr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=lM(this),a=cM(o.radius)?ql:uM;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Mu(o,e,r)),t.clip(),a(t,Mu(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,Mu(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,s){return Du(this,t,e,s)}inXRange(t,e){return Du(this,t,null,e)}inYRange(t,e){return Du(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const Ym=(n,t)=>{let{boxHeight:e=t,boxWidth:s=t}=n;return n.usePointStyle&&(e=Math.min(e,t),s=n.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},dM=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Qm extends Cr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=zt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=We(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ym(s,r);let u,h;e.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((w,b)=>{const A=s+e/2+r.measureText(w.text).width;(b===0||u[u.length-1]+A+2*a>o)&&(d+=h,u[u.length-(b>0?0:1)]=0,m+=h,p++),l[b]={left:0,top:m,row:p,width:A,height:i},u[u.length-1]+=A+a}),d}_fitCols(t,e,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let d=a,p=0,m=0,w=0,b=0;return this.legendItems.forEach((A,P)=>{const{itemWidth:N,itemHeight:B}=fM(s,e,r,A,i);P>0&&m+B+2*a>h&&(d+=p+a,u.push({width:p,height:m}),w+=p+a,b++,p=m=0),l[P]={left:w,top:m,col:b,width:N,height:B},p=Math.max(p,N),m+=B+a}),d+=p,u.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:i},rtl:r}}=this,o=cr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Je(s,this.left+i,this.right-this.lineWidths[a]);for(const u of e)a!==u.row&&(a=u.row,l=Je(s,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+t+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=Je(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const u of e)u.col!==a&&(a=u.col,l=Je(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;$d(t,this),this._draw(),Wd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=Jt.color,l=cr(t.rtl,this.left,this.width),u=We(o.font),{padding:h}=o,d=u.size,p=d/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:w,boxHeight:b,itemHeight:A}=Ym(o,d),P=function(Y,I,v){if(isNaN(w)||w<=0||isNaN(b)||b<0)return;i.save();const E=At(v.lineWidth,1);if(i.fillStyle=At(v.fillStyle,a),i.lineCap=At(v.lineCap,"butt"),i.lineDashOffset=At(v.lineDashOffset,0),i.lineJoin=At(v.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=At(v.strokeStyle,a),i.setLineDash(At(v.lineDash,[])),o.usePointStyle){const R={radius:b*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:E},x=l.xPlus(Y,w/2),k=I+p;hw(i,R,x,k,o.pointStyleWidth&&w)}else{const R=I+Math.max((d-b)/2,0),x=l.leftForLtr(Y,w),k=lr(v.borderRadius);i.beginPath(),Object.values(k).some(S=>S!==0)?ql(i,{x,y:R,w,h:b,radius:k}):i.rect(x,R,w,b),i.fill(),E!==0&&i.stroke()}i.restore()},N=function(Y,I,v){Wl(i,v.text,Y,I+A/2,u,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},B=this.isHorizontal(),U=this._computeTitleHeight();B?m={x:Je(r,this.left+h,this.right-s[0]),y:this.top+h+U,line:0}:m={x:this.left+h,y:Je(r,this.top+U+h,this.bottom-e[0].height),line:0},yw(this.ctx,t.textDirection);const O=A+h;this.legendItems.forEach((Y,I)=>{i.strokeStyle=Y.fontColor,i.fillStyle=Y.fontColor;const v=i.measureText(Y.text).width,E=l.textAlign(Y.textAlign||(Y.textAlign=o.textAlign)),R=w+p+v;let x=m.x,k=m.y;l.setWidth(this.width),B?I>0&&x+R+h>this.right&&(k=m.y+=O,m.line++,x=m.x=Je(r,this.left+h,this.right-s[m.line])):I>0&&k+O>this.bottom&&(x=m.x=x+e[m.line].width+h,m.line++,k=m.y=Je(r,this.top+U+h,this.bottom-e[m.line].height));const S=l.x(x);if(P(S,k,Y),x=kk(E,x+w+p,B?x+R:this.right,t.rtl),N(l.x(x),k,Y),B)m.x+=R+h;else if(typeof Y.text!="string"){const wt=u.lineHeight;m.y+=Mw(Y,wt)+h}else m.y+=O}),vw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=We(e.font),i=bn(e.padding);if(!e.display)return;const r=cr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,u=i.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+u,d=Je(t.align,d,this.right-p);else{const w=this.columnSizes.reduce((b,A)=>Math.max(b,A.height),0);h=u+Je(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const m=Je(a,d,d+p);o.textAlign=r.textAlign(lw(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,Wl(o,e.text,m,h,s)}_computeTitleHeight(){const t=this.options.title,e=We(t.font),s=bn(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,i,r;if(_i(t,this.left,this.right)&&_i(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],_i(t,i.left,i.left+i.width)&&_i(e,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!mM(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=dM(i,s);i&&!r&&zt(e.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&zt(e.onHover,[t,s,this],this)}else s&&zt(e.onClick,[t,s,this],this)}}function fM(n,t,e,s,i){const r=pM(s,n,t,e),o=gM(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function pM(n,t,e,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(i).width}function gM(n,t,e){let s=n;return typeof t.text!="string"&&(s=Mw(t,e)),s}function Mw(n,t){const e=n.text?n.text.length:0;return t*e}function mM(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var _M={id:"legend",_element:Qm,start(n,t,e){const s=n.legend=new Qm({ctx:n.ctx,options:e,chart:n});Rs.configure(n,s,e),Rs.addBox(n,s)},stop(n){Rs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const s=n.legend;Rs.configure(n,s,e),s.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const s=t.datasetIndex,i=e.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(e?0:void 0),h=bn(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const fo={average(n){if(!n.length)return!1;let t,e,s=new Set,i=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Ak(t,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function xn(n,t){return t&&(ge(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function qn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yM(n,t){const{element:e,datasetIndex:s,index:i}=t,r=n.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:e}}function Xm(n,t){const e=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=We(t.bodyFont),u=We(t.titleFont),h=We(t.footerFont),d=r.length,p=i.length,m=s.length,w=bn(t.padding);let b=w.height,A=0,P=s.reduce((U,O)=>U+O.before.length+O.lines.length+O.after.length,0);if(P+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),P){const U=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*U+(P-m)*l.lineHeight+(P-1)*t.bodySpacing}p&&(b+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let N=0;const B=function(U){A=Math.max(A,e.measureText(U).width+N)};return e.save(),e.font=u.string,Mt(n.title,B),e.font=l.string,Mt(n.beforeBody.concat(n.afterBody),B),N=t.displayColors?o+2+t.boxPadding:0,Mt(s,U=>{Mt(U.before,B),Mt(U.lines,B),Mt(U.after,B)}),N=0,e.font=h.string,Mt(n.footer,B),e.restore(),A+=w.width,{width:A,height:b}}function vM(n,t){const{y:e,height:s}=t;return e<s/2?"top":e>n.height-s/2?"bottom":"center"}function bM(n,t,e,s){const{x:i,width:r}=s,o=e.caretSize+e.caretPadding;if(n==="left"&&i+r+o>t.width||n==="right"&&i-r-o<0)return!0}function wM(n,t,e,s){const{x:i,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let u="center";return s==="center"?u=i<=(a+l)/2?"left":"right":i<=r/2?u="left":i>=o-r/2&&(u="right"),bM(u,n,t,e)&&(u="center"),u}function Jm(n,t,e){const s=e.yAlign||t.yAlign||vM(n,e);return{xAlign:e.xAlign||t.xAlign||wM(n,t,e,s),yAlign:s}}function EM(n,t){let{x:e,width:s}=n;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function TM(n,t,e){let{y:s,height:i}=n;return t==="top"?s+=e:t==="bottom"?s-=i+e:s-=i/2,s}function Zm(n,t,e,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,u=i+r,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=lr(o);let w=EM(t,a);const b=TM(t,l,u);return l==="center"?a==="left"?w+=u:a==="right"&&(w-=u):a==="left"?w-=Math.max(h,p)+i:a==="right"&&(w+=Math.max(d,m)+i),{x:$e(w,0,s.width-t.width),y:$e(b,0,s.height-t.height)}}function Ga(n,t,e){const s=bn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-s.right:n.x+s.left}function t_(n){return xn([],qn(n))}function IM(n,t,e){return xr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function e_(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Ow={beforeTitle:$n,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:$n,beforeBody:$n,beforeLabel:$n,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:$n,afterBody:$n,beforeFooter:$n,footer:$n,afterFooter:$n};function Fe(n,t,e,s){const i=n[t].call(e,s);return typeof i>"u"?Ow[t].call(e,s):i}class n_ extends Cr{static positioners=fo;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&e.options.animation&&s.animations,r=new bw(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=IM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,i=Fe(s,"beforeTitle",this,t),r=Fe(s,"title",this,t),o=Fe(s,"afterTitle",this,t);let a=[];return a=xn(a,qn(i)),a=xn(a,qn(r)),a=xn(a,qn(o)),a}getBeforeBody(t,e){return t_(Fe(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,i=[];return Mt(t,r=>{const o={before:[],lines:[],after:[]},a=e_(s,r);xn(o.before,qn(Fe(a,"beforeLabel",this,r))),xn(o.lines,Fe(a,"label",this,r)),xn(o.after,qn(Fe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,e){return t_(Fe(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,i=Fe(s,"beforeFooter",this,t),r=Fe(s,"footer",this,t),o=Fe(s,"afterFooter",this,t);let a=[];return a=xn(a,qn(i)),a=xn(a,qn(r)),a=xn(a,qn(o)),a}_createItems(t){const e=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,u;for(l=0,u=e.length;l<u;++l)a.push(yM(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,p)=>t.filter(h,d,p,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Mt(a,h=>{const d=e_(t.callbacks,h);i.push(Fe(d,"labelColor",this,h)),r.push(Fe(d,"labelPointStyle",this,h)),o.push(Fe(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=fo[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Xm(this,s),u=Object.assign({},a,l),h=Jm(this.chart,s,u),d=Zm(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,i){const r=this.getCaretPosition(t,s,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=lr(a),{x:p,y:m}=t,{width:w,height:b}=e;let A,P,N,B,U,O;return r==="center"?(U=m+b/2,i==="left"?(A=p,P=A-o,B=U+o,O=U-o):(A=p+w,P=A+o,B=U-o,O=U+o),N=A):(i==="left"?P=p+Math.max(l,h)+o:i==="right"?P=p+w-Math.max(u,d)-o:P=this.caretX,r==="top"?(B=m,U=B-o,A=P-o,N=P+o):(B=m+b,U=B+o,A=P+o,N=P-o),O=B),{x1:A,x2:P,x3:N,y1:B,y2:U,y3:O}}drawTitle(t,e,s){const i=this.title,r=i.length;let o,a,l;if(r){const u=cr(s.rtl,this.x,this.width);for(t.x=Ga(this,s.titleAlign,s),e.textAlign=u.textAlign(s.titleAlign),e.textBaseline="middle",o=We(s.titleFont),a=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(i[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,e,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=r,h=We(r.bodyFont),d=Ga(this,"left",r),p=i.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,w=e.y+m;if(r.usePointStyle){const b={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},A=i.leftForLtr(p,u)+u/2,P=w+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,mm(t,b,A,P),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,mm(t,b,A,P)}else{t.lineWidth=St(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(p,u),A=i.leftForLtr(i.xPlus(p,1),u-2),P=lr(o.borderRadius);Object.values(P).some(N=>N!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ql(t,{x:b,y:w,w:u,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ql(t,{x:A,y:w+1,w:u-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(b,w,u,l),t.strokeRect(b,w,u,l),t.fillStyle=o.backgroundColor,t.fillRect(A,w+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=s,d=We(s.bodyFont);let p=d.lineHeight,m=0;const w=cr(s.rtl,this.x,this.width),b=function(v){e.fillText(v,w.x(t.x+m),t.y+p/2),t.y+=p+r},A=w.textAlign(o);let P,N,B,U,O,Y,I;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=Ga(this,A,s),e.fillStyle=s.bodyColor,Mt(this.beforeBody,b),m=a&&A!=="right"?o==="center"?u/2+h:u+2+h:0,U=0,Y=i.length;U<Y;++U){for(P=i[U],N=this.labelTextColors[U],e.fillStyle=N,Mt(P.before,b),B=P.lines,a&&B.length&&(this._drawColorBox(e,t,U,w,s),p=Math.max(d.lineHeight,l)),O=0,I=B.length;O<I;++O)b(B[O]),p=d.lineHeight;Mt(P.after,b)}m=0,p=d.lineHeight,Mt(this.afterBody,b),t.y-=r}drawFooter(t,e,s){const i=this.footer,r=i.length;let o,a;if(r){const l=cr(s.rtl,this.x,this.width);for(t.x=Ga(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",o=We(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:h}=s,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:w}=lr(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,s,i),e.lineTo(a+u-p,l),e.quadraticCurveTo(a+u,l,a+u,l+p),o==="center"&&r==="right"&&this.drawCaret(t,e,s,i),e.lineTo(a+u,l+h-w),e.quadraticCurveTo(a+u,l+h,a+u-w,l+h),o==="bottom"&&this.drawCaret(t,e,s,i),e.lineTo(a+m,l+h),e.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&r==="left"&&this.drawCaret(t,e,s,i),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=fo[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Xm(this,t),l=Object.assign({},o,this._size),u=Jm(e,t,l),h=Zm(t,l,u,e);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=bn(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,e),yw(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),vw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!Bl(s,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,s),a=this._positionChanged(o,t),l=e||!Bl(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:i,options:r}=this,o=fo[r.position].call(this,t,e);return o!==!1&&(s!==o.x||i!==o.y)}}var AM={id:"tooltip",_element:n_,positioners:fo,afterInit(n,t,e){e&&(n.tooltip=new n_({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ow},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SM=(n,t,e,s)=>(typeof t=="string"?(e=n.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function xM(n,t,e,s){const i=n.indexOf(t);if(i===-1)return SM(n,t,e,s);const r=n.lastIndexOf(t);return i!==r?e:i}const CM=(n,t)=>n===null?null:$e(Math.round(n),0,t);function s_(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class RM extends Rr{static id="category";static defaults={ticks:{callback:s_}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:i,label:r}of e)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Lt(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:xM(s,t,At(e,t),this._addedLabels),CM(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return s_.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function PM(n,t){const e=[],{bounds:i,step:r,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:p}=n,m=r||1,w=h-1,{min:b,max:A}=t,P=!Lt(o),N=!Lt(a),B=!Lt(u),U=(A-b)/(d+1);let O=am((A-b)/w/m)*m,Y,I,v,E;if(O<1e-14&&!P&&!N)return[{value:b},{value:A}];E=Math.ceil(A/O)-Math.floor(b/O),E>w&&(O=am(E*O/w/m)*m),Lt(l)||(Y=Math.pow(10,l),O=Math.ceil(O*Y)/Y),i==="ticks"?(I=Math.floor(b/O)*O,v=Math.ceil(A/O)*O):(I=b,v=A),P&&N&&r&&Ek((a-o)/r,O/1e3)?(E=Math.round(Math.min((a-o)/O,h)),O=(a-o)/E,I=o,v=a):B?(I=P?o:I,v=N?a:v,E=u-1,O=(v-I)/E):(E=(v-I)/O,ul(E,Math.round(E),O/1e3)?E=Math.round(E):E=Math.ceil(E));const R=Math.max(lm(O),lm(I));Y=Math.pow(10,Lt(l)?R:l),I=Math.round(I*Y)/Y,v=Math.round(v*Y)/Y;let x=0;for(P&&(p&&I!==o?(e.push({value:o}),I<o&&x++,ul(Math.round((I+x*O)*Y)/Y,o,i_(o,U,n))&&x++):I<o&&x++);x<E;++x){const k=Math.round((I+x*O)*Y)/Y;if(N&&k>a)break;e.push({value:k})}return N&&p&&v!==a?e.length&&ul(e[e.length-1].value,a,i_(a,U,n))?e[e.length-1].value=a:e.push({value:a}):(!N||v===a)&&e.push({value:v}),e}function i_(n,t,{horizontal:e,minRotation:s}){const i=ts(s),r=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class kM extends Rr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=e?i:l,a=l=>r=s?r:l;if(t){const l=Us(i),u=Us(r);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=PM(i,r);return t.bounds==="ticks"&&Tk(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-e)/Math.max(t.length-1,1)/2;e-=i,s+=i}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return Hd(t,this.chart.options.locale,this.options.ticks.format)}}class DM extends kM{static id="linear";static defaults={ticks:{callback:uw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=dn(t)?t:0,this.max=dn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=ts(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Oc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},He=Object.keys(Oc);function r_(n,t){return n-t}function o_(n,t){if(Lt(t))return null;const e=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),dn(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(Hl(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,i)),+o)}function a_(n,t,e,s){const i=He.length;for(let r=He.indexOf(n);r<i-1;++r){const o=Oc[He[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return He[r]}return He[i-1]}function MM(n,t,e,s,i){for(let r=He.length-1;r>=He.indexOf(e);r--){const o=He[r];if(Oc[o].common&&n._adapter.diff(i,s,o)>=t-1)return o}return He[e?He.indexOf(e):0]}function OM(n){for(let t=He.indexOf(n)+1,e=He.length;t<e;++t)if(Oc[He[t]].common)return He[t]}function l_(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:s,hi:i}=zd(e,t),r=e[s]>=t?e[s]:e[i];n[r]=!0}}function VM(n,t,e,s){const i=n._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function c_(n,t,e){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!e?s:VM(n,s,i,e)}class u_ extends Rr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),i=this._adapter=new $1._date(t.adapters.date);i.init(e),Co(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:o_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=dn(i)&&!isNaN(i)?i:+e.startOf(Date.now(),s),r=dn(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Ck(i,r,o);return this._unit=e.unit||(s.autoSkip?a_(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):MM(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:OM(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),c_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=$e(e,0,o),s=$e(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||a_(r.minUnit,e,s,this._getLabelCapacity(e)),a=At(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,u=Hl(l)||l===!0,h={};let d=e,p,m;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(s,e,o)>1e5*a)throw new Error(e+" and "+s+" are too far apart with stepSize of "+a+" "+o);const w=i.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<s;p=+t.add(p,a,o),m++)l_(h,p,w);return(p===s||i.bounds==="ticks"||m===1)&&l_(h,p,w),Object.keys(h).sort(r_).map(b=>+b)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,o=e||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,i){const r=this.options,o=r.ticks.callback;if(o)return zt(o,[t,e,s],this);const a=r.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],p=s[e],m=u&&d&&p&&p.major;return this._adapter.format(t,i||(m?d:h))}generateTickLabels(t){let e,s,i;for(e=0,s=t.length;e<s;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,i=ts(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,i=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,c_(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,s=i.length;e<s;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const i=this.getLabels();for(e=0,s=i.length;e<s;++e)t.push(o_(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return rw(t.sort(r_))}}function Ya(n,t,e){let s=0,i=n.length-1,r,o,a,l;e?(t>=n[s].pos&&t<=n[i].pos&&({lo:s,hi:i}=Eh(n,"pos",t)),{pos:r,time:a}=n[s],{pos:o,time:l}=n[i]):(t>=n[s].time&&t<=n[i].time&&({lo:s,hi:i}=Eh(n,"time",t)),{time:r,pos:a}=n[s],{time:o,pos:l}=n[i]);const u=o-r;return u?a+(l-a)*(t-r)/u:a}class TV extends u_{static id="timeseries";static defaults=u_.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ya(e,this.min),this._tableRange=Ya(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,i=[],r=[];let o,a,l,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=e&&u<=s&&i.push(u);if(i.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ya(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return Ya(this._table,s*this._tableRange+this._minPos,!0)}}const Vw={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},NM={ariaLabel:{type:String},ariaDescribedby:{type:String}},LM={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Vw,...NM},FM=my[0]==="2"?(n,t)=>Object.assign(n,{attrs:t}):(n,t)=>Object.assign(n,t);function $i(n){return Zo(n)?It(n):n}function UM(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return Zo(t)?new Proxy(n,{}):n}function BM(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Nw(n,t){n.labels=t}function Lw(n,t,e){const s=[];n.datasets=t.map(i=>{const r=n.datasets.find(o=>o[e]===i[e]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function jM(n,t){const e={labels:[],datasets:[]};return Nw(e,n.labels),Lw(e,n.datasets,t),e}const zM=$_({props:LM,setup(n,t){let{expose:e,slots:s}=t;const i=Yt(null),r=M_(null);e({chart:r});const o=()=>{if(!i.value)return;const{type:u,data:h,options:d,plugins:p,datasetIdKey:m}=n,w=jM(h,m),b=UM(w,h);r.value=new Mc(i.value,{type:u,data:b,options:{...d},plugins:p})},a=()=>{const u=It(r.value);u&&(n.destroyDelay>0?setTimeout(()=>{u.destroy(),r.value=null},n.destroyDelay):(u.destroy(),r.value=null))},l=u=>{u.update(n.updateMode)};return Bh(o),jh(a),_o([()=>n.options,()=>n.data],(u,h)=>{let[d,p]=u,[m,w]=h;const b=It(r.value);if(!b)return;let A=!1;if(d){const P=$i(d),N=$i(m);P&&P!==N&&(BM(b,P),A=!0)}if(p){const P=$i(p.labels),N=$i(w.labels),B=$i(p.datasets),U=$i(w.datasets);P!==N&&(Nw(b.config.data,P),A=!0),B&&B!==U&&(Lw(b.config.data,B,n.datasetIdKey),A=!0)}A&&Lh(()=>{l(b)})},{deep:!0}),()=>Wu("canvas",{role:"img","aria-label":n.ariaLabel,"aria-describedby":n.ariaDescribedby,ref:i},[Wu("p",{},[s.default?s.default():""])])}});function Fw(n,t){return Mc.register(t),$_({props:Vw,setup(e,s){let{expose:i}=s;const r=M_(null),o=a=>{r.value=a?.chart};return i({chart:r}),()=>Wu(zM,FM({ref:o},{type:n,...e}))}})}const HM=Fw("bar",B1),$M=Fw("pie",H1),WM=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},qM={class:"navbar-wrapper"},KM={class:"logo-area"},GM=["src"],YM={class:"brand-info-center"},QM={class:"nav-actions"},XM={key:4,class:"user-pill"},JM={class:"role-badge"},ZM={class:"center-column main-content"},tO={key:1,class:"stats-panel glass-premium fade-in"},eO={class:"charts-grid"},nO={class:"c-box"},sO={class:"c-box"},iO={class:"search-bar"},rO={class:"feed"},oO={class:"post-header"},aO={class:"badges"},lO={key:0,class:"badge-class"},cO={class:"meta"},uO={class:"post-body"},hO={class:"interactions"},dO=["onClick"],fO={key:0,class:"actions-compact"},pO=["onClick"],gO=["onClick"],mO={class:"ans-head"},_O={key:0,class:"app-tag"},yO=["onClick"],vO={key:2,class:"reply-compact"},bO=["onUpdate:modelValue"],wO=["onClick"],EO={key:2,class:"pagination"},TO=["disabled"],IO=["disabled"],AO={class:"footer-wrapper"},SO={class:"marquee-content"},xO={key:1,class:"modal-overlay"},CO={class:"modal-box"},RO={class:"tabs"},PO={key:0},kO={key:1},DO={class:"register-tabs"},MO={key:0},OO=["value"],VO={key:1},NO={key:2,class:"modal-overlay"},LO={class:"modal-box"},FO={key:0,class:"ai-warning"},UO=["value"],BO=["value"],jO={key:3,class:"modal-overlay"},zO={class:"modal-box large"},HO={class:"s-section",style:{"border-left":"4px solid #f39c12"}},$O={class:"s-section"},WO={class:"s-section"},qO={class:"color-grid"},KO={key:4,class:"modal-overlay"},GO={class:"modal-box large"},YO={class:"s-section safe-zone",style:{"border-left":"4px solid #e74c3c"}},QO={class:"restore-zone"},XO={class:"btn-restore-file"},JO={class:"s-section"},ZO={class:"s-section"},tV={class:"row-flex"},eV={class:"tag-list"},nV=["onClick"],sV={class:"s-section"},iV={class:"row-flex"},rV={class:"tag-list"},oV=["onClick"],aV={class:"s-section"},lV={class:"stu-section"},cV=["onClick"],uV=["onClick"],hV={key:0,class:"empty-msg"},dV={class:"s-section"},fV={class:"stu-section"},pV=["onClick"],gV=["onClick"],mV={key:0,class:"empty-msg"},_V=["onClick"],Ou=4,yV={__name:"App",setup(n){Mc.register(rM,AM,_M,RM,DM,hM);const t=Yt([]),e=Yt([]),s=Yt([]),i=Yt(null),r=Yt(!1),o=Yt(!1),a=Yt(!1),l=Yt(!1),u=Yt(!1),h=Yt("login"),d=Yt("student"),p=Yt({email:"",password:""}),m=Yt({name:"",email:"",password:"",confirmPassword:"",class:"",number:"",schoolCode:""}),w=Yt(""),b=Yt(""),A=Yt({subject:"",classLevel:"",content:""}),P=Yt({}),N=Yt(""),B=Yt(null),U=Yt(1),O=Yt({name:"Takpr Anadolu mam Hatip Lisesi",schoolCode:"TAIHL2026",logo:"https://img.icons8.com/color/96/graduation-cap.png",announcement:"2026 Eitim retim Yl Hayrl Olsun.",subjects:["Matematik","Edebiyat","Fizik","Tarih","Din K.","Rehberlik"],classes:["9. Snf","10. Snf","11. Snf","12. Snf"],styles:{fontFamily:"'Inter', sans-serif",customFontUrl:"",customFontName:"",baseFontSize:15,headerBg:"#1e293b",headerText:"#ffffff",accentColor:"#16a085",footerText:"#fbbf24",bodyText:"#333333",titleFont:"'Inter', sans-serif",titleSize:24,titleColor:"#ffffff"}});_o(()=>A.value.content,V=>{if(!V||V.length<5){B.value=null;return}const _=t.value.find(T=>T.isApproved&&T.content.toLowerCase().includes(V.toLowerCase()));B.value=_||null});const Y=V=>V>100?" stad":V>50?" Kdemli":V>20?" Gayretli":" Yeni",I=qi(()=>{let V=t.value.filter(_=>_.isApproved||i.value?.role==="admin"||i.value?.role==="teacher");if(N.value){const _=N.value.toLowerCase();V=V.filter(T=>(T.content||"").toLowerCase().includes(_)||(T.subject||"").toLowerCase().includes(_)||(T.sender||"").toLowerCase().includes(_))}return V}),v=qi(()=>Math.ceil(I.value.length/Ou)),E=qi(()=>{const V=(U.value-1)*Ou;return I.value.slice(V,V+Ou)}),R=V=>{V>=1&&V<=v.value&&(U.value=V)},x=async()=>{try{await Hp(sn,eh);const _=(await kS(sn,HP)).user,T=await Qr(qt(Vt,"users",_.uid));if(T.exists()){const $=T.data();if(!$.isApproved){alert("Hesabnz henz onaylanmamtr."),Kr(sn);return}i.value={id:_.uid,...$},r.value=!1}else alert("Kullanc bulunamad. Ltfen kantlama koduyla kaydolun."),Kr(sn)}catch(V){alert("Google giri hatas: "+V.message)}},k=async()=>{try{await Hp(sn,eh);const{email:V,password:_}=p.value;if(!V||!_){alert("E-posta ve ifre gerekli!");return}const T=await cS(sn,V,_),$=await Qr(qt(Vt,"users",T.user.uid));if($.exists()){const X=$.data();if(!X.isApproved){alert("Hesabnz henz onaylanmamtr. Ynetici tarafndan dorulanmasn bekleyin."),await Kr(sn);return}i.value={id:T.user.uid,...X},r.value=!1,p.value={email:"",password:""}}}catch(V){alert("Giri Hatas: "+(V.code==="auth/user-not-found"?"Kullanc bulunamad":V.message))}},S=async()=>{try{const{name:V,email:_,password:T,confirmPassword:$,class:X,number:et,schoolCode:gt}=m.value;if(!V||!_||!T||!X||!et||!gt){alert("Tm alanlar gerekli!");return}if(T!==$){alert("ifreler elemiyor!");return}if(gt!==O.value.schoolCode){alert("ehir kodunuz yanl!");return}const Rt=await zp(sn,_,T);await Xr(qt(Vt,"users",Rt.user.uid),{name:V,email:_,class:X,number:et,role:"student",points:0,isApproved:!1,createdAt:_u()}),alert(" Kaydnz baarl! Ynetici onay bekleniyor."),h.value="login",m.value={name:"",email:"",password:"",confirmPassword:"",class:"",number:"",schoolCode:""}}catch(V){alert("Kayt Hatas: "+V.message)}},wt=async()=>{try{const{name:V,email:_,password:T,confirmPassword:$,schoolCode:X}=m.value;if(!V||!_||!T||!X){alert("Tm alanlar gerekli!");return}if(T!==$){alert("ifreler elemiyor!");return}if(X!==O.value.schoolCode){alert("Okul kodunuz yanl!");return}const et=await zp(sn,_,T);await Xr(qt(Vt,"users",et.user.uid),{name:V,email:_,role:"teacher",points:0,isApproved:!1,createdAt:_u()}),alert(" retmen kaytlamas baarl! Admin onay bekleniyor."),h.value="login",d.value="student",m.value={name:"",email:"",password:"",confirmPassword:"",class:"",number:"",schoolCode:""}}catch(V){alert("Kayt Hatas: "+V.message)}},pt=async()=>{try{await Kr(sn),i.value=null}catch(V){alert("k hatas: "+V.message)}},ht=()=>{const V={settings:O.value,questions:t.value,users:e.value,teachers:s.value,date:new Date().toISOString()},_=new Blob([JSON.stringify(V,null,2)],{type:"application/json"}),T=document.createElement("a");T.href=URL.createObjectURL(_),T.download="ADAB_Yedek.json",T.click()},it=async V=>{const _=V.target.files[0];if(!_||!confirm("Yedek yklenecek. Emin misiniz?"))return;const T=new FileReader;T.onload=async $=>{try{const X=JSON.parse($.target.result);X.settings&&(O.value=X.settings,await Xr(qt(Vt,"settings","school_info"),X.settings)),alert(" Yedek Yklendi! Sayfa yenileniyor..."),window.location.reload()}catch(X){alert("Hata: "+X.message)}},T.readAsText(_)},st=async()=>{await Xr(qt(Vt,"settings","school_info"),O.value),alert(" Ayarlar Mhrlendi!"),o.value=!1,a.value=!1},Ct=async()=>{await Xr(qt(Vt,"settings","safe_snapshot"),O.value),alert(" Snapshot Alnd!")},Me=async()=>{const V=await Qr(qt(Vt,"settings","safe_snapshot"));V.exists()&&(O.value=V.data(),await st(),window.location.reload())},me=async V=>{await ys(qt(Vt,"questions",V.id),{likes:yu(1)})},Wt=async(V,_)=>{_==="soru"?(await ys(qt(Vt,"questions",V.id),{isApproved:!0}),V.senderId&&await ys(qt(Vt,"users",V.senderId),{points:yu(10)})):_==="cevap"?(await ys(qt(Vt,"questions",V.id),{answerApproved:!0}),V.respId&&await ys(qt(Vt,"users",V.respId),{points:yu(20)})):_==="sil"&&confirm("Soruyu silinsin mi?")&&await La(qt(Vt,"questions",V.id))},qe=async V=>{confirm("Bu renciyi silmek istediinizden emin misiniz?")&&(await La(qt(Vt,"users",V)),alert(" renci silindi!"))},Ee=()=>{w.value.trim()&&(O.value.subjects.includes(w.value)?alert("Bu ders zaten var!"):(O.value.subjects.push(w.value),w.value="",st()))},Ke=V=>{confirm("Dersi silmek istediinizden emin misiniz?")&&(O.value.subjects.splice(V,1),st())},le=()=>{b.value.trim()&&(O.value.classes.includes(b.value)?alert("Bu snf zaten var!"):(O.value.classes.push(b.value),b.value="",st()))},wn=V=>{confirm("Snf silmek istediinizden emin misiniz?")&&(O.value.classes.splice(V,1),st())},jn=async V=>{await ys(qt(Vt,"users",V),{isApproved:!0}),alert(" retmen onayland!")},ti=async V=>{confirm("retmen bavurusunu reddet?")&&(await La(qt(Vt,"users",V)),alert(" Bavuru reddedildi!"))},zn=()=>{const V=t.value.filter(X=>X.isApproved),_={meta:{project:"ADAB - Takpr AIHL",description:"Bu veri seti, rencilerin akademik sorularn ve verilen cevaplar ierir.",instruction:"Sen bir eitim asistansn. Aadaki Soru-Cevap verilerini kullanarak rencilerin eksik olduu konular analiz et ve zet kar."},data:V.map(X=>({ders:X.subject,seviye:X.classLevel,soru:X.content,cevap:X.cevap||"Henz cevaplanmam",begeni:X.likes||0}))},T=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),$=document.createElement("a");$.href=URL.createObjectURL(T),$.download="ADAB_AI_Dataset.json",$.click()};let Ni=null,C=null,D=null;const j=()=>{C&&(C(),C=null),D&&(D(),D=null),e.value=[],s.value=[]},K=()=>{j(),C=wu(Na(Yr(Vt,"users"),vu("role","==","student"),bu("points","desc")),V=>e.value=V.docs.map(_=>({id:_.id,..._.data()}))),D=wu(Na(Yr(Vt,"users"),vu("role","==","teacher")),V=>s.value=V.docs.map(_=>({id:_.id,..._.data()})))},W=V=>{Ni&&Ni();const _=V?Na(Yr(Vt,"questions"),bu("created_at","desc")):Na(Yr(Vt,"questions"),vu("isApproved","==",!0),bu("created_at","desc"));Ni=wu(_,T=>t.value=T.docs.map($=>({id:$.id,...$.data()})))},q=async()=>{const V=await Qr(qt(Vt,"settings","school_info"));V.exists()&&(O.value=V.data())};Bh(async()=>{dS(sn,async V=>{if(V){const _=await Qr(qt(Vt,"users",V.uid));if(_.exists()){const T=_.data();if(T.isApproved){i.value={id:V.uid,...T},W(!0),T.role==="admin"||T.role==="teacher"?K():j(),await q();return}}await Kr(sn)}i.value=null,W(!1),j()})});const J=qi(()=>{const V=t.value.filter(T=>T.isApproved),_={};return V.forEach(T=>_[T.subject]=(_[T.subject]||0)+1),{labels:Object.keys(_),datasets:[{backgroundColor:["#16a085","#2980b9","#f39c12","#d35400","#1e293b"],data:Object.values(_)}]}}),G=qi(()=>({labels:["Mevcut","Hedef (500)"],datasets:[{label:"Etkileim",backgroundColor:["#16a085","#e2e8f0"],data:[t.value.length,500]}]}));return(V,_)=>(at(),ct("div",{class:"app-container",style:ee({fontFamily:O.value.styles.customFontName?O.value.styles.customFontName:O.value.styles.fontFamily,fontSize:O.value.styles.baseFontSize+"px",color:O.value.styles.bodyText})},[O.value.styles.customFontUrl?(at(),dy(gT("style"),{key:0},{default:j_(()=>[Ue(" @import url('"+xt(O.value.styles.customFontUrl)+"'); ",1)]),_:1})):te("",!0),M("header",qM,[M("div",{class:"center-column banner-box glass-premium",style:ee({backgroundColor:O.value.styles.headerBg,borderColor:O.value.styles.accentColor})},[M("div",KM,[M("img",{src:O.value.logo,class:"logo-fixed"},null,8,GM)]),M("div",YM,[M("h1",{class:"grand-title",style:ee({fontFamily:O.value.styles.titleFont,fontSize:O.value.styles.titleSize+"px",color:O.value.styles.titleColor})},"DJTAL MECE: ADAB",4),M("p",{class:"grand-subtitle",style:ee({color:O.value.styles.headerText})},xt(O.value.name),5)]),M("div",QM,[i.value?.role==="admin"?(at(),ct("button",{key:0,onClick:_[0]||(_[0]=T=>u.value=!u.value),class:"icon-btn",title:"statistikler"},"")):te("",!0),i.value?.role==="admin"?(at(),ct("button",{key:1,onClick:_[1]||(_[1]=T=>a.value=!0),class:"icon-btn",title:"Tasarm"},"")):te("",!0),i.value?.role==="admin"?(at(),ct("button",{key:2,onClick:_[2]||(_[2]=T=>o.value=!0),class:"icon-btn",title:"Ayarlar"},"")):te("",!0),i.value?(at(),ct("div",XM,[M("span",null,xt(i.value.name),1),M("span",JM,xt(i.value.role==="admin"?"":i.value.role==="teacher"?"":""),1),M("button",{onClick:pt,class:"logout-btn"},"")])):(at(),ct("button",{key:3,onClick:_[3]||(_[3]=T=>r.value=!0),class:"btn-login-main",style:ee({backgroundColor:O.value.styles.accentColor})},"GR",4))])],4)]),M("main",ZM,[O.value.announcement?(at(),ct("div",{key:0,class:"announcement-box",style:ee({background:O.value.styles.accentColor})}," "+xt(O.value.announcement),5)):te("",!0),u.value&&i.value?.role==="admin"?(at(),ct("div",tO,[M("div",{class:"stats-header"},[_[50]||(_[50]=M("h3",null," Akademik Rapor",-1)),M("div",{class:"s-btns"},[M("button",{onClick:ht,class:"btn-xs"},"JSON ndir"),M("button",{onClick:zn,class:"btn-xs"}," AI Veri Seti")])]),M("div",eO,[M("div",nO,[Le(Se($M),{data:J.value,options:{responsive:!0}},null,8,["data"])]),M("div",sO,[Le(Se(HM),{data:G.value,options:{responsive:!0}},null,8,["data"])])])])):te("",!0),M("div",iO,[bt(M("input",{"onUpdate:modelValue":_[4]||(_[4]=T=>N.value=T),placeholder:" Konu, renci veya snf ara...",class:"search-input"},null,512),[[Pt,N.value]])]),M("button",{onClick:_[5]||(_[5]=T=>i.value?l.value=!0:r.value=!0),class:"btn-ask-compact",style:ee({backgroundColor:O.value.styles.accentColor})}," YEN SORU",4),M("div",rO,[(at(!0),ct(se,null,In(E.value,T=>(at(),ct("div",{key:T.id,class:Es(["post-card compact glass-premium",{pending:!T.isApproved}])},[M("div",oO,[M("div",aO,[M("span",{class:"badge",style:ee({backgroundColor:T.isApproved?O.value.styles.accentColor:"#f59e0b"})},xt(T.subject),5),T.classLevel?(at(),ct("span",lO,xt(T.classLevel),1)):te("",!0)]),M("div",cO,[M("b",null,xt(T.sender),1),_[51]||(_[51]=Ue()),M("small",null,"("+xt(T.senderClass||"Genel")+")",1)])]),M("p",uO,xt(T.content),1),M("div",hO,[M("button",{onClick:$=>me(T),class:"btn-like"}," "+xt(T.likes||0),9,dO)]),(i.value?.role==="admin"||i.value?.role==="teacher")&&!T.isApproved?(at(),ct("div",fO,[M("button",{onClick:$=>Wt(T,"soru"),class:"btn-tiny ok"}," Onayla",8,pO),M("button",{onClick:$=>Wt(T,"sil"),class:"btn-tiny no"}," Sil",8,gO)])):te("",!0),T.cevap?(at(),ct("div",{key:1,class:"answer-box compact-ans",style:ee({borderLeftColor:T.answerApproved?O.value.styles.accentColor:"#f59e0b"})},[M("div",mO,[_[52]||(_[52]=Ue(" ",-1)),M("b",null,xt(T.respondent)+":",1),_[53]||(_[53]=Ue()),T.answerApproved?(at(),ct("span",_O,"")):te("",!0)]),M("p",null,xt(T.cevap),1),(i.value?.role==="admin"||i.value?.role==="teacher")&&!T.answerApproved?(at(),ct("button",{key:0,onClick:$=>Wt(T,"cevap"),class:"btn-tiny ok"}," Onayla",8,yO)):te("",!0)],4)):te("",!0),i.value&&T.isApproved&&!T.cevap?(at(),ct("div",vO,[bt(M("input",{"onUpdate:modelValue":$=>P.value[T.id]=$,placeholder:"Yant...",class:"input-tiny"},null,8,bO),[[Pt,P.value[T.id]]]),M("button",{onClick:$=>{Se(ys)(Se(qt)(Se(Vt),"questions",T.id),{cevap:P.value[T.id],respondent:i.value.name,respId:i.value.id,respRole:i.value.role,answerApproved:!1}),P.value[T.id]=""},class:"btn-tiny send",style:ee({background:O.value.styles.accentColor})},"",12,wO)])):te("",!0)],2))),128))]),v.value>1?(at(),ct("div",EO,[M("button",{onClick:_[6]||(_[6]=T=>R(U.value-1)),disabled:U.value===1},"",8,TO),M("span",null,xt(U.value)+" / "+xt(v.value),1),M("button",{onClick:_[7]||(_[7]=T=>R(U.value+1)),disabled:U.value===v.value},"",8,IO)])):te("",!0)]),M("footer",AO,[M("div",{class:"center-column marquee-box glass-premium",style:ee({backgroundColor:O.value.styles.headerBg,color:O.value.styles.footerText,borderColor:O.value.styles.accentColor})},[M("div",SO,[_[54]||(_[54]=Ue("  Liderlik: ",-1)),(at(!0),ct(se,null,In(e.value.slice(0,3),T=>(at(),ct("span",{key:T.id},xt(T.name)+" ("+xt(Y(T.points))+" - "+xt(T.points||0)+"P) | ",1))),128))])],4)]),r.value?(at(),ct("div",xO,[M("div",CO,[M("div",RO,[M("button",{onClick:_[8]||(_[8]=T=>h.value="login"),class:Es({active:h.value=="login"})},"Giri",2),M("button",{onClick:_[9]||(_[9]=T=>h.value="register"),class:Es({active:h.value=="register"})},"Kayt",2)]),h.value=="login"?(at(),ct("div",PO,[_[55]||(_[55]=M("h3",null,"Giri Yap",-1)),bt(M("input",{"onUpdate:modelValue":_[10]||(_[10]=T=>p.value.email=T),type:"email",placeholder:"E-posta Adresi"},null,512),[[Pt,p.value.email]]),bt(M("input",{"onUpdate:modelValue":_[11]||(_[11]=T=>p.value.password=T),type:"password",placeholder:"ifre"},null,512),[[Pt,p.value.password]]),M("button",{onClick:k,class:"btn-save-final",style:ee({background:O.value.styles.accentColor})}," E-POSTA LE GR",4),_[56]||(_[56]=M("div",{class:"divider"},"VEYA",-1)),M("button",{onClick:x,class:"btn-google"}," GOOGLE LE GR")])):(at(),ct("div",kO,[M("div",DO,[M("button",{onClick:_[12]||(_[12]=T=>d.value="student"),class:Es({active:d.value=="student"})}," renci",2),M("button",{onClick:_[13]||(_[13]=T=>d.value="teacher"),class:Es({active:d.value=="teacher"})}," retmen",2)]),d.value=="student"?(at(),ct("div",MO,[_[58]||(_[58]=M("h3",null,"renci Kayd",-1)),bt(M("input",{"onUpdate:modelValue":_[14]||(_[14]=T=>m.value.name=T),placeholder:"Ad Soyad"},null,512),[[Pt,m.value.name]]),bt(M("input",{"onUpdate:modelValue":_[15]||(_[15]=T=>m.value.email=T),type:"email",placeholder:"E-posta"},null,512),[[Pt,m.value.email]]),bt(M("input",{"onUpdate:modelValue":_[16]||(_[16]=T=>m.value.password=T),type:"password",placeholder:"ifre"},null,512),[[Pt,m.value.password]]),bt(M("input",{"onUpdate:modelValue":_[17]||(_[17]=T=>m.value.confirmPassword=T),type:"password",placeholder:"ifreyi Onayla"},null,512),[[Pt,m.value.confirmPassword]]),bt(M("select",{"onUpdate:modelValue":_[18]||(_[18]=T=>m.value.class=T)},[_[57]||(_[57]=M("option",{value:"",disabled:"",selected:""},"Snf Seiniz",-1)),(at(!0),ct(se,null,In(O.value.classes,T=>(at(),ct("option",{key:T,value:T},xt(T),9,OO))),128))],512),[[Ra,m.value.class]]),bt(M("input",{"onUpdate:modelValue":_[19]||(_[19]=T=>m.value.number=T),placeholder:"Okul Numaras"},null,512),[[Pt,m.value.number]]),bt(M("input",{"onUpdate:modelValue":_[20]||(_[20]=T=>m.value.schoolCode=T),placeholder:"Okul Gvenlik Kodu",type:"password"},null,512),[[Pt,m.value.schoolCode]]),M("button",{onClick:S,class:"btn-save-final",style:ee({background:O.value.styles.accentColor})}," KAYIT OL",4)])):(at(),ct("div",VO,[_[59]||(_[59]=M("h3",null,"retmen Kayd",-1)),bt(M("input",{"onUpdate:modelValue":_[21]||(_[21]=T=>m.value.name=T),placeholder:"Ad Soyad"},null,512),[[Pt,m.value.name]]),bt(M("input",{"onUpdate:modelValue":_[22]||(_[22]=T=>m.value.email=T),type:"email",placeholder:"Okul E-postas (zorunlu)"},null,512),[[Pt,m.value.email]]),bt(M("input",{"onUpdate:modelValue":_[23]||(_[23]=T=>m.value.password=T),type:"password",placeholder:"ifre"},null,512),[[Pt,m.value.password]]),bt(M("input",{"onUpdate:modelValue":_[24]||(_[24]=T=>m.value.confirmPassword=T),type:"password",placeholder:"ifreyi Onayla"},null,512),[[Pt,m.value.confirmPassword]]),bt(M("input",{"onUpdate:modelValue":_[25]||(_[25]=T=>m.value.schoolCode=T),placeholder:"Okul Gvenlik Kodu",type:"password"},null,512),[[Pt,m.value.schoolCode]]),_[60]||(_[60]=M("small",null,"Not: Admin tarafndan onaynz bekleyeceksiniz.",-1)),M("button",{onClick:wt,class:"btn-save-final",style:ee({background:O.value.styles.accentColor})}," RETMEN KAYDI",4)]))])),M("button",{onClick:_[26]||(_[26]=T=>r.value=!1),class:"btn-close-final"},"Kapat")])])):te("",!0),l.value&&i.value?(at(),ct("div",NO,[M("div",LO,[_[67]||(_[67]=M("h3",null," Soru Sor",-1)),B.value?(at(),ct("div",FO,[_[61]||(_[61]=Ue("  ",-1)),_[62]||(_[62]=M("b",null,"Yapay Zeka Uyars:",-1)),_[63]||(_[63]=Ue(" Benzer bir soru bulundu!",-1)),_[64]||(_[64]=M("br",null,null,-1)),M("i",null,'"'+xt(B.value.content.substring(0,50))+'..."',1)])):te("",!0),bt(M("select",{"onUpdate:modelValue":_[27]||(_[27]=T=>A.value.subject=T)},[_[65]||(_[65]=M("option",{value:"",disabled:"",selected:""},"Ders Seiniz",-1)),(at(!0),ct(se,null,In(O.value.subjects,T=>(at(),ct("option",{key:T,value:T},xt(T),9,UO))),128))],512),[[Ra,A.value.subject]]),bt(M("select",{"onUpdate:modelValue":_[28]||(_[28]=T=>A.value.classLevel=T)},[_[66]||(_[66]=M("option",{value:"",disabled:"",selected:""},"Snf Seviyesi",-1)),(at(!0),ct(se,null,In(O.value.classes,T=>(at(),ct("option",{key:T,value:T},xt(T),9,BO))),128))],512),[[Ra,A.value.classLevel]]),bt(M("textarea",{"onUpdate:modelValue":_[29]||(_[29]=T=>A.value.content=T),placeholder:"Sorunuzu buraya yazn...",rows:"4"},null,512),[[Pt,A.value.content]]),M("button",{onClick:_[30]||(_[30]=T=>{Se(BP)(Se(Yr)(Se(Vt),"questions"),{sender:i.value.name,senderClass:i.value.class,senderId:i.value.id,senderRole:i.value.role,subject:A.value.subject,classLevel:A.value.classLevel,content:A.value.content,isApproved:!1,likes:0,created_at:Se(_u)()}),l.value=!1,A.value.value={subject:"",classLevel:"",content:""}}),class:"btn-save-final",style:ee({background:O.value.styles.accentColor})},"GNDER",4),M("button",{onClick:_[31]||(_[31]=T=>l.value=!1),class:"btn-close-final"},"Kapat")])])):te("",!0),a.value?(at(),ct("div",jO,[M("div",zO,[_[79]||(_[79]=M("h3",null," Tasarm Stdyosu",-1)),M("div",HO,[_[69]||(_[69]=M("h4",null," Balk Ayarlar",-1)),_[70]||(_[70]=M("label",null,"Font:",-1)),bt(M("select",{"onUpdate:modelValue":_[32]||(_[32]=T=>O.value.styles.titleFont=T)},[..._[68]||(_[68]=[M("option",{value:"'Inter', sans-serif"},"Modern",-1),M("option",{value:"'Georgia', serif"},"Klasik",-1),M("option",{value:"'Impact', sans-serif"},"Kaln",-1),M("option",{value:"'Trebuchet MS', sans-serif"},"Teknik",-1)])],512),[[Ra,O.value.styles.titleFont]]),_[71]||(_[71]=M("label",null,"Boyut:",-1)),bt(M("input",{type:"range","onUpdate:modelValue":_[33]||(_[33]=T=>O.value.styles.titleSize=T),min:"16",max:"40"},null,512),[[Pt,O.value.styles.titleSize]]),_[72]||(_[72]=M("label",null,"Renk:",-1)),bt(M("input",{type:"color","onUpdate:modelValue":_[34]||(_[34]=T=>O.value.styles.titleColor=T),style:{width:"100%",height:"35px"}},null,512),[[Pt,O.value.styles.titleColor]])]),M("div",$O,[_[73]||(_[73]=M("h4",null," Genel Font Ayarlar",-1)),bt(M("input",{"onUpdate:modelValue":_[35]||(_[35]=T=>O.value.styles.customFontUrl=T),placeholder:"Google Fonts Linki (opsiyonel)"},null,512),[[Pt,O.value.styles.customFontUrl]]),bt(M("input",{"onUpdate:modelValue":_[36]||(_[36]=T=>O.value.styles.customFontName=T),placeholder:"Font Ad (opsiyonel)"},null,512),[[Pt,O.value.styles.customFontName]]),M("label",null,"Temel Yaz Boyutu: "+xt(O.value.styles.baseFontSize)+"px",1),bt(M("input",{type:"range","onUpdate:modelValue":_[37]||(_[37]=T=>O.value.styles.baseFontSize=T),min:"12",max:"20"},null,512),[[Pt,O.value.styles.baseFontSize]])]),M("div",WO,[_[78]||(_[78]=M("h4",null," Renkler",-1)),M("div",qO,[M("div",null,[_[74]||(_[74]=M("label",null,"Banner Arka Plan:",-1)),bt(M("input",{type:"color","onUpdate:modelValue":_[38]||(_[38]=T=>O.value.styles.headerBg=T)},null,512),[[Pt,O.value.styles.headerBg]])]),M("div",null,[_[75]||(_[75]=M("label",null,"Banner Yazs:",-1)),bt(M("input",{type:"color","onUpdate:modelValue":_[39]||(_[39]=T=>O.value.styles.headerText=T)},null,512),[[Pt,O.value.styles.headerText]])]),M("div",null,[_[76]||(_[76]=M("label",null,"Buton Rengi (Vurgu):",-1)),bt(M("input",{type:"color","onUpdate:modelValue":_[40]||(_[40]=T=>O.value.styles.accentColor=T)},null,512),[[Pt,O.value.styles.accentColor]])]),M("div",null,[_[77]||(_[77]=M("label",null,"Alt Yaz:",-1)),bt(M("input",{type:"color","onUpdate:modelValue":_[41]||(_[41]=T=>O.value.styles.footerText=T)},null,512),[[Pt,O.value.styles.footerText]])])])]),M("button",{onClick:st,class:"btn-save-final",style:ee({backgroundColor:O.value.styles.accentColor})}," TASARIMI MHRLE",4),M("button",{onClick:_[42]||(_[42]=T=>a.value=!1),class:"btn-close-final"},"Kapat")])])):te("",!0),o.value?(at(),ct("div",KO,[M("div",GO,[_[97]||(_[97]=M("h3",null," Ynetim Paneli",-1)),M("div",YO,[_[81]||(_[81]=M("h4",null," Gvenlik & Yedekleme",-1)),M("div",{class:"row-flex"},[M("button",{onClick:Ct,class:"btn-snap"}," Snapshot Al"),M("button",{onClick:Me,class:"btn-roll"}," Geri Dn")]),M("div",QO,[M("label",XO,[_[80]||(_[80]=Ue(" YEDEK YKLE ",-1)),M("input",{type:"file",onChange:it,hidden:"",accept:".json"},null,32)])])]),M("div",JO,[_[82]||(_[82]=M("h4",null," Okul Bilgileri",-1)),_[83]||(_[83]=M("label",null,"Okul Ad:",-1)),bt(M("input",{"onUpdate:modelValue":_[43]||(_[43]=T=>O.value.name=T)},null,512),[[Pt,O.value.name]]),_[84]||(_[84]=M("label",null,"Okul Gvenlik Kodu:",-1)),bt(M("input",{"onUpdate:modelValue":_[44]||(_[44]=T=>O.value.schoolCode=T),type:"password"},null,512),[[Pt,O.value.schoolCode]]),_[85]||(_[85]=M("label",null,"Duyuru:",-1)),bt(M("textarea",{"onUpdate:modelValue":_[45]||(_[45]=T=>O.value.announcement=T),rows:"2"},null,512),[[Pt,O.value.announcement]]),_[86]||(_[86]=M("label",null,"Logo URL:",-1)),bt(M("input",{"onUpdate:modelValue":_[46]||(_[46]=T=>O.value.logo=T)},null,512),[[Pt,O.value.logo]])]),M("div",ZO,[_[87]||(_[87]=M("h4",null," Ders Ynetimi",-1)),M("div",tV,[bt(M("input",{"onUpdate:modelValue":_[47]||(_[47]=T=>w.value=T),placeholder:"Yeni Ders Ad"},null,512),[[Pt,w.value]]),M("button",{onClick:Ee,class:"btn-add"},"")]),M("div",eV,[(at(!0),ct(se,null,In(O.value.subjects,(T,$)=>(at(),ct("span",{key:$,class:"tag-item"},[Ue(xt(T)+" ",1),M("b",{onClick:X=>Ke($),style:{cursor:"pointer"}},"",8,nV)]))),128))])]),M("div",sV,[_[88]||(_[88]=M("h4",null," Snf Ynetimi",-1)),M("div",iV,[bt(M("input",{"onUpdate:modelValue":_[48]||(_[48]=T=>b.value=T),placeholder:"Yeni Snf Ad"},null,512),[[Pt,b.value]]),M("button",{onClick:le,class:"btn-add"},"")]),M("div",rV,[(at(!0),ct(se,null,In(O.value.classes,(T,$)=>(at(),ct("span",{key:$,class:"tag-item"},[Ue(xt(T)+" ",1),M("b",{onClick:X=>wn($),style:{cursor:"pointer"}},"",8,oV)]))),128))])]),M("div",aV,[_[91]||(_[91]=M("h4",null," renci Ynetimi",-1)),M("div",lV,[_[90]||(_[90]=M("label",null,"Onay Bekleyenler:",-1)),(at(!0),ct(se,null,In(e.value.filter(T=>!T.isApproved),T=>(at(),ct("div",{key:T.id,class:"stu-row"},[M("div",null,[M("b",null,xt(T.name),1),_[89]||(_[89]=Ue()),M("small",null,"("+xt(T.class)+")",1)]),M("div",null,[M("button",{onClick:$=>Se(ys)(Se(qt)(Se(Vt),"users",T.id),{isApproved:!0}),class:"btn-tiny ok"}," Onayla",8,cV),M("button",{onClick:$=>qe(T.id),class:"btn-tiny no"}," Reddet",8,uV)])]))),128)),e.value.filter(T=>!T.isApproved).length?te("",!0):(at(),ct("div",hV,"Onay bekleyen renci yok "))])]),M("div",dV,[_[95]||(_[95]=M("h4",null," retmen Ynetimi",-1)),M("div",fV,[_[93]||(_[93]=M("label",null,"Onay Bekleyenler:",-1)),(at(!0),ct(se,null,In(s.value.filter(T=>!T.isApproved),T=>(at(),ct("div",{key:T.id,class:"stu-row"},[M("div",null,[M("b",null,xt(T.name),1),_[92]||(_[92]=Ue()),M("small",null,"("+xt(T.email)+")",1)]),M("div",null,[M("button",{onClick:$=>jn(T.id),class:"btn-tiny ok"}," Onayla",8,pV),M("button",{onClick:$=>ti(T.id),class:"btn-tiny no"}," Reddet",8,gV)])]))),128)),s.value.filter(T=>!T.isApproved).length?te("",!0):(at(),ct("div",mV,"Onay bekleyen retmen yok "))]),_[96]||(_[96]=M("label",{style:{"margin-top":"10px"}},"Onayl retmenler:",-1)),(at(!0),ct(se,null,In(s.value.filter(T=>T.isApproved),T=>(at(),ct("div",{key:T.id,class:"stu-row"},[M("div",null,[M("b",null,xt(T.name),1),_[94]||(_[94]=Ue()),M("small",null,"("+xt(T.email)+")",1)]),M("div",null,[M("button",{onClick:$=>Se(La)(Se(qt)(Se(Vt),"users",T.id)),class:"btn-tiny no"}," Sil",8,_V)])]))),128))]),M("button",{onClick:st,class:"btn-save-final",style:ee({backgroundColor:O.value.styles.accentColor})}," AYARLARI MHRLE",4),M("button",{onClick:_[49]||(_[49]=T=>o.value=!1),class:"btn-close-final"},"Kapat")])])):te("",!0)],4))}},vV=WM(yV,[["__scopeId","data-v-a3c044f5"]]);AI(vV).mount("#app");
